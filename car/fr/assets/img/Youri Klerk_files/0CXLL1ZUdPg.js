/*!CK:2758482434!*//*1454407604,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["yEMO2"]); }

__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null);
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STORY:{CHANGE_ORDER_MODE:"story_change_order_mode",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SPAM_FETCHED:"story_spam_fetched",TOGGLE_LIKE:"story_toggle_like",TOGGLE_REPLIES:"story_toggle_replies"},COMMENT:{EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_PIN:"comment_toggle_pin",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",TYPING_CHANGE:"add_comment_typing_change"},FEEDBACK:{FETCH_REQUEST:"feedback_fetch_request",FETCHED_TARGET:"feedback_fetched_target"}};},null);
__d('RTISubscriptionManager',['ChannelConstants','CurrentLocale','SystemEvents','invariant','setTimeoutAcrossTransitions','Arbiter','ErrorUtils','Run','RTISubscriptionManagerConfig','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r={SUBSCRIBE:'s',UNSUBSCRIBE:'u'},s=300,t=3;function u(){this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=null;this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=true;this.$RTISubscriptionManager8=document.readyState==='complete';o.onAfterLoad((function(){this.$RTISubscriptionManager8=true;this.flush();}).bind(this));this.$RTISubscriptionManager9=null;m.subscribe(h.ON_ENTER_STATE,(function(x,y){if(!this.$RTISubscriptionManager9)return;var z=/pull/.test(y.state);if(!this.$RTISubscriptionManager2&&z){this.$RTISubscriptionManager3=true;if(!this.$RTISubscriptionManager4){this.$RTISubscriptionManager4=true;l((function(){this.$RTISubscriptionManager2=this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;if(this.$RTISubscriptionManager2)this.flush();}).bind(this),u.PULL_HINT_DELAY_MILLIS);}}else if(!z){this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager2=false;}else if(z){this.$RTISubscriptionManager2=true;this.flush();}}).bind(this));j.subscribe(j.ONLINE,(function(x,y){if(!y){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;}}).bind(this));j.subscribe(j.USER,(function(x,y){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager1={};}).bind(this));m.subscribe(h.RTI_SESSION,(function(x,y){if(!this.$RTISubscriptionManager9&&y)this.deleteSubscriptions(function(z){return z.getState()===r.UNSUBSCRIBE;});this.$RTISubscriptionManager9=y;if(this.$RTISubscriptionManager9){this.$RTISubscriptionManager2=true;this.flush();}}).bind(this));m.subscribe(h.ON_INVALID_HISTORY,(function(){this.$RTISubscriptionManager2=true;this.forEachSubscription(function(x,y){y.setDirty(true);});this.getCurrentSession();}).bind(this));this.getCurrentSession();m.subscribe(h.SKYWALKER,function(x,y){var z=y.obj.topic,aa={};if(y.obj.payloads===undefined){aa.obj=[y.obj.payload];}else aa.obj=y.obj.payloads;m.inform(h.getSkywalkerArbiterType(z),aa);});}u.prototype.subscribe=function(x,y,z,aa,ba){!x?k(0):undefined;!y?k(0):undefined;if(Object.keys(this.$RTISubscriptionManager1).length<this.getMaxSubscriptions()){if(this.isSubscribed(x)){var ca=this.$RTISubscriptionManager1[x];if(ca&&ca.getArbiterToken()){m.unsubscribe(ca.getArbiterToken());ca.setArbiterToken(null);}}z=z||{};z.locale=i.get();if(p.autobot){z.autobotOverrideTier=p.autobot.tier;z.autobotOverrideHostName=p.autobot.host_name;z.autobotOverrideHostIp=p.autobot.host_ip;}var da=new w(x,y,z,aa,ba),ea=new v(da);this.$RTISubscriptionManager1[x]=da;var fa=h.getSkywalkerArbiterType(x),ga=m.subscribe(fa,(function(ha,event){var ia=event.obj.length;for(var ja=0;ja<ia;ja++){var ka={topic:x,payload:event.obj[ja]};n.applyWithGuard(y,this,[ka]);}this.$RTISubscriptionManager10();}).bind(this));da.setArbiterToken(ga);this.flush();return ea;}return null;};u.prototype.unsubscribe=function(x){!x?k(0):undefined;if(x in this.$RTISubscriptionManager1){var y=this.$RTISubscriptionManager1[x];y.prepareUnsubscribe();if(y.getArbiterToken()){m.unsubscribe(y.getArbiterToken());y.setArbiterToken(null);}}};u.prototype.unsubscribeAll=function(){if(this.isReady()){var x={reset:'t'};this.$RTISubscriptionManager9.issueRequest('/sub',x,{},function(y){});}};u.prototype.flush=function(){if(this.isReady()&&!this.$RTISubscriptionManager5){this.$RTISubscriptionManager5=true;this.$RTISubscriptionManager6=false;var x=[],y={},z=false;this.forEachSubscription(function(ea,fa){fa.ping();if(fa.isDirty()){var ga='subscriptions',ha=y[ga];if(!ha){ha=[];y[ga]=ha;}x.push(fa);fa.setDirty(false);fa.setSent(false);var ia={topic:fa.getTopic(),state:fa.getState(),context:fa.getContext()};ha.push(ia);}else z=true;});if(!z&&y.subscriptions&&y.subscriptions.length>0){var aa=[];for(var ba=0;ba<y.subscriptions.length;ba++)if(y.subscriptions[ba].state!==r.UNSUBSCRIBE)aa.push(y.subscriptions[ba]);y.subscriptions=aa;this.$RTISubscriptionManager7=true;}var ca=(function(ea){var fa=ea.data!=null;if(this.$RTISubscriptionManager7&&fa)this.$RTISubscriptionManager7=false;for(var ga=0;ga<x.length;ga++){var ha=x[ga];ha.setSent(fa);ha.setDirty(!fa);if(ha.getState()===r.SUBSCRIBE){var ia=ha.getSubscribeCallback();if(ia!==null)n.applyWithGuard(ia,this,[ea]);}}this.deleteSubscriptions(function(ja){return ja.getState()===r.UNSUBSCRIBE&&ja.isSent();});this.$RTISubscriptionManager5=false;if(this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=false;this.flush();}}).bind(this);if(Object.keys(y).length>0){var da={};if(this.$RTISubscriptionManager7)da.reset='t';this.$RTISubscriptionManager9.issueRequest('/sub',da,y,ca);}else this.$RTISubscriptionManager5=false;}else{this.$RTISubscriptionManager6=true;if(this.$RTISubscriptionManager9===null)this.getCurrentSession();}};u.prototype.deleteSubscriptions=function(x){!x?k(0):undefined;var y=[];this.forEachSubscription(function(aa,ba){if(x.apply(this,[ba]))y.push(aa);});for(var z=0;z<y.length;z++)delete this.$RTISubscriptionManager1[y[z]];};u.prototype.forEachSubscription=function(x){!x?k(0):undefined;for(var y in this.$RTISubscriptionManager1)if(this.$RTISubscriptionManager1.hasOwnProperty(y))x.apply(this,[y,this.$RTISubscriptionManager1[y]]);};u.prototype.getSubscriptions=function(){var x=[];this.forEachSubscription(function(y,z){x.push(z);});return x;};u.prototype.isSubscribed=function(x){!x?k(0):undefined;return x in this.$RTISubscriptionManager1;};u.prototype.isReady=function(){if(this.$RTISubscriptionManager9&&this.$RTISubscriptionManager2!==null&&this.$RTISubscriptionManager2&&this.$RTISubscriptionManager8)return true;return false;};u.prototype.getCurrentSession=function(){m.inform(h.GET_RTI_SESSION_REQUEST);};u.prototype.getMaxSubscriptions=function(){if(p.config&&p.config.hasOwnProperty('max_subscriptions')){return p.config.max_subscriptions;}else return s;};u.prototype.$RTISubscriptionManager10=function(){var x=null,y=null;if(p.config){x=p.config.www_idle_unsubscribe_ms;y=p.config.www_idle_unsubscribe_ms_overrides;}if(!x)return;if(q.isActive(x))return;this.forEachSubscription((function(z,aa){var ba=aa.getTopic(),ca=false;if(ba.startsWith('gqls/')){var da=ba.split('/',2)[1];if(y!==null&&typeof y==='object'&&y[da]!==undefined){ca=!q.isActive(y[da]);}else ca=true;}else if(ba.startsWith('graphql'))ca=true;if(ca)this.unsubscribe(ba);}).bind(this));};function v(x){this.$SubscriptionToken1=x;}v.prototype.unsubscribe=function(){u.unsubscribe(this.$SubscriptionToken1.getTopic());};function w(x,y,z,aa,ba){this.$SubscriptionData1=x;this.$SubscriptionData2=y;this.$SubscriptionData3=true;this.$SubscriptionData4=false;this.$SubscriptionData5=r.SUBSCRIBE;this.$SubscriptionData6=null;this.$SubscriptionData7=Date.now();if(z){this.$SubscriptionData8=z;}else this.$SubscriptionData8={};if(aa){this.$SubscriptionData9=aa;}else this.$SubscriptionData9=null;if(typeof ba=='function'){this.$SubscriptionData10=ba;this.$SubscriptionData11=0;}else this.$SubscriptionData10=function(){return true;};}w.prototype.getCreatedTime=function(){return this.$SubscriptionData7;};w.prototype.getTopic=function(){return this.$SubscriptionData1;};w.prototype.getListener=function(){return this.$SubscriptionData2;};w.prototype.getSubscribeCallback=function(){return this.$SubscriptionData9;};w.prototype.getArbiterToken=function(){return this.$SubscriptionData6;};w.prototype.setArbiterToken=function(x){this.$SubscriptionData6=x;};w.prototype.isDirty=function(){return this.$SubscriptionData3;};w.prototype.setDirty=function(x){this.$SubscriptionData3=x;};w.prototype.ping=function(){if(this.$SubscriptionData10()){this.$SubscriptionData11=0;}else if(this.$SubscriptionData11<=t){this.$SubscriptionData11++;}else{var x=this.getState();this.setState(r.UNSUBSCRIBE);if(x!=this.$SubscriptionData5){this.setDirty(true);this.setSent(false);}}};w.prototype.getState=function(){return this.$SubscriptionData5;};w.prototype.setState=function(x){this.$SubscriptionData5=x;};w.prototype.getContext=function(){return this.$SubscriptionData8;};w.prototype.isSent=function(){return this.$SubscriptionData4;};w.prototype.setSent=function(x){this.$SubscriptionData4=x;};w.prototype.prepareUnsubscribe=function(){this.setState(r.UNSUBSCRIBE);this.setDirty(true);this.setSent(false);};o.onUnload(function(){u.unsubscribeAll();});u.PULL_HINT_DELAY_MILLIS=10000;Object.keys(u.prototype).forEach(function(x){u[x]=function(){var y=u;return u.prototype[x].apply(y,arguments);};});u.call(u);f.exports=u;},null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$UFICommentTypedLogger1=babelHelpers._extends({},this.$UFICommentTypedLogger1,m);return this;};k.prototype.setDuration=function(m){this.$UFICommentTypedLogger1.duration=m;return this;};k.prototype.setEvent=function(m){this.$UFICommentTypedLogger1.event=m;return this;};k.prototype.setHasPhoto=function(m){this.$UFICommentTypedLogger1.has_photo=m;return this;};k.prototype.setHasSticker=function(m){this.$UFICommentTypedLogger1.has_sticker=m;return this;};k.prototype.setIsReply=function(m){this.$UFICommentTypedLogger1.is_reply=m;return this;};k.prototype.setRequestLength=function(m){this.$UFICommentTypedLogger1.request_length=m;return this;};k.prototype.setVC=function(m){this.$UFICommentTypedLogger1.vc=m;return this;};var l={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=k;},null);
__d('UFICommentLogger',['UFICommentTypedLogger'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}i.prototype.logNewCommentPost=function(j,k,l){this.$UFICommentLogger2[j]=babelHelpers._extends({timestamp:k},l);new h().setEvent('new_comment_post').setHasPhoto(l.has_photo).setHasSticker(l.has_sticker).setIsReply(l.is_reply).log();};i.prototype.logNewCommentReceived=function(j,k){var l=this.$UFICommentLogger2[j];if(l){var m=0;if(k&&l.timestamp)m=k-l.timestamp;new h().setEvent('new_comment_received').setDuration(m).setHasPhoto(l.has_photo).setHasSticker(l.has_sticker).setIsReply(l.is_reply).log();}delete this.$UFICommentLogger2[j];};i.prototype.logCommentFetch=function(j,k,l){var m=babelHelpers._extends({timestamp:k},l);if(this.$UFICommentLogger1[j]===undefined){this.$UFICommentLogger1[j]=[m];}else this.$UFICommentLogger1[j].push(m);new h().setEvent('fetch_comment').setIsReply(l.is_reply).setRequestLength(l.request_length).log();};i.prototype.logCommentFetchReceived=function(j,k){if(this.$UFICommentLogger1[j]){var l=this.$UFICommentLogger1[j].shift(),m=0;if(k&&l.timestamp)m=k-l.timestamp;new h().setEvent('fetch_comment_received').setDuration(m).setIsReply(l.is_reply).setRequestLength(l.request_length).log();if(this.$UFICommentLogger1[j].length===0)delete this.$UFICommentLogger1[j];}};f.exports=new i();},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=new h();function l(o,p){i.log('comment_vpv',undefined,null,'comment',p);if(!k.has(o))k.set(o,new j());k.get(o).add(p);}function m(o,p){if(k.has(o))return k.get(o).has(p);return false;}var n={logVPV:l,hasLoggedVPV:m};f.exports=n;},null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h;},null);
__d('UFISharedDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={cancel:function(j){return {type:h.ADD_COMMENT.CANCEL,instanceid:j};},retrySubmit:function(j){return {type:h.ADD_COMMENT.RETRY_SUBMIT,comment:j};},submitEdit:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_EDIT,comment:j,commentData:k,target:l};},submitNew:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_NEW,comment:j,target:k,replyCommentID:l,timestamp:Date.now()};},typingChange:function(j){return {type:h.ADD_COMMENT.TYPING_CHANGE,state:j};}};f.exports=i;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={edit:function(j){return {type:h.COMMENT.EDIT,comment:j};},remove:function(j,k,l){return {type:h.COMMENT.REMOVE,comment:j,target:k,onConfirm:l};},removePreview:function(j,k){return {type:h.COMMENT.REMOVE_PREVIEW,comment:j,target:k};},toggleLike:function(j,k){return {type:h.COMMENT.TOGGLE_LIKE,comment:j,like:!j.hasviewerliked,target:k};},togglePin:function(j,k){return {type:h.COMMENT.TOGGLE_PIN,comment:j,target:k};},translate:function(j,k){return {type:h.COMMENT.TRANSLATE,comment:j,target:k};},markAsSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:j,target:k};},markAsNotSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:j,target:k};},inlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:j,target:k,ownerid:l};},undoInlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:j,target:k,ownerid:l};}};f.exports=i;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={changeOrderingMode:function(j){return {type:h.STORY.CHANGE_ORDER_MODE,mode:j};},commentsArrived:function(j,k,l){return {type:h.STORY.COMMENTS_ARRIVED,newOffset:j,newLength:k,source:l};},pageInComments:function(j,k,l){return {type:h.STORY.PAGE_IN_COMMENTS,commentID:j,direction:k,nextRange:l};},showReplies:function(j,k){return {type:h.STORY.SHOW_REPLIES,commentID:j,initiatorComment:k};},spamFetched:function(j,k,l,m){return {type:h.STORY.SPAM_FETCHED,ftentidentifier:j,viewas:k,commentIDs:l,parentCommentID:m};},toggleLike:function(j){return {type:h.STORY.TOGGLE_LIKE,target:j};},toggleReplies:function(j){return {type:h.STORY.TOGGLE_REPLIES,commentID:j};}};f.exports=i;},null);
__d('UFIBlingItem.react',['React','NumberFormat','UFIConfig','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:n.object.isRequired,count:n.number.isRequired,countreduced:n.string,className:n.string,iconClassName:n.string,itemKey:n.string},render:function(){var p=m(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),q=i.formatIntegerWithDelimiter(this.props.count,j.numberDelimiter),r=q;switch(this.props.itemKey){case 'like':r=l._({"Like":"\u041e\u0442\u043c\u0435\u0442\u043a\u0438 \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb: {count}","Likes":"{count} \u043e\u0442\u043c\u0435\u0442\u043e\u043a \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb"},[l.param('count',isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':r=l._({"Comment":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: {count}","Comments":"{count} \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},[l.param('count',isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':r=l._({"Reaction":"{count} \u0440\u0435\u0430\u043a\u0446\u0438\u044f","Reactions":"{count} \u0440\u0435\u0430\u043a\u0446\u0438\u0439"},[l.param('count',isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':r=l._({"Share":"{count} \u043f\u0435\u0440\u0435\u043f\u043e\u0441\u0442","Shares":"{count} \u043f\u0435\u0440\u0435\u043f\u043e\u0441\u0442\u043e\u0432"},[l.param('count',isNaN(this.props.countreduced)?this.props.countreduced:r),l['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return (h.createElement('span',{className:"_2u_j"},r));}});f.exports=o;},null);
__d('UFIBlingBox.react',['React','UFIBlingItem.react','UFIConstants','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:m.object.isRequired,'data-ft':m.string,'data-comment-prelude-ref':m.string,comments:m.number,commentsreduced:m.string,likes:m.number,likesreduced:m.string,nfb:m.number,onClick:m.func,permalink:m.string,reactionCount:m.number,reactionCountMap:m.object,reactionCountReduced:m.string,reshares:m.number,resharesreduced:m.string,readOnly:m.bool},render:function(){var o=[],p='',q=this.props.contextArgs.ufiexperiments||{},r=this.props,s=r.likes,t=r.likesreduced,u=r.reactionCount,v=r.reactionCountMap,w=r.reactionCountReduced;if(s||u){var x=v&&v[j.LikeReaction]['default']!==u;o.push(h.createElement(i,{className:o.length>0?"mls":'',contextArgs:this.props.contextArgs,count:x?u:s,countreduced:x?w:t,iconClassName:'UFIBlingBoxLikeIcon',itemKey:x?'reaction':'like',key:'like'}));p+=this.props.likes==1?l._("1 \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb"):l._({"*":"{count} \u043e\u0442\u043c\u0435\u0442\u043e\u043a \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb","268435456":"{count} \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb","536870912":"{count} \u043e\u0442\u043c\u0435\u0442\u043a\u0438 \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb"},[l.param('count',this.props.likes,[0])]);p+=' ';}if(this.props.comments){o.push(h.createElement(i,{className:o.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));p+=this.props.comments==1?l._("1 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"):l._({"*":"{count} \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432","268435456":"{count} \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439","536870912":"{count} \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f"},[l.param('count',this.props.comments,[0])]);p+=' ';}if(this.props.reshares){o.push(h.createElement(i,{className:o.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));p+=this.props.reshares==1?l._("1 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445"):l._({"*":"\u042d\u0442\u0438\u043c \u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c: {count}"},[l.param('count',this.props.reshares,[0])]);}var y;if(this.props.readOnly){y=h.createElement('span',{'aria-label':p},o);}else{var z=this.props.contextArgs.commentajaxify;y=h.createElement('a',{ajaxify:z,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':p,onClick:this.props.onClick,rel:z?'dialog':'ignore'},o);}return y;}});f.exports=n;},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={};function j(l){if(!i[l])i[l]={};}var k={getKeyForInstance:function(l,m){j(l);return i[l][m];},updateState:function(l,m,n){j(l);i[l][m]=n;h.didUpdateInstanceState(l,m);},updateStateField:function(l,m,n,o){var p=this.getKeyForInstance(l,m)||{};p[n]=o;this.updateState(l,m,p);},updateStateFields:function(l,m,n){var o=this.getKeyForInstance(l,m)||{};o=babelHelpers._extends({},o,n);this.updateState(l,m,o);}};f.exports=k;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d('UFIReactionsProfileBrowserUtils',['ActorURI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getDialogURI:function(l,m){return h.create(j.getURIBuilder().setString('ft_ent_identifier',l.entidentifier).setEnum('reaction_type',m).getURI(),l.actorforpost);},getPageURI:function(l){return h.create(i.getURIBuilder().setString('ft_ent_identifier',l.entidentifier).getURI(),l.actorforpost);}};f.exports=k;},null);
__d('sortReactionTypes',['UFIConstants','UFIReactionTypes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};i.ordering.forEach(function(l,m){j[l]=m;});function k(l,m){return Object.keys(l).map(function(n){return Number(n);}).sort(function(n,o){if(m&&n===h.LikeReaction)return -1;if(l[n]['default']===l[o]['default'])return j[n]-j[o];return l[o]['default']-l[n]['default'];});}f.exports=k;},null);
__d("XUFIReactionTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}});},null);
__d('UFIReactionsSocialSentence.react',['ActorURI','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,i.Component);p=o&&o.prototype;function q(r,s){'use strict';p.constructor.call(this,r,s);}q.prototype.$UFIReactionsSocialSentence1=function(r){'use strict';var s=r.actorforpost,t=r.entidentifier;return {'data-hover':'tooltip','data-tooltip-uri':h.create(m.getURIBuilder().setString('ft_ent_identifier',t).getURI(),s)};};q.prototype.render=function(){'use strict';var r=j.hasReactionsMultilineSocialSentence,s=this.props.feedback,t=s.likesentences,u=s.reactioncount,v=s.reactioncountreduced,w=s.reactionsentences,x=s.viewerreaction,y=x?u>3:u>2,z=null;if(y)z=this.$UFIReactionsSocialSentence1(s);var aa=null;if(w&&w.current){aa=w.current.text;}else if(t&&t.current){aa=t.current.text;}else aa=v;var ba=undefined;if(aa)ba=i.createElement('span',{className:"_4arz"},i.createElement('span',z,aa));var ca=undefined;if((!r||!ba)&&s.reactioncount)ca=i.createElement('span',{'aria-hidden':ba,className:"_1g5v"},i.createElement('span',z,s.reactioncountreduced));return (i.createElement('div',{className:"_ipp"+(r?' '+"_4m1f":'')},i.createElement(k,{className:"_4ar- _ipn",feedback:s,max:3},i.createElement('a',{ajaxify:l.getDialogURI(s),href:l.getPageURI(s),rel:'dialog'},ca,ba))));};f.exports=q;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d("XUFIShareTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d('UFIReactionsBlingSocialSentence.react',['ActorURI','ProfileBrowserLink','ProfileBrowserTypes','React','UFIReactionsSocialSentence.react','URI','XUFICommentTooltipController','XUFIShareTooltipController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;r=babelHelpers.inherits(t,k.Component);s=r&&r.prototype;function t(u,v){'use strict';s.constructor.call(this);this.state={};}t.prototype.renderComments=function(){'use strict';var u=this.props.contextArgs.isstreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!u)return null;var v=this.props.contextArgs.commentajaxify,w=isNaN(this.props.feedback.commentcountreduced)&&!u?this.props.feedback.commentcountreduced:this.props.commentCount,x=h.create(n.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (k.createElement('a',{ajaxify:v,'aria-live':'polite',className:"_ipm",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':x,href:this.props.href,onClick:this.props.onCommentClick,rel:v?'dialog':'ignore',role:'button'},this.props.children,q._({"Comment":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: {count}","Comments":"{count} \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},[q.param('count',w),q['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])));};t.prototype.renderSeens=function(){'use strict';if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var u=this.props.feedback.seencount,v=j.GROUP_MESSAGE_VIEWERS,w={id:this.props.feedback.targetfbid},x=new m('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:this.props.feedback.entidentifier,displayed_count:u}),y;if(this.props.feedback.seenbyall){y=q._("\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u0432\u0441\u0435\u043c\u0438");}else if(u===1){y=q._("\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e 1 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c");}else y=q._("\u0412\u0438\u0434\u0435\u043b\u0438: {count}",[q.param('count',u)]);return (k.createElement('a',{ajaxify:i.constructDialogURI(v,w),'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':x,href:i.constructPageURI(v,w),rel:'dialog'},y));};t.prototype.renderShares=function(){'use strict';if(!this.props.feedback.sharecount)return null;var u=h.create(new m('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid}),this.props.feedback.actorforpost),v=h.create(new m('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid}),this.props.feedback.actorforpost),w=h.create(o.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (k.createElement('a',{ajaxify:u,'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':w,href:v,rel:'dialog',role:'button'},q._({"Share":"{count} \u043f\u0435\u0440\u0435\u043f\u043e\u0441\u0442","Shares":"{count} \u043f\u0435\u0440\u0435\u043f\u043e\u0441\u0442\u043e\u0432"},[q.param('count',this.props.feedback.sharecountreduced),q['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])));};t.prototype.renderViews=function(){'use strict';var u=this.props.contextArgs.viewCount;if(!u)return null;return (k.createElement('span',{'aria-live':'polite',className:"_ipm"},q._({"View":"{count} \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440","Views":"{count} \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"},[q.param('count',this.props.contextArgs.viewCountReduced),q['enum'](u==='1'?'View':'Views',{View:'View',Views:'Views'})])));};t.prototype.render=function(){'use strict';return (k.createElement('div',{className:"_ipn"},k.createElement('div',{className:"_ipo"},this.renderComments(),this.renderShares(),this.renderSeens(),this.renderViews()),k.createElement(l,{feedback:this.props.feedback})));};f.exports=t;},null);
__d('UFICommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=o({actorID:true});function q(r){this.count=0;this.overriddenDisplayCount=null;this.deletedComments={};this.deletedCount=0;this.dataSource=new i();this.feedbackTargetID=r;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};n.getFeedbackTarget(this.feedbackTargetID,(function(s){this.actorID=s.actorforpost;this.basePermalink=s.permalink;}).bind(this));}q.prototype.addOrUpdateComment=function(r){if(r.islocal){this.$UFICommentList1(r.id);}else this.$UFICommentList2(r.id,r.clientid,r.legacyid);j.didUpdateFeedback(this.feedbackTargetID);};q.prototype.$UFICommentList1=function(r){this.dataSource.setResource(this.count,r);this.count++;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount++;};q.prototype.$UFICommentList2=function(r,s,t){var u=s&&h.isExistingClientID(s),v=this.dataSource.getAllResources(),w={};for(var x in v){var y=v[x];w[y]=x;}if(u&&s in w){w[r]=w[s];var z=w[s];this.dataSource.setResource(z,r);if(l.logCommentPost)k.logNewCommentReceived(s,Date.now());}else if(!w[r]&&s)this.$UFICommentList1(r);if(t&&r in w)this.commentPermalinks[r]=this.buildCommentPermalink(r,t,w[r]);};q.prototype.addCommentIDs=function(r,s,t){var u={};for(var v=0;v<s;v++)u[r+v]=t[v]||m.unavailableCommentKey;this.dataSource.addResourcesAndExecute(u);j.didUpdateFeedback(this.feedbackTargetID);return this;};q.prototype.getComments=function(r,s,t,u){var v=[];for(var w=0;w<s;w++)v.push(r+w);var x=this.dataSource.getUnavailableResourcesFromRequest(v);if(x.length){var y=Math.min.apply(Math,x),z=Math.max.apply(Math,x),aa=y,ba=z-y+1;if(aa<this.lastRequestedOffset||aa+ba>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=aa;this.lastRequestedLength=ba;this.fetchComments(aa,ba,t);}}else this.dataSource.executeOrEnqueue(v,this.deferredCallback.bind(this,r,s,u));};q.prototype.fetchComments=function(r,s,t){};q.prototype.deferredCallback=function(r,s,t,u){};q.prototype.reset=function(){var r=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return r;};q.prototype.deleteComment=function(r){if(!(r in this.deletedComments)){this.deletedComments[r]=true;this.deletedCount++;}};q.prototype.updateCommentCount=function(r){this.count=r;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount=r;this.deletedCount=0;return this;};q.prototype.updateOverriddenDisplayCount=function(r){this.overriddenDisplayCount=r;return this;};q.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};q.prototype.getCommentCount=function(){return this.count;};q.prototype.getDeletedCount=function(){return this.deletedCount;};q.prototype.getDisplayedCommentCount=function(){if(this.overriddenDisplayCount===null){return this.count-this.deletedCount;}else return this.overriddenDisplayCount;};q.prototype.getBasePermalink=function(){return this.basePermalink;};q.prototype.buildCommentPermalink=function(r,s,t){};q.prototype.getPermalinkForComment=function(r){return this.commentPermalinks[r];};q.isValidContextPropertyForReset=function(r){return r in p;};f.exports=q;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={inverted:function(j){switch(j){case h.UFICommentOrderingMode.RECENT_ACTIVITY:case h.UFICommentOrderingMode.RANKED_THREADED:case h.UFICommentOrderingMode.FILTERED:case h.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=i;},null);
__d('UFIComments',['ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={},q={};function r(ha){return ha in q?q[ha]:ha;}function s(ha,ia){ha.forEach(function(ja){var ka=ja.ftentidentifier,la=l.UFIPayloadSourceType,ma=ja.clientid,na=false,oa=babelHelpers._extends({},ja);if(ma){delete oa.clientid;na=h.isExistingClientID(ma);if(na&&q[ma]){new j().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ja.id).log();return;}}if(ia===la.LIVE_SEND||ia===la.USER_ACTION||ia===la.ENDPOINT_ADD_COMMENT||ia===la.ENDPOINT_EDIT_COMMENT)oa.isunseen=true;if(ia===la.LIVE_SEND)oa.islive=true;if(ia===la.ENDPOINT_COMMENT_FETCH||ia===la.ENDPOINT_ID_COMMENT_FETCH)oa.fromfetch=true;if(na){if(p[ma].ufiinstanceid)m.updateStateField(p[ma].ufiinstanceid,'locallycomposed',ja.id,true);oa.ufiinstanceid=p[ma].ufiinstanceid;q[ma]=ja.id;p[ja.id]=p[ma];delete p[ma];k.didUpdateComment(ma);}ga.setComment(ja.id,new i(oa));k.didUpdateComment(ja.id);k.didUpdateFeedback(ka);});}function t(ha,ia){for(var ja=0;ja<ha.length;ja++){var ka=ha[ja];switch(ka.actiontype){case l.UFIActionType.LIKE_ACTION:if(ga.getComment(ka.entidentifier))u(ka.clientid,ka.entidentifier,ka.hasviewerliked,ka.likecount,ia);break;case l.UFIActionType.COMMENT_LIKE:u(ka.clientid,ka.commentid,ka.viewerliked,ka.likecount,ia);break;case l.UFIActionType.TOGGLE_PIN:v(ka.newcommenttoken,ka.oldcommenttoken);break;case l.UFIActionType.DELETE_COMMENT:z(ka);break;case l.UFIActionType.LIVE_DELETE_COMMENT:aa(ka);break;case l.UFIActionType.REMOVE_PREVIEW:ba(ka);break;case l.UFIActionType.COMMENT_SET_SPAM:ca(ka);break;case l.UFIActionType.CONFIRM_COMMENT_REMOVAL:da(ka);break;case l.UFIActionType.TRANSLATE_COMMENT:x(ka);break;case l.UFIActionType.COMMENT_LIKECOUNT_UPDATE:w(ka);break;}}}function u(ha,ia,ja,ka,la){var ma=ga.getComment(ia);if(ma){var na={},oa=ha&&h.isExistingClientID(ha);if(!oa){na.hasviewerliked=ja;na.likecount=ka;}if(la===l.UFIPayloadSourceType.LIVE_SEND)new j().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(oa).setCommentID(ia).log();na.likeconfirmhash=o(0,1024);fa(ia,na);}}function v(ha,ia){fa(ha,{});fa(ia,{});}function w(ha){var ia=ga.getComment(ha.commentid);if(ia&&ha.hasviewerliked===ia.hasviewerliked){var ja={likecount:ha.likecount,likeconfirmhash:o(0,1024)};fa(ha.commentid,ja);}}function x(ha){var ia=ha.commentid,ja=ga.getComment(ia);if(ja){var ka={translatedbody:ha.translatedbody,translatorapp:ha.translatorapp};fa(ia,ka);}}function y(ha){var ia={reportLink:ha.reportLink,commenterIsFOF:ha.commenterIsFOF,userIsMinor:ha.userIsMinor,giveFeedbackLink:ha.giveFeedbackLink};return ia;}function z(ha){var ia=ga.getComment(ha.commentid);ea(ia,l.UFIStatus.DELETED);}function aa(ha){var ia=ga.getComment(ha.commentid);if(ia&&ia.status!==l.UFIStatus.DELETED)ea(ia,l.UFIStatus.LIVE_DELETED);}function ba(ha){fa(ha.commentid,{attachment:null});}function ca(ha){var ia=ga.getComment(ha.commentid),ja=ha.shouldHideAsSpam?l.UFIStatus.SPAM_DISPLAY:null;ea(ia,ja);}function da(ha){fa(ha.commentid,y(ha));}function ea(ha,ia){fa(ha.id,{priorstatus:ha.status,status:ia});}function fa(ha,ia){var ja=ga.getComment(ha)||new i({});ga.setComment(ha,i.set(ja,ia));k.didUpdateComment(ja.id);k.didUpdateFeedback(ja.ftentidentifier);}var ga={getComment:function(ha){if(ha===l.unavailableCommentKey)return null;return p[r(ha)];},setComment:function(ha,ia){!(ia instanceof i)?n(0):undefined;p[r(ha)]=ia;},resetComments:function(ha){for(var ia in ha)delete p[r(ia)];}};k.subscribe('update-comments',function(ha,ia){if(ia.comments&&ia.comments.length)s(ia.comments,ia.payloadsource);});k.subscribe('update-actions',function(ha,ia){if(ia.actions&&ia.actions.length)t(ia.actions,ia.payloadsource);});f.exports=ga;},6);
__d('UFIReplyCommentList',['ActorURI','getObjectValues','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t;'use strict';var u={},v=j.create('ufi_reply_comment_list');s=babelHelpers.inherits(w,m);t=s&&s.prototype;w.getCommentList=function(y,z,aa){if(!u[z])u[z]={};if(!u[z][aa]){var ba=new w(y,z,aa),ca=w.getReplyListsForParentCommentID(z);if(ca.length)ba.updateCommentCount(ca[0].getCommentCount());u[z][aa]=ba;}return u[z][aa];};w.getReplyListsForParentCommentID=function(y){return i(u[y]);};w.resetWithContext=function(y,z,aa,ba){var ca=u[z][ba];if(!ca)return;ca.reset();for(var da in aa)if(this.isValidContextPropertyForReset(da))ca[da]=aa[da];};function w(y,z,aa){t.constructor.call(this,y);this.parentCommentID=z;this.containerOrderingMode=aa;}w.prototype.fetchComments=function(y,z,aa){if(p.logCommentLoad)n.logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:z,is_reply:true});var ba={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[y],lengths:[z],feed_context:aa?aa.feedContext:null,numpagerclicks:aa?aa.numPagerClicks:null,containerorderingmode:this.containerOrderingMode};if(!aa||!aa.viewAs)ba[h.PARAMETER_ACTOR]=this.actorID;k.trySend('/ajax/ufi/reply_fetch.php',ba);};w.prototype.deferredCallback=function(y,z,aa,ba){var ca={};for(var da=0;da<z;da++){var ea=o.getComment(ba[y+da]);if(ea)ca[y+da]=ea;}aa(ca);};w.prototype.reset=function(){var y=t.reset.call(this),z={};for(var aa in y){var ba=y[aa];z[ba]=true;}o.resetComments(z);};w.prototype.getParentCommentID=function(){return this.parentCommentID;};w.prototype.buildCommentPermalink=function(y,z,aa){if(!this.basePermalink)return null;var ba=this.getParentCommentID().split("_"),ca=z;if(ba.length===2){ca=ba[1];}else v.error("Bad reply comment ID: "+this.getParentCommentID());return (new r(this.basePermalink).addQueryData({comment_id:ca,reply_comment_id:z}).toString());};k.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:k.IMMEDIATE}});function x(y){var z=o.getComment(y.commentid),aa=z.id,ba=z.parentcommentid;if(!ba)return;if(z.status!==q.UFIStatus.DELETED&&z.status!==q.UFIStatus.FAILED_ADD)w.getReplyListsForParentCommentID(ba).forEach(function(ca){ca.deleteComment(aa);});}l.subscribe('update-actions',function(y,z){if(z.actions&&z.actions.length)for(var aa=0;aa<z.actions.length;aa++){var ba=z.actions[aa];switch(ba.actiontype){case q.UFIActionType.DELETE_COMMENT:x(ba);break;}}});l.subscribe('update-comment-lists',function(y,z){var aa=z.commentlists;if(aa&&aa.replies&&Object.keys(aa).length)for(var ba in aa.replies){var ca=aa.replies[ba],da=ca.ftentidentifier,ea=ca.containerorderingmode;w.getCommentList(da,ba,ea).addCommentIDs(ca.range.offset,ca.range.length,ca.values).updateCommentCount(ca.count);}});l.subscribe('update-comments',function(y,z){if(z.comments&&z.comments.length)z.comments.forEach(function(aa){var ba=aa.parentcommentid;if(!ba)return;w.getReplyListsForParentCommentID(ba).forEach(function(ca){ca.addOrUpdateComment(aa);});});});f.exports=w;},6);
__d('UFIToplevelCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t;'use strict';var u={};s=babelHelpers.inherits(v,k);t=s&&s.prototype;v.getCommentList=function(x,y){if(!u[x])u[x]={};if(!u[x][y]){var z=new v(x,y),aa=v.getCommentListsForFeedbackTargetID(x);if(aa.length)z.updateCommentCount(aa[0].getCommentCount());u[x][y]=z;}return u[x][y];};v.getCommentListsForFeedbackTargetID=function(x){var y=[],z=u[x]||{};for(var aa in z)y.push(z[aa]);return y;};v.getCommentListForFeedbackTargetID_UNSAFE=function(x){var y=v.getCommentListsForFeedbackTargetID(x);return y.length?y[0]:null;};v.resetCommentListsForFeedbackTargetID=function(x){if(!u[x])return;var y={};for(var z in u[x]){var aa=u[x][z],ba=aa.reset();for(var ca in ba){var da=ba[ca];y[da]=true;}}n.resetComments(y);};v.resetCommentListsWithContext=function(x,y){if(!u[x])return;var z={};for(var aa in u[x]){var ba=u[x][aa];for(var ca in y)if(this.isValidContextPropertyForReset(ca))ba[ca]=y[ca];var da=ba.reset();for(var ea in da){var fa=da[ea];z[fa]=true;q.resetWithContext(x,fa,y,aa);}}n.resetComments(z);};function v(x,y){t.constructor.call(this,x);this.orderReversed=false;if(m.inverted(y))this.orderReversed=true;this.orderingMode=y;this.clientHasAll=false;}v.prototype.fetchComments=function(x,y,z){if(o.logCommentLoad)l.logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:y,is_reply:false});var aa={ft_ent_identifier:this.feedbackTargetID,viewas:z&&z.viewAs?z.viewAs+'':null,source:z&&z.feedbackSource,offset:x,length:y,orderingmode:this.orderingMode,feed_context:z?z.feedContext:null,numpagerclicks:z?z.numPagerClicks:null};switch(this.orderingMode){case p.UFICommentOrderingMode.RECENT_ACTIVITY:case p.UFICommentOrderingMode.RANKED_THREADED:case p.UFICommentOrderingMode.FILTERED:aa.clientcommentcount=this.count;}if(!z||!z.viewAs)aa[h.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/comment_fetch.php',aa);};v.prototype.deferredCallback=function(x,y,z,aa){var ba={},ca=x,da=x+y-1;for(var ea=0;ea<y;ea++){var fa=this.orderReversed?da-ea:ca+ea,ga=n.getComment(aa[fa]);if(ga)ba[x+ea]=ga;}z(ba);};v.prototype.getOrderingMode=function(){return this.orderingMode;};v.prototype.setClientHasAll=function(x){this.clientHasAll=x;return this;};v.prototype.getClientHasAll=function(){return this.clientHasAll;};v.prototype.buildCommentPermalink=function(x,y,z){if(!this.basePermalink)return null;return (new r(this.basePermalink).addQueryData({comment_id:y}).toString());};i.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:i.IMMEDIATE}});function w(x){var y=n.getComment(x.commentid),z=y.id,aa=y.ftentidentifier,ba=y.parentcommentid;if(ba)return;if(x.islocal||y.status!==p.UFIStatus.DELETED&&y.status!==p.UFIStatus.FAILED_ADD)v.getCommentListsForFeedbackTargetID(aa).forEach(function(ca){ca.deleteComment(z);});}j.subscribe('update-actions',function(x,y){if(y.actions&&y.actions.length)for(var z=0;z<y.actions.length;z++){var aa=y.actions[z];switch(aa.actiontype){case p.UFIActionType.DELETE_COMMENT:w(aa);break;}}});j.subscribe('update-comment-lists',function(x,y){var z=y.commentlists;if(z&&z.comments&&Object.keys(z).length)for(var aa in z.comments)for(var ba in z.comments[aa]){var ca=z.comments[aa][ba],da=v.getCommentList(aa,ba).addCommentIDs(ca.range.offset,ca.range.length,ca.values);da.setClientHasAll(!!ca.forcenotpageable);}});j.subscribe('update-comments',function(x,y){if(y.comments&&y.comments.length)y.comments.forEach(function(z){if(z.parentcommentid)return;var aa=z.ftentidentifier;v.getCommentListsForFeedbackTargetID(aa).forEach(function(ba){ba.addOrUpdateComment(z);});});});j.subscribe('update-feedback',function(x,y){if(y.feedbacktargets&&y.feedbacktargets.length)y.feedbacktargets.forEach(function(z){var aa=z.entidentifier,ba=z.defaultcommentorderingmode,ca={};if(ba)ca[ba]=true;if(z.orderingmodes)z.orderingmodes.forEach(function(ea){ca[ea.value]=true;});for(var da in ca)v.getCommentList(aa,da).updateCommentCount(z.commentcount);});});f.exports=v;},6);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIReactionsBlingSocialSentence.react','UFIToplevelCommentList','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,i.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);}r.prototype.render=function(){var s=this.props.contextArgs,t=this.props.feedbackTarget,u=j.getTrackingInfo(j.types.BLINGBOX),v=new o(t.permalink).addQueryData({comment_tracking:u}).toString(),w=n.getCommentList(s.ftentidentifier,t.defaultcommentorderingmode).getDisplayedCommentCount(),x=s.feedbackMode==='none'&&s.hasReactions&&t.displayreactions,y=(function(event){event.preventDefault();if(x&&s.feedbackMode==='expanded'){this.$UFIBling1(false);}else{h.onBlingboxClick(event.currentTarget);this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}).bind(this);if(x){return (i.createElement(m,{commentCount:w,contextArgs:s,'data-comment-prelude-ref':'action_link_bling','data-ft':u,feedback:t,href:v,onCommentClick:y}));}else{var z,aa,ba;if(s.hasReactions){z=t.reactioncount;aa=t.reactioncountmap;ba=t.reactioncountreduced;}return (i.createElement(k,{comments:w,commentsreduced:t.commentcountreduced,contextArgs:s,'data-comment-prelude-ref':'action_link_bling','data-ft':u,likes:t.likecount,likesreduced:t.likecountreduced,nfb:t.nfbcount,onClick:y,permalink:v,reactionCount:z,reactionCountMap:aa,reactionCountReduced:ba,reshares:t.sharecount,resharesreduced:t.sharecountreduced}));}};r.prototype.$UFIBling1=function(s){l.updateStateFields(this.props.contextArgs.instanceid,'inlineShare',{active:s,toggling:true});};f.exports=r;},null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFIInstanceState'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFICommentActionLink',propTypes:{contextArgs:k.object.isRequired},render:function(){var m=this.props.contextArgs,n=m.commentajaxify,o=m.commentredirecturi,p=m.instanceid,q=m.ufiexperiments;if(n){return (h.createElement(i,{ufiExperiments:q,ajaxify:n,rel:'dialog'}));}else if(o)return (h.createElement(i,{ufiExperiments:q,href:o}));return (h.createElement(i,{ufiExperiments:q,onClick:function(event){event.preventDefault();j.updateStateFields(p,'inlineShare',{active:false,toggling:true});j.updateStateFields(p,'addCommentInput',{expanded:true});}}));}});f.exports=l;},null);
__d('ReactionsWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:ReactionsWaterfallLoggerConfig',this.$ReactionsWaterfallTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:ReactionsWaterfallLoggerConfig',this.$ReactionsWaterfallTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$ReactionsWaterfallTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$ReactionsWaterfallTypedLogger1=babelHelpers._extends({},this.$ReactionsWaterfallTypedLogger1,m);return this;};k.prototype.setClickDuration=function(m){this.$ReactionsWaterfallTypedLogger1.click_duration=m;return this;};k.prototype.setFinalState=function(m){this.$ReactionsWaterfallTypedLogger1.final_state=m;return this;};k.prototype.setHasReactions=function(m){this.$ReactionsWaterfallTypedLogger1.has_reactions=m;return this;};k.prototype.setHoverDuration=function(m){this.$ReactionsWaterfallTypedLogger1.hover_duration=m;return this;};k.prototype.setInitialState=function(m){this.$ReactionsWaterfallTypedLogger1.initial_state=m;return this;};k.prototype.setVC=function(m){this.$ReactionsWaterfallTypedLogger1.vc=m;return this;};var l={click_duration:true,final_state:true,has_reactions:true,hover_duration:true,initial_state:true,vc:true};f.exports=k;},null);
__d('UFIReactionsUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getReactionData:function(i,j,k){j=parseInt(j,10);var l=!!j,m=i.reactorids?i.reactorids.slice(0):[],n=m.indexOf(k),o=0;if(l){if(n<0){m.unshift(k);o=1;}}else if(n>-1){m.splice(n,1);o=-1;}var p=Math.max(i.reactioncount+o,0),q=i.reactioncountreduced;if(q&&!isNaN(q))q=p.toString();var r=i.reactioncountmap||{},s,t=i.viewerreaction;if(t&&r[t]){r[t]['default']=Math.max((r[t]['default']||0)-1,0);s=r[t].reduced;if(s&&!isNaN(s))r[t].reduced=r[t]['default'].toString();}if(l&&r[j]){r[j]['default']=(r[j]['default']||0)+1;s=r[j].reduced;if(s&&!isNaN(s))r[j].reduced=r[j]['default'].toString();}var u=i.userreactions;if(!u||Array.isArray(u))u={};if(l){u[k]=j;}else delete u[k];var v=i.importantreactorids||[],w=v.indexOf(k);if(l&&w===-1){v.unshift(k);}else if(!l&&w!==-1)v.splice(w,1);var x=null;if(i.reactionsentences){var y=!(t&&j);x={current:i.reactionsentences[y?'alternate':'current'],alternate:i.reactionsentences[y?'current':'alternate']};}return {importantreactorids:v,reactioncount:p,reactioncountmap:r,reactioncountreduced:q,reactionsentences:x,reactorids:m,userreactions:u,viewerreaction:j};}};f.exports=h;},null);
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0}});},null);
__d("XUFITogglePinCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/comment\/pin\/",{});},null);
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIUserActions',['ActorURI','AsyncRequest','AsyncResponse','requireWeak','ChannelClientID','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionsUtils','MercuryServerDispatcher','XUFITogglePinCommentAsyncController','XUFITypingIndicatorController','XUFIAddCommentController','XUFIDeleteCommentController','XUFICommentLikeController','XUFIHideCommentController','XUFILikeController','XUFIEditCommentController','XUFITranslateCommentController','XUFIActorChangeController','XUFIReactionController','collectDataAttributes','errorCode','fbt','UnicodeBidi'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){if(c.__markCompiled)c.__markCompiled();var na;k('CLoggerX',function(ob){na=ob;});var oa={BAN:'ban',UNDO_BAN:'undo_ban'},pa={changeActor:function(ob,pb){v.getFeedbackTarget(ob,function(qb){q.resetCommentListsWithContext(ob,{actorID:pb});p.inform('actor-changed',{actorID:pb});var rb={from_actor_id:qb.actorforpost,ft_ent_identifier:ob};rb[h.PARAMETER_ACTOR]=pb;var sb=ha.getURIBuilder().getURI();x.trySend(sb,rb);});},changeCommentLike:function(ob,pb,qb){var rb=r.getComment(ob);if(rb.hasviewerliked!=pb){var sb=qa(qb.target),tb=pb?1:-1,ub={commentid:ob,actiontype:u.UFIActionType.COMMENT_LIKE,viewerliked:pb,likecount:(rb.likecount||0)+tb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[ub]});v.getFeedbackTarget(rb.ftentidentifier,function(vb){var wb={};wb[h.PARAMETER_ACTOR]=vb.actorforpost;var xb=ca.getURIBuilder().getURI();x.trySend(xb,babelHelpers._extends({comment_id:ob,legacy_id:rb.legacyid,like_action:pb,ft_ent_identifier:rb.ftentidentifier,source:qb.source,client_id:m.getNewClientID(),session_id:l.getID()},sb,wb));});}},changeCommentPin:function(ob,pb){var qb=r.getComment(ob);v.getFeedbackTarget(qb.ftentidentifier,function(rb){var sb=ob,tb=rb.pinnedcommenttoken,ub=sb===tb?'UNPIN':'PIN',vb={newcommenttoken:sb,oldcommenttoken:tb,newpinstate:ub,actiontype:u.UFIActionType.TOGGLE_PIN,entidentifier:rb.entidentifier};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[vb]});var wb=y.getURIBuilder().getURI();x.trySend(wb,{comment_token:ob,pin_action:ub});});},addComment:function(ob,pb,qb,rb){v.getFeedbackTarget(ob,function(sb){var tb=qa(rb.target),ub=m.getNewClientID();if(!sb.actorforpost)return;var vb=ma.isDirectionLTR(pb)?'ltr':'rtl',wb={ftentidentifier:ob,body:{text:pb,dir:vb},author:sb.actorforpost,id:ub,islocal:true,ufiinstanceid:rb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:rb.replyid,replycommentparentid:rb.replycommentparentid,attachment:rb.attachedsticker,photo_comment:rb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:la._("\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434")}},xb={actiontype:u.UFIActionType.SUBSCRIBE_ACTION,actorid:sb.actorforpost,hasviewersubscribed:true,entidentifier:ob},yb={actiontype:u.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:sb.targetfbid};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[wb],actions:[xb,yb]});var zb=null;if(rb.replyid)zb=r.getComment(rb.replyid).fbid;var ac;if(na)ac=na.getCLParamsForTarget(rb.target,zb);if(t.logCommentPost)s.logNewCommentPost(ub,rb.timestamp,{has_photo:!!rb.attachedphoto,has_sticker:!!rb.attachedsticker,is_reply:!!rb.replyid});var bc={};bc[h.PARAMETER_ACTOR]=sb.actorforpost;var cc=aa.getURIBuilder().getURI();x.trySend(cc,babelHelpers._extends({ft_ent_identifier:sb.entidentifier,comment_text:qb,source:rb.source,client_id:ub,session_id:l.getID(),reply_fbid:zb,parent_comment_id:rb.replyid,reply_comment_parent_id:rb.replycommentparentid,rootid:rb.rootid,clp:ac,attached_sticker_fbid:rb.attachedsticker?rb.attachedsticker.fbid:0,attached_photo_fbid:rb.attachedphoto?rb.attachedphoto.fbid:0,feed_context:rb.feedcontext},tb,bc));});},_hasCommentTextChanged:function(ob,pb){return ob.body&&ob.body.text!=pb;},_hasCommentPhotoChanged:function(ob,pb){return (ob||pb)&&!(ob&&pb)||ob&&pb&&ob.fbid!=pb.fbid;},_hasCommentStickerChanged:function(ob,pb){return (ob||pb)&&!(ob&&pb)||ob&&ob.type=="sticker"&&pb&&ob.fbid!=pb.fbid;},editComment:function(ob,pb,qb,rb){var sb=qa(rb.target),tb=r.getComment(ob),ub=this._hasCommentTextChanged(tb,pb)||this._hasCommentPhotoChanged(tb.photo_comment,rb.attachedPhoto)||this._hasCommentStickerChanged(tb.attachment,rb.attachedSticker);tb=n.set(tb,{status:u.UFIStatus.PENDING_EDIT,body:{text:pb},editnux:null,attachment:rb.attachedSticker,photo_comment:rb.attachedPhoto});if(ub)tb=n.set(tb,{originalTimestamp:tb.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:la._("\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434")}});p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[tb]});v.getFeedbackTarget(tb.ftentidentifier,function(vb){var wb={};wb[h.PARAMETER_ACTOR]=vb.actorforpost;var xb=fa.getURIBuilder().getURI();x.trySend(xb,babelHelpers._extends({ft_ent_identifier:tb.ftentidentifier,comment_text:qb,source:rb.source,comment_id:tb.id,parent_comment_id:tb.parentcommentid,attached_sticker_fbid:rb.attachedSticker?rb.attachedSticker.fbid:0,attached_photo_fbid:rb.attachedPhoto?rb.attachedPhoto.fbid:0},sb,wb));});},translateComment:function(ob,pb){var qb=ga.getURIBuilder().getURI();x.trySend(qb,{ft_ent_identifier:ob.ftentidentifier,comment_ids:[ob.id],source:pb.source});},setHideAsSpam:function(ob,pb,qb){var rb=qa(qb.target),sb=r.getComment(ob),tb={commentid:ob,actiontype:u.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:pb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});v.getFeedbackTarget(sb.ftentidentifier,function(ub){var vb={};vb[h.PARAMETER_ACTOR]=ub.actorforpost;var wb=da.getURIBuilder().getURI();x.trySend(wb,babelHelpers._extends({comment_id:ob,spam_action:pb,ft_ent_identifier:sb.ftentidentifier,source:qb.source},rb,vb));});},removeComment:function(ob,pb){var qb=qa(pb.target),rb=r.getComment(ob),sb={actiontype:u.UFIActionType.DELETE_COMMENT,commentid:ob,islocal:true,oneclick:pb.oneclick};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[sb]});v.getFeedbackTarget(rb.ftentidentifier,function(tb){var ub={};ub[h.PARAMETER_ACTOR]=tb.actorforpost;var vb=ba.getURIBuilder().getURI();x.trySend(vb,babelHelpers._extends({comment_id:rb.id,comment_legacyid:rb.legacyid,ft_ent_identifier:rb.ftentidentifier,one_click:pb.oneclick,source:pb.source,client_id:m.getNewClientID()},qb,ub));});},banUser:function(ob,pb,qb,rb){var sb=qb?oa.BAN:oa.UNDO_BAN;x.trySend('/ajax/ufi/ban_user.php',{page_id:pb,commenter_id:ob.author,action:sb,comment_id:ob.id,client_side:true});},changeReaction:function(ob,pb,qb){v.getFeedbackTarget(ob,function(rb){var sb=[nb(rb,pb)],tb=parseInt(pb,10)!==0;if(rb.hasviewerliked!==tb){var ub=tb?1:-1;sb.push({actiontype:u.UFIActionType.LIKE_ACTION,actorid:rb.actorforpost,hasviewerliked:tb,likecount:(rb.likecount||0)+ub,entidentifier:ob,likesentences:{current:rb.likesentences.alternate,alternate:rb.likesentences.current}});}p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:sb});var vb=qa(qb.target),wb={};wb[h.PARAMETER_ACTOR]=rb.actorforpost;x.trySend(ia.getURIBuilder().getURI(),babelHelpers._extends({client_id:m.getNewClientID(),ft_ent_identifier:ob,reaction_type:pb,root_id:qb.rootid,session_id:l.getID(),source:qb.source},wb,vb));});},changeSubscribe:function(ob,pb,qb){v.getFeedbackTarget(ob,function(rb){var sb=qa(qb.target);if(rb.hasviewersubscribed!==pb){var tb={actiontype:u.UFIActionType.SUBSCRIBE_ACTION,actorid:rb.actorforpost,hasviewersubscribed:pb,entidentifier:ob};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});var ub={};ub[h.PARAMETER_ACTOR]=rb.actorforpost;x.trySend('/ajax/ufi/subscribe.php',babelHelpers._extends({subscribe_action:pb,ft_ent_identifier:ob,source:qb.source,client_id:m.getNewClientID(),rootid:qb.rootid,comment_expand_mode:qb.commentexpandmode},sb,ub));}});},fetchSpamComments:function(ob,pb,qb,rb){x.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ob,viewas:rb,comment_ids:pb,parent_comment_id:qb,source:null});},removePreview:function(ob,pb){var qb=qa(pb.target),rb={commentid:ob.id,actiontype:u.UFIActionType.REMOVE_PREVIEW};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[rb]});x.trySend('/ajax/ufi/remove_preview.php',babelHelpers._extends({comment_id:ob.id,ft_ent_identifier:ob.ftentidentifier,source:pb.source},qb));},typingChange:function(ob,pb){new i(z.getURIBuilder().setString('feedback_id',ob).setEnum('update',pb?'start':'stop').getURI()).send();}};function qa(ob){if(!ob)return {ft:{}};var pb={ft:ja(ob,['ft']).ft};o.addModuleData(pb,ob);return pb;}function ra(ob){j.defaultErrorHandler(ob);}function sa(ob){var pb=ob.request.data;j.defaultErrorHandler(ob);var qb=pb.client_id||pb.comment_id,rb=r.getComment(qb),sb=rb.status===u.UFIStatus.PENDING_EDIT?u.UFIStatus.FAILED_EDIT:u.UFIStatus.FAILED_ADD;rb=n.setDeep(rb,{status:sb,allowRetry:ta(ob),body:{mentionstext:pb.comment_text,mentionsphoto:rb.photo_comment}});p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[rb]});}function ta(ob){var pb=ob.getError();if(ob.isBlockedAction())return false;if(ob.silentError)return true;if(pb===1357012||pb===1357006)return false;return true;}function ua(ob){var pb=ob.request.data,qb=pb.comment_id,rb=r.getComment(qb);rb=n.set(rb,{status:rb.priorstatus||null,priorstatus:undefined});p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{comments:[rb]});}function va(ob){var pb=ob.request.data,qb=pb.comment_id,rb=r.getComment(qb);if(pb.like_action===rb.hasviewerliked){var sb=rb.hasviewerliked?-1:1,tb={commentid:qb,actiontype:u.UFIActionType.COMMENT_LIKE,viewerliked:!rb.hasviewerliked,likecount:(rb.likecount||0)+sb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});}j.defaultErrorHandler(ob);}function wa(ob){var pb=ob.request.data,qb=pb.ft_ent_identifier;v.getFeedbackTarget(qb,function(rb){if(rb.hasviewerliked===pb.like_action){var sb=rb.hasviewerliked?-1:1,tb={actiontype:u.UFIActionType.LIKE_ACTION,actorid:rb.actorforpost,hasviewerliked:!rb.hasviewerliked,likecount:(rb.likecount||0)+sb,entidentifier:qb,likesentences:{current:rb.likesentences.alternate,alternate:rb.likesentences.current}};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[tb]});}});j.defaultErrorHandler(ob);}function xa(ob){var pb=ob.request.data,qb=pb.ft_ent_identifier;v.getFeedbackTarget(qb,function(rb){if(rb.hasviewersubscribed===pb.subscribe_action){var sb={actiontype:u.UFIActionType.SUBSCRIBE_ACTION,actorid:rb.actorforpost,hasviewersubscribed:!rb.hasviewersubscribed,entidentifier:qb};p.handleUpdate(u.UFIPayloadSourceType.USER_ACTION,{actions:[sb]});}});j.defaultErrorHandler(ob);}var ya={'/ajax/ufi/ban_user.php':{mode:x.IMMEDIATE,error_handler:ra},'/ajax/ufi/subscribe.php':{mode:x.BATCH_CONDITIONAL,error_handler:xa,batch_if:lb,batch_function:mb},'/ajax/ufi/id_comment_fetch.php':{mode:x.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:x.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:x.IMMEDIATE}},za=aa.getURIBuilder().getURI();ya[za]={mode:x.IMMEDIATE,error_handler:sa};var ab=ba.getURIBuilder().getURI();ya[ab]={mode:x.IMMEDIATE,error_handler:ua};var bb=ca.getURIBuilder().getURI();ya[bb]={mode:x.BATCH_CONDITIONAL,error_handler:va,batch_if:jb,batch_function:mb};var cb=da.getURIBuilder().getURI();ya[cb]={mode:x.IMMEDIATE,error_handler:ua};var db=ea.getURIBuilder().getURI();ya[db]={mode:x.BATCH_CONDITIONAL,error_handler:wa,batch_if:kb,batch_function:mb};var eb=fa.getURIBuilder().getURI();ya[eb]={mode:x.IMMEDIATE,error_handler:sa};var fb=ga.getURIBuilder().getURI();ya[fb]={mode:x.IMMEDIATE};var gb=ha.getURIBuilder().getURI();ya[gb]={mode:x.IMMEDIATE};var hb=ia.getURIBuilder().getURI();ya[hb]={mode:x.IMMEDIATE};var ib=y.getURIBuilder().getURI();ya[ib]={mode:x.IMMEDIATE};x.registerEndpoints(ya);function jb(ob,pb){return ob&&ob.ft_ent_identifier==pb.ft_ent_identifier&&ob.comment_id==pb.comment_id;}function kb(ob,pb){return ob&&ob.ft_ent_identifier==pb.ft_ent_identifier;}function lb(ob,pb){return ob&&ob.ft_ent_identifier==pb.ft_ent_identifier;}function mb(ob,pb){return pb;}function nb(ob,pb){return Object.assign({actiontype:u.UFIActionType.REACTION,actorid:ob.actorforpost,entidentifier:ob.entidentifier},w.getReactionData(ob,pb,ob.actorforpost));}f.exports=pa;},null);
__d('addFocusEvents',['Deferred','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.Component,k=(function(l){return (function(){var m,n;m=babelHelpers.inherits(o,j);n=m&&m.prototype;o.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};o.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();this.deferred=new h();this.deferred.done((function(p){p&&p(event);this.deferred=null;}).bind(this),(function(){this.deferred=null;}).bind(this));};o.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};o.prototype.render=function(){'use strict';var p=this.props,q=p.onKeyboardFocus,r=p.onMouseFocus,s=babelHelpers.objectWithoutProperties(p,['onKeyboardFocus','onMouseFocus']);return (i.createElement(l,babelHelpers._extends({},s,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)})));};function o(){'use strict';m.apply(this,arguments);}return o;})();}).bind(this);f.exports=k;},null);
__d('UFIReactionsLinkImpl.react',['Arbiter','BanzaiLogger','BootloadedComponent.react','Bootloader','Deferred','Event','JSResource','React','ReactDOM','ReactionsWaterfallTypedLogger','SubscriptionsHandler','UFIConfig','UFIConstants','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFIUserActions','UFIUIEvents','addFocusEvents','cx','getActiveElement','shallowCompare'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da,ea,fa=o.PropTypes,ga=false,ha=null,ia=o.createElement('div',null),ja=w.reactions,ka=Object.keys(ja),la=10,ma=s.reactionsHoverDelay||500,na=s.reactionsHideDelay||250,oa=s.reactionsDisplayHoverProgress||false,pa=5,qa=500,ra=('ontouchstart' in window),sa=new l(),ta=function(){if(!ha)k.loadModules(["UFIReactionsMenuImpl.react"],function(xa){ha=xa;if(sa){sa.done(ua,ua);sa.resolve();}});},ua=function(){sa=null;},va=z('a');da=babelHelpers.inherits(wa,o.Component);ea=da&&da.prototype;function wa(xa,ya){'use strict';ea.constructor.call(this,xa,ya);this.hideDialog=this.hideDialog.bind(this);this.onBlur=this.onBlur.bind(this);this.onClick=this.onClick.bind(this);this.onClickCapture=this.onClickCapture.bind(this);this.onContextMenu=this.onContextMenu.bind(this);this.onDragStart=this.onDragStart.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseEnter=this.onMouseEnter.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onReactionChange=this.onReactionChange.bind(this);this.onReactionMouseEnter=this.onReactionMouseEnter.bind(this);this.onReactionMouseLeave=this.onReactionMouseLeave.bind(this);this.showDialog=this.showDialog.bind(this);this.dragStartX=null;this.dragStartY=null;this.subscriptionsHandler=new r();if(ra){this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchStart=this.onTouchStart.bind(this);}if(sa)sa.done((function(){this.forceUpdate();}).bind(this));this.state={dialogShown:false,isLongPressing:false,isMouseOver:false,isScrubbing:false,isTouchDown:false,NUXShown:false};}wa.prototype.shouldComponentUpdate=function(xa,ya){'use strict';return ca(this,xa,ya);};wa.prototype.componentWillUpdate=function(xa,ya){'use strict';if(this.state.dialogShown&&!ya.dialogShown){this.$UFIReactionsLink1(this.props.reaction);if(!this.reactionSelected)this.$UFIReactionsLink2(this.props.reaction);}};wa.prototype.componentDidUpdate=function(xa,ya){'use strict';if(!ya.dialogShown&&this.state.dialogShown){this.subscriptionsHandler.addSubscriptions(m.listen(document.documentElement,'click',this.onBlur),m.listen(document.documentElement,'focusin',this.onBlur));if(ra){var za;this.subscriptionsHandler.addSubscriptions(m.listen(document.documentElement,'touchstart',function(event){za=event.touches[0];}),m.listen(document.documentElement,'touchmove',function(event){za=event.touches[0];}),m.listen(document.documentElement,'touchend',(function(event){if(!this.refs.root.contains(document.elementFromPoint(za.clientX,za.clientY)))this.setState({dialogShown:false,isLongPressing:false,isScrubbing:false});}).bind(this)));}}else if(ya.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new r();}};wa.prototype.componentDidMount=function(){'use strict';this.$UFIReactionsLink3();};wa.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();};wa.prototype.maybeShowNUX=function(){'use strict';if(this.props.hasNUX&&!ga){ga=true;this.setState({NUXShown:true,dialogShown:false});i.log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.id,'interface':'www'});}};wa.prototype.hideDialog=function(){'use strict';this.setState({dialogShown:false,isScrubbing:false});};wa.prototype.showDialog=function(){'use strict';if(this.dialogShownTime===0)this.dialogShownTime=Date.now();ga=true;this.setState({dialogShown:true,NUXShown:false});};wa.prototype.onBlur=function(event){'use strict';var xa=event.target instanceof Node&&p.findDOMNode(this.refs.root).contains(event.target);if(!xa)this.setState({dialogShown:xa});};wa.prototype.onClick=function(event){'use strict';var xa=this.props.reaction;if(!xa||xa===t.LikeReaction||!ja[xa]){this.maybeShowNUX();this.props.onActionLikeClick(event);this.$UFIReactionsLink1(xa?0:t.LikeReaction,true);}else this.onReactionChange(0,event);this.setState({dialogShown:false,isMouseOver:false,isScrubbing:false});};wa.prototype.onClickCapture=function(event){'use strict';event.stopPropagation();this.setState({isLongPressing:false});};wa.prototype.onContextMenu=function(event){'use strict';if(this.state.isTouchDown)event.preventDefault();};wa.prototype.onDragStart=function(event){'use strict';event.preventDefault();};wa.prototype.onMouseDown=function(event){'use strict';clearTimeout(this.hoverTimeout);this.mouseDownTime=event.timeStamp;};wa.prototype.onMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);this.setState({isMouseOver:true});this.reactionSelected=false;this.initialReaction=this.props.reaction;this.mouseDownTime=0;this.mouseEnterTime=event.timeStamp;this.mouseLeaveTime=0;this.mouseUpTime=0;s.reactionsHasEarlyBootload&&ta();};wa.prototype.onMouseLeave=function(event){'use strict';clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.hideDialog,na);this.setState({isMouseOver:false});this.mouseLeaveTime=event.timeStamp;if(!this.state.dialogShown&&p.findDOMNode(this.refs.trigger).contains(event.target))this.$UFIReactionsLink2(this.props.reaction);};wa.prototype.onMouseMove=function(event){'use strict';var xa=event.clientX,ya=event.clientY;clearTimeout(this.hoverTimeout);if(typeof this.hoverX==='number'&&typeof this.hoverY==='number'&&this.hoverX<xa+pa&&this.hoverX>xa-pa&&this.hoverY<ya+pa&&this.hoverY>ya-pa)this.hoverTimeout=setTimeout(this.showDialog,ma);this.hoverX=xa;this.hoverY=ya;};wa.prototype.onMouseUp=function(event){'use strict';this.mouseUpTime=event.timeStamp;};wa.prototype.onTouchStart=function(event){'use strict';if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout((function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}).bind(this),qa);s.reactionsHasEarlyBootload&&ta();}this.setState({isTouchDown:true});};wa.prototype.onTouchEnd=function(event){'use strict';if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false});};wa.prototype.onTouchMove=function(event){'use strict';if(this.state.isScrubbing)return;var xa=event.touches[0],ya=xa.clientX,za=xa.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=ya;this.dragStartY=za;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX<ya+la||this.dragStartX>ya-la||this.dragStartY<za+la||this.dragStartY>za-la))this.setState({isScrubbing:true});};wa.prototype.onReactionChange=function(xa,event){'use strict';this.$UFIReactionsLink1(xa);this.reactionSelected=true;this.$UFIReactionsLink2(xa);x.changeReaction(this.props.id,xa,{target:event.target});h.inform(y.ReactionButtonClicked,{ft_id:this.props.id,like_action:xa>0,target:event.target});this.setState({dialogShown:false,isLongPressing:false,isScrubbing:false});};wa.prototype.onReactionMouseEnter=function(xa,event){'use strict';if(this.reactionsHoverStartTimeMap[xa]===0)this.reactionsHoverStartTimeMap[xa]=Date.now();};wa.prototype.onReactionMouseLeave=function(xa,event){'use strict';if(this.reactionsHoverStartTimeMap[xa]){this.reactionsHoverTotalTimeMap[xa]+=Date.now()-this.reactionsHoverStartTimeMap[xa];this.reactionsHoverStartTimeMap[xa]=0;}};wa.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)ta();if(!ha)return null;return (o.createElement(ha,{allowKeyboardFocus:ba()===p.findDOMNode(this.refs.trigger),initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,onMouseEnter:(function(){clearTimeout(this.hoverTimeout);}).bind(this),onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions}));};wa.prototype.renderTrigger=function(){'use strict';var xa=this.props.reaction;if(xa&&!ja[xa])xa=null;var ya;if(!xa||xa==t.LikeReaction){ya=ja[t.LikeReaction].display_name;}else ya=ja[xa].display_name;var za=!xa||xa==t.LikeReaction?null:o.createElement(v,{className:"_1ktw",reaction:xa,size:'13'}),ab=xa?u.UNLIKE_LINK:u.LIKE_LINK,bb=oa?o.createElement('span',{className:"_59vy",style:{backgroundColor:xa?ja[xa].color:null,transitionDuration:this.state.isMouseOver?ma/1000+'s':null}}):null;return (o.createElement(va,{className:"UFILikeLink"+(!za?' '+"_48-k":'')+(xa?' '+"UFILinkBright":'')+(oa?' '+"UFILikeLinkHasProgress":'')+(oa&&(this.state.isMouseOver||this.state.dialogShown)?' '+"UFILikeLinkActive":''),'data-testid':ab,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:ha?null:this.showDialog,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.state.isMouseOver?this.onMouseMove:null,onMouseUp:this.onMouseUp,onTouchEnd:ra?this.onTouchEnd:null,onTouchMove:ra?this.onTouchMove:null,onTouchStart:ra?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:xa?ja[xa].color:null},tabIndex:ha?-1:0},za,ya,bb));};wa.prototype.renderNUX=function(){'use strict';var xa=p.findDOMNode(this.refs.root);if(!this.state.NUXShown||!xa)return null;return (o.createElement(j,{bootloadPlaceholder:ia,bootloadLoader:n('UFIReactionsNUX.react'),context:xa}));};wa.prototype.render=function(){'use strict';return (o.createElement('div',{className:"uiContextualLayerParent"+(' '+"_khz")+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderMenu(),this.renderNUX()));};wa.prototype.$UFIReactionsLink3=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};ka.forEach((function(xa){this.reactionsHoverStartTimeMap[xa]=0;this.reactionsHoverTotalTimeMap[xa]=0;}).bind(this));};wa.prototype.$UFIReactionsLink1=function(xa,ya){'use strict';if(this.dialogShownTime!==0){var za={feedback_id:this.props.id,final_reaction:xa,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:ya,time_spent:Date.now()-this.dialogShownTime};for(var ab in this.reactionsHoverTotalTimeMap){var bb='time_spent_'+ja[ab].name.toLowerCase();za[bb]=this.reactionsHoverTotalTimeMap[ab];}i.log('UserReactionsLoggerConfig',za);this.$UFIReactionsLink3();}};wa.prototype.$UFIReactionsLink2=function(xa){'use strict';var ya=this.mouseUpTime>0&&this.mouseDownTime>0?this.mouseUpTime-this.mouseDownTime:0,za=this.mouseLeaveTime-this.mouseEnterTime;if(za>0)new q().setClickDuration(ya).setFinalState(xa).setHoverDuration(za).setInitialState(this.initialReaction).setHasReactions(true).log();};wa.propTypes={hasNUX:fa.bool.isRequired,id:fa.string.isRequired,onActionLikeClick:fa.func.isRequired,reaction:fa.number.isRequired,supportedReactions:fa.arrayOf(fa.number).isRequired};f.exports=wa;},null);
__d('UFILikeActionLink.react',['Arbiter','React','ReactionsWaterfallTypedLogger','UFIConfig','UFIConstants','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIUIEvents','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=i.PropTypes,r=i.createClass({displayName:'UFILikeActionLink',propTypes:{feedback:q.object.isRequired,contextArgs:q.object.isRequired},_initialHasViewerLiked:0,_mouseDownTime:0,_mouseEnterTime:0,_mouseUpTime:0,onClick:function(event,s){var t=s?o.ActionLinkLike:o.ActionLinkUnlike;h.inform(t,{ft_id:this.props.contextArgs.ftentidentifier,like_action:s,target:event.target});p.changeReaction(this.props.contextArgs.ftentidentifier,s?l.LikeReaction:0,{source:this.props.contextArgs.source,target:event.target,rootid:this.props.contextArgs.rootid});event.preventDefault();h.inform('inlineShare/reflow');},render:function(){var s=this.props.feedback,t=!s.hasviewerliked;if(this.props.contextArgs.hasReactions&&s.canviewerreact&&n){return (i.createElement(n,{id:this.props.contextArgs.ftentidentifier,hasNUX:k.hasReactionsNUX&&!s.hasviewerliked,onActionLikeClick:(function(event){return this.onClick(event,t);}).bind(this),reaction:s.viewerreaction,supportedReactions:s.supportedreactions}));}else{var u=(function(event){this._initialHasViewerLiked=Number(s.hasviewerliked);this._mouseDownTime=0;this._mouseEnterTime=event.timeStamp;this._mouseUpTime=0;}).bind(this),v=(function(event){var y=this._mouseUpTime>0&&this._mouseDownTime>0?this._mouseUpTime-this._mouseDownTime:0,z=Number(s.hasviewerliked);new j().setClickDuration(y).setFinalState(z).setHoverDuration(event.timeStamp-this._mouseEnterTime).setInitialState(this._initialHasViewerLiked).setHasReactions(false).log();}).bind(this),w=(function(event){this._mouseDownTime=event.timeStamp;}).bind(this),x=(function(event){this._mouseUpTime=event.timeStamp;}).bind(this);return (i.createElement(m,{likeAction:t,onClick:(function(event){return this.onClick(event,t);}).bind(this),onMouseDown:w,onMouseEnter:u,onMouseLeave:v,onMouseUp:x,ufiExperiments:this.props.contextArgs.ufiexperiments}));}}});f.exports=r;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null);
__d('UFIPrivateReplyLink.react',['ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=j.Status,p=j.Type,q=k.PropTypes,r=k.createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},statics:{willRender:function(s,t){if(!s)return false;if(s.hasReplyPermission&&this.props.actorID===s.pageID)return true;if(s.status===o.ALREADY_REPLIED)return true;return false;}},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===o.REPLYABLE){return this._renderMessageLink();}else if(s.status===o.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===o.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=h.create(m.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (k.createElement(i,{href:s,rel:'dialog'},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case o.EXPIRED:s=n._({"comments":"\u041d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0441\u0442\u0430\u0440\u0448\u0435 6 \u043c\u0435\u0441\u044f\u0446\u0435\u0432.","reviews":"\u041d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0442\u0437\u044b\u0432\u044b \u0441\u0442\u0430\u0440\u0448\u0435 6 \u043c\u0435\u0441\u044f\u0446\u0435\u0432.","posts":"\u041d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0441\u0442\u0430\u0440\u0448\u0435 6 \u043c\u0435\u0441\u044f\u0446\u0435\u0432."},[n['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case o.NOT_USER_CREATED:s=n._("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u0440\u0443\u0433\u0438\u043c \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c.");break;}return (k.createElement('span',null,k.createElement(l,{shade:'light','aria-label':s,'data-hover':s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (k.createElement(i,{href:this.props.context.permalink||'#'},n._("\u0421\u043c. \u043e\u0442\u0432\u0435\u0442")));},_renderIndicator:function(){return (k.createElement('span',null,k.createElement(l,{shade:'light'},n._("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043e\u0442\u0432\u0435\u0442\u0438\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e"))));},_getLabel:function(){return n._("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case p.COMMENT_PAGE_POST:case p.COMMENT_WALL_POST:case p.COMMENT_REVIEW:return 'comments';case p.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=r;},null);
__d('UFIShareActionLink.react',['React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI','UFIInstanceState'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIShareActionLink',propTypes:{ufiInstanceID:m.string,shareURI:m.string,shareRel:m.string,shareNowMenuURI:m.string},render:function(){var o=this.props,p=o.ufiInstanceID,q=o.shareURI,r=o.shareRel,s=o.shareNowMenuURI,t=!this._getInlineShareProp('active')&&s,u={ufi_id:p};if(!t)return (h.createElement(j,{href:'#',ajaxify:new k(q).addQueryData(u),rel:r,onShareClick:(function(event){if(this._getInlineShareProp('loaded')){l.updateStateFields(p,'inlineShare',{active:true,toggling:true});event.kill();}}).bind(this)}));return (h.createElement(i,{endpoint:s,endpointData:u}));},_getInlineShareProp:function(o){var p=l.getKeyForInstance(this.props.ufiInstanceID,'inlineShare');return !!(p&&p[o]);}});f.exports=n;},null);
__d('UFISubscribeLink.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?i._("\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"):i._("\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),m=this.props.subscribeAction?i._("\u041f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043a\u0430\u0436\u0434\u043e\u043c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438."):i._("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u0445.");return (h.createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:m,onClick:this.props.onClick},l));}});f.exports=k;},null);
__d('UFITimelineBlingBox.react',['ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=n._("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u0445, \u043a\u043e\u043c\u0443 \u044d\u0442\u043e \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"),t=j.createElement('a',{ajaxify:r.dialog,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:r.page,key:'like',rel:'dialog',role:'button',title:s},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=n._("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"),v=j.createElement('a',{'aria-label':u,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:'#',key:'comment',onClick:this.props.commentOnClick},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));q.push(v);}if(this.props.reshares){var w=n._("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"),x=this._getShareViewURI(),y=j.createElement('a',{ajaxify:x.dialog,'aria-label':w,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:x.page,key:'reshare',rel:'async'},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));q.push(y);}return (j.createElement('span',null,q));},_getItemClassName:function(q){return (q.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=i.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=h.constructDialogURI(q,r),t=h.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});f.exports=p;},null);
__d('UFIActionLinkController',['Arbiter','BootloadedComponent.react','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBling.react','UFICentralUpdates','UFICommentActionLink.react','UFICommentLink.react','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILikeActionLink.react','UFIShareActionLink.react','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelCommentList','UFIUserActions','UFIPrivateReplyLink.react','URI','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){if(c.__markCompiled)c.__markCompiled();function ma(oa,pa,qa){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ra=o.scry(oa,pa)[0];if(ra){var sa=document.createElement('span');ra.parentNode.replaceChild(sa,ra);sa.appendChild(ra);if(typeof qa==='function')qa(sa);}else var ta=h.subscribe('PhotoSnowlift.DATA_CHANGE',function(){h.unsubscribe(ta);ma(oa,pa,qa);},h.SUBSCRIBE_NEW);}var na=function(oa,pa,qa,ra,sa){this._id=pa.ftentidentifier;this._ftFBID=qa.targetfbid;this._source=pa.source;this._contextArgs=pa;this._ufiRoot=oa;this._ufiInstanceID=ra;!(typeof sa==='function')?la(0):undefined;this._visibilityToggler=sa;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(qa.viewercanlike||qa.hasviewerliked)this._attemptInitializeLike();if(qa.cancomment)this._attemptInitializeComment();if(qa.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();if(y.reactActionLinks){this._attemptInitializeInlineSearchFeedback();this._attemptInitializeActorSelector();}v.subscribe('feedback-updated',(function(ta,ua){var va=ua.updates;if(this._id in va)this.render();}).bind(this));v.subscribe('feedback-id-changed',(function(ta,ua){var va=ua.updates;if(this._id in va)this._id=va[this._id];}).bind(this));v.subscribe('instance-updated',(function(ta,ua){var va=ua.updates[this._ufiInstanceID];if(va&&va.inlineShare)this.render();}).bind(this));};Object.assign(na.prototype,{_attemptInitializeBling:function(){ma(this._ufiRoot,'^form .uiBlingBox',(function(oa){this._blingRoot=oa;if(this._dataReady)this._renderBling();}).bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var oa=o.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(oa){var pa=o.scry(oa,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=!!pa;var qa=o.scry(oa,'.fbTimelineFeedbackComments')[0];this._enableShowComments=!!qa;}this._blingTimelineRoot=oa;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeInlineSearchFeedback:function(){ma(this._ufiRoot,'^form .inline_feedback',(function(oa){this._inlineSearchRoot=oa;if(this._dataReact)this._renderInlineSearchFeedback();}).bind(this));},_attemptInitializeActorSelector:function(){ma(this._ufiRoot,'^form .actor_selector',(function(oa){this._actorSelectorRoot=oa;if(this._dataReact)this._renderActorSelector();}).bind(this));},_attemptInitializeLike:function(){ma(this._ufiRoot,'^form .like_link',(function(oa){this._likeRoot=oa;if(this._dataReady)this._renderLike();}).bind(this));},_attemptInitializeComment:function(){ma(this._ufiRoot,'^form .comment_link',(function(oa){this._commentRoot=oa;if(this._dataReady)this._renderComment();}).bind(this));},_attemptInitializeSubscribe:function(){ma(this._ufiRoot,'^form .unsub_link',(function(oa){this._subscribeRoot=oa;if(this._dataReady)this._renderSubscribe();}).bind(this));},_attemptInitializeMessageReply:function(){ma(this._ufiRoot,'^form .message_reply_action_link',(function(oa){this._messageReplyRoot=oa;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}).bind(this));},_attemptInitializeShare:function(){ma(this._ufiRoot,'^form .share_action_link',(function(oa){this._shareRoot=oa;l.addClass(this._shareRoot,"share_root");var pa=o.scry(this._shareRoot,'.share_action_link')[0];if(pa){this._shareURI=pa.getAttribute('href');this._shareRel=pa.getAttribute('rel');this._shareNowMenuURI=m.get(pa,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}).bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();if(y.reactActionLinks){this._renderInlineSearchFeedback();this._renderActorSelector();}},_renderBling:function(){if(this._blingRoot)aa.getFeedbackTarget(this._id,(function(oa){this._blingBox=s.render(this.getBling(oa),this._blingRoot);}).bind(this));},getBling:function(oa){return (r.createElement(u,{contextArgs:this._contextArgs,feedbackTarget:oa,onCommentVisibilityChanged:this._visibilityToggler}));},_renderTimelineBling:function(){if(this._blingTimelineRoot)aa.getFeedbackTarget(this._id,(function(oa){s.render(this.getTimelineBling(oa),this._blingTimelineRoot);}).bind(this));},getTimelineBling:function(oa){var pa=t.getTrackingInfo(t.types.BLINGBOX),qa=j.getUserActionID(j.types.TIMELINE_SEE_LIKERS),ra=function(event){var ta=q.byTag(event.target,'form');k.uncollapse(ta,'action_link_timeline_bling');var ua=o.scry(ta,'a.UFIPagerLink');if(ua.length)ua[0].click();event.preventDefault();},sa=ga.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount();return (r.createElement(fa,{comments:sa,commentsreduced:oa.commentcountreduced,commentOnClick:ra,contextArgs:this._contextArgs,'data-ft':pa,'data-gt':qa,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:oa.likecount,likesreduced:oa.likecountreduced,reshares:oa.sharecount,resharesreduced:oa.sharecountreduced,actorid:oa.actorid}));},_renderInlineSearchFeedback:function(){if(this._inlineSearchRoot)s.render(this.getInlineSearchFeedback(),this._inlineSearchRoot);},getInlineSearchFeedback:function(){return (r.createElement('div',null,r.createElement(i,babelHelpers._extends({bootloadPlaceholder:r.createElement('div',null),bootloadLoader:p('InlineFeedback.react')},this._contextArgs.inlineSearchFeedbackConfig))));},_renderActorSelector:function(){if(this._actorSelector)s.render(this.getActorSelector(),this._actorSelectorRoot);},getActorSelector:function(){var oa=this._contextArgs.actorSelectorConfig,pa=oa.module,qa=oa.props;qa.nuxHoverContext=q.byTag(event.target,'form');return (r.createElement(pa,qa));},_renderLike:function(){if(this._likeRoot)aa.getFeedbackTarget(this._id,(function(oa){s.render(this.getLike(oa),this._likeRoot);}).bind(this));},getLike:function(oa){var pa=babelHelpers._extends({},this._contextArgs,{ftentidentifier:this._id,source:this._source});return (r.createElement(ca,{feedback:oa,contextArgs:pa}));},_renderComment:function(){if(this._commentRoot)this._commentLink=s.render(this.getComment(),this._commentRoot);},getComment:function(){return (r.createElement(w,{contextArgs:this._contextArgs}));},_renderMessageReply:function(){if(this._messageReplyRoot)aa.getFeedbackTarget(this._id,(function(oa){this._messageReplyLink=null;var pa=this.getMessageReply(oa);if(pa)this._messageReplyLink=s.render(pa,this._messageReplyRoot);if(!this._messageReplyLink||!s.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';n.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}).bind(this));},getMessageReply:function(oa){if(oa.messagereplycontext)return (r.createElement(ia,{actorID:oa.actorforpost,activityID:this._id,context:oa.messagereplycontext}));return null;},_renderSubscribe:function(){if(this._subscribeRoot)aa.getFeedbackTarget(this._id,(function(oa){this._subscribeLink=s.render(this.getSubscribe(oa),this._subscribeRoot);}).bind(this));},getSubscribe:function(oa){var pa=!oa.hasviewersubscribed,qa=(function(event){ha.changeSubscribe(this._id,pa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:oa.commentexpandmode});event.preventDefault();}).bind(this);return (r.createElement(ea,{onClick:qa,subscribeAction:pa}));},_renderShare:function(){if(this._shareRoot&&this._shareURI)this._shareLink=s.render(this.getShare(),this._shareRoot);},getShare:function(){return (r.createElement(da,{ufiInstanceID:this._ufiInstanceID,shareURI:this._shareURI,shareRel:this._shareRel,shareNowMenuURI:this._shareNowMenuURI}));},_setInlineShareActive:function(oa){ba.updateStateFields(this._ufiInstanceID,'inlineShare',{active:oa,toggling:true});},_isRenderingOnTimeline:function(){if(this._source===z.UFIFeedbackSourceType.PROFILE){var oa=o.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return oa.length>0;}return false;}});f.exports=na;},null);
__d('PageAdminSignatureSettings',['Arbiter','AdminSignatureConstants','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.$PageAdminSignatureSettings1();if(!!m)this.$PageAdminSignatureSettings2=m;if(l instanceof k){!!!m?j(0):undefined;this.$PageAdminSignatureSettings3(l);}else if(l!==null&&l!==undefined){this.$PageAdminSignatureSettings4=l.isValid;if(!this.$PageAdminSignatureSettings4)return;this.$PageAdminSignatureSettings5=l.signature;this.$PageAdminSignatureSettings6=l.shouldAttachToPost;this.$PageAdminSignatureSettings7=l.shouldAttachToComment;this.$PageAdminSignatureSettings8=l.shouldAttachToMessage;this.$PageAdminSignatureSettings9=l.everPromptedUser;this.$PageAdminSignatureSettings10=l.pageID;this.$PageAdminSignatureSettings11=l.userID;}h.subscribe(i.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,(function(n,o){return this.$PageAdminSignatureSettings12(n,o);}).bind(this));h.subscribe(i.EVENT_ADMIN_SIGNATURE_PROMPTED,(function(n,o){return this.$PageAdminSignatureSettings13(n,o);}).bind(this));}k.prototype.getIsValid=function(){'use strict';return this.$PageAdminSignatureSettings4;};k.prototype.getIsValidWithActor=function(){'use strict';return this.getIsValid()&&this.$PageAdminSignatureSettings2!==null&&this.$PageAdminSignatureSettings2===this.$PageAdminSignatureSettings10;};k.prototype.getPageID=function(){'use strict';return this.$PageAdminSignatureSettings10;};k.prototype.getUserID=function(){'use strict';return this.$PageAdminSignatureSettings11;};k.prototype.getSignature=function(){'use strict';return this.$PageAdminSignatureSettings5;};k.prototype.getShouldAttachToPost=function(){'use strict';return this.$PageAdminSignatureSettings6;};k.prototype.getShouldAttachToComment=function(){'use strict';return this.$PageAdminSignatureSettings7;};k.prototype.getShouldAttachToMessage=function(){'use strict';return this.$PageAdminSignatureSettings8;};k.prototype.getEverPromptedUser=function(){'use strict';return this.$PageAdminSignatureSettings9;};k.prototype.$PageAdminSignatureSettings1=function(){'use strict';this.$PageAdminSignatureSettings9=false;this.$PageAdminSignatureSettings10="";this.$PageAdminSignatureSettings7=false;this.$PageAdminSignatureSettings8=false;this.$PageAdminSignatureSettings6=false;this.$PageAdminSignatureSettings5="";this.$PageAdminSignatureSettings11="";this.$PageAdminSignatureSettings4=false;this.$PageAdminSignatureSettings2=null;};k.prototype.$PageAdminSignatureSettings3=function(l){'use strict';this.$PageAdminSignatureSettings9=l.$PageAdminSignatureSettings9;this.$PageAdminSignatureSettings10=l.$PageAdminSignatureSettings10;this.$PageAdminSignatureSettings7=l.$PageAdminSignatureSettings7;this.$PageAdminSignatureSettings8=l.$PageAdminSignatureSettings8;this.$PageAdminSignatureSettings6=l.$PageAdminSignatureSettings6;this.$PageAdminSignatureSettings5=l.$PageAdminSignatureSettings5;this.$PageAdminSignatureSettings11=l.$PageAdminSignatureSettings11;this.$PageAdminSignatureSettings4=l.$PageAdminSignatureSettings4;};k.prototype.$PageAdminSignatureSettings13=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11)return;this.$PageAdminSignatureSettings9=true;};k.prototype.$PageAdminSignatureSettings12=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11||m.pageID!==this.$PageAdminSignatureSettings10)return;switch(m.settingChanged){case i.SETTING_ATTACH_TO_POST:this.$PageAdminSignatureSettings6=m.newValue;break;case i.SETTING_ATTACH_TO_MESSAGE:this.$PageAdminSignatureSettings8=m.newValue;break;case i.SETTING_ATTACH_TO_COMMENT:this.$PageAdminSignatureSettings7=m.newValue;break;default:j(0);}};f.exports=k;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("\u042d\u0442\u043e\u0439 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0435\u0439 \u0441\u0435\u0439\u0447\u0430\u0441 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u043d\u0435\u043b\u044c\u0437\u044f. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u043e\u0437\u0436\u0435."),success:h._("\u0412\u0430\u0448 \u043f\u0435\u0440\u0435\u043f\u043e\u0441\u0442 \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d.")};},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d("XPagesAdminSignaturePromptDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/prompt\/",{__asyncDialog:{type:"Int"}});},null);
__d("XPagesAdminSignatureSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/settings\/",{});},null);
__d('PageAdminSignatureMonitor',['Arbiter','AsyncRequest','AdminSignatureConstants','DOM','DOMQuery','Event','InputCaretUtility','PageAdminSignatureSettings','XPagesAdminSignatureSettingsController','XPagesAdminSignaturePromptDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={registerComposerControlForSignature:function(s,t,u,v){if(!t||!t.isValid)return;var w=this._getUnderlyingTextControl(s),x=new o(t,u);m.listen(w,'focus',(function(){this._handleInputFieldFocusForSignature(w,x,x.getShouldAttachToPost(),function(y){return y.value;},function(y,z){if(v)z='\n\n'.concat(z);k.setAttributes(y,{value:z});n.delayedMoveCaretToBeginning(y);});}).bind(this));},handleReactInputFieldFocusForSignature:function(s,t,u){this._handleInputFieldFocusForSignature(s,t,u,function(v){return v.hasEnteredText();},function(v,w){return v.setSignature(w);});},prepareConfirmationDialog:function(s,t,u){s.subscribe('confirm',(function(){s.hide();this._notifyPromptConfirmation(t,u,true);}).bind(this));s.subscribe('cancel',(function(){this._notifyPromptConfirmation(t,u,false);}).bind(this));},_promptForAutoSignature:function(s){h.inform(j.EVENT_ADMIN_SIGNATURE_PROMPTED,{userID:s.getUserID()});var t=q.getURIBuilder().getURI();new i().setURI(t).setData({pageID:s.getPageID()}).send();},_handleInputFieldFocusForSignature:function(s,t,u,v,w){if(!t||!t.getIsValidWithActor())return;if(!t.getEverPromptedUser()){this._promptForAutoSignature(t);}else if(u&&!v(s))w(s,t.getSignature());},_notifyPromptConfirmation:function(s,t,u){var v=p.getURIBuilder().getURI();new i().setURI(v).setData({pageID:s,signatureOption:j.SETTING_EVER_PROMPTED,signatureOptionValue:u}).send();this._aribiterNotifyPromptConfirmation(s,t,u);},_getUnderlyingTextControl:function(s){return l.find(s,'textarea');},_aribiterNotifyPromptConfirmation:function(s,t,u){var v=[j.SETTING_ATTACH_TO_POST,j.SETTING_ATTACH_TO_COMMENT,j.SETTING_ATTACH_TO_MESSAGE];v.forEach(function(w){h.inform(j.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,{pageID:s,userID:t,settingChanged:w,newValue:u});});}};f.exports=r;},null);
__d('UFIBusinessActorIcon.react',['AppUserRoleConstants.brands','React','cx','joinClasses','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=/[^\u4e00-\u9eff]+/,o=i.createClass({displayName:'UFIBusinessActorIcon',propTypes:{firstName:m.string.isRequired,lastName:m.string.isRequired,classNames:m.string,textClassNames:m.string,businessRole:m.oneOf(l(h))},render:function(){var p=this._getInitials(this.props.firstName,this.props.lastName),q=this.props.businessRole===h.ADMIN;return (i.createElement('div',{className:k(this.props.classNames,"_1rpl")},i.createElement('div',{className:k(this.props.textClassNames,q?"_1rpm":null)},p)));},_getInitials:function(p,q){if(!(typeof p==='string')||!(typeof q==='string'))return '?';var r=p.trim().charAt(0)+q.trim().charAt(0);if(this._isLatinLanguage(r)){r=r.toUpperCase();}else r=q.trim().charAt(0);return r;},_isLatinLanguage:function(p){if(!(typeof p==='string'))return false;var q=p.replace(/[\s.-]+/g,'');return n.test(q);}});f.exports=o;},null);
__d('UFIActorIconContainer.react',['Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=i.createElement(l,{size:'large'}),q=i.createClass({displayName:'UFIActorIconContainer',propTypes:{actorID:o.string.isRequired,className:o.string},getInitialState:function(){return {actor:null};},componentWillMount:function(){this._fetchActorData();},componentDidUpdate:function(r){if(this.props.actorID!==r.actorID)this._fetchActorData();},_fetchActorData:function(){j.get(this.props.actorID,(function(r){return this.setState({actor:r});}).bind(this));},render:function(){var r=this.state.actor;if(!r)return p;var s=n("img UFIActorImage _54ru",this.props.className);return (r.isBusinessPersona?i.createElement(k,{classNames:s,firstName:r.firstName,lastName:r.lastName,textClassNames:"UFIBusinessActorIconText"}):i.createElement(h,{alt:r.name,className:s,src:r.thumbSrc}));}});f.exports=q;},null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={START:'start',STOP:'stop'},k=10*1000;function l(m,n,o){this.$AbstractCommentLiveTypingController1=m;this.$AbstractCommentLiveTypingController2=n;this.$AbstractCommentLiveTypingController3=o;this.$AbstractCommentLiveTypingController4=null;this.$AbstractCommentLiveTypingController5=false;this.$AbstractCommentLiveTypingController6=0;this.$AbstractCommentLiveTypingController7=null;i(this.destroy.bind(this));}l.prototype.destroy=function(){this.$AbstractCommentLiveTypingController4&&this.$AbstractCommentLiveTypingController4.destroy();this.$AbstractCommentLiveTypingController4=null;this.$AbstractCommentLiveTypingController5=false;this.$AbstractCommentLiveTypingController6=0;this.$AbstractCommentLiveTypingController7=null;};l.prototype.bootloadPublisherModule=function(m){throw new Error(h('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};l.prototype.$AbstractCommentLiveTypingController8=function(m){var n=new m(this.$AbstractCommentLiveTypingController1,this.$AbstractCommentLiveTypingController2,this.$AbstractCommentLiveTypingController3),o=Date.now(),p=this.$AbstractCommentLiveTypingController6;if(p&&p+k>=o){var q=this.$AbstractCommentLiveTypingController7;if(q===j.START){n.handleStartEvent();}else if(q===j.STOP)n.handleStopEvent();}this.$AbstractCommentLiveTypingController4=n;};l.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController5||!this.$AbstractCommentLiveTypingController1)return;this.$AbstractCommentLiveTypingController5=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};l.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController7=j.START;this.$AbstractCommentLiveTypingController6=Date.now();if(this.$AbstractCommentLiveTypingController4){this.$AbstractCommentLiveTypingController4.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController5)this.$AbstractCommentLiveTypingController9();};l.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController7=j.STOP;this.$AbstractCommentLiveTypingController6=Date.now();if(this.$AbstractCommentLiveTypingController4){this.$AbstractCommentLiveTypingController4.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController5)this.$AbstractCommentLiveTypingController9();};f.exports=l;},null);
__d('UFIAddComment.react',['ActorURI','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','ClipboardPhotoUploader','getActiveElement','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','PageAdminSignatureMonitor','React','ReactDOM','ReactLayeredComponentMixin','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachPhotoSection.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','cx','dotAccess','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){if(c.__markCompiled)c.__markCompiled();var pa=v.PropTypes,qa=na._("\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 ..."),ra=na._("\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442..."),sa="fcg fss UFICommentTip",ta=19,ua='/ajax/ufi/upload/',va='/ajax/ufi/sticker_preview/';function wa(){return !!fa.canPublishLive;}var xa=v.createClass({displayName:'UFIAddComment',mixins:[x],propTypes:{contextArgs:pa.object.isRequired,viewerActorID:pa.string.isRequired,editingComment:pa.object.isRequired,allowPhotoAttachments:pa.bool,allowStickerAttachments:pa.bool,isEditing:pa.bool,isFirstComponent:pa.bool,isLastComponent:pa.bool,isQAndA:pa.bool,mentionsDataSource:pa.object,replyCommentID:pa.string,showSendOnEnterTip:pa.bool,subtitle:pa.any,targetID:pa.string,withoutSeparator:pa.bool,markViewerHasInteracted:pa.func},contextTypes:{dispatch:pa.func},getInitialState:function(){var ya=this.props.editingComment,za=ya.attachment||{type:null};return {attachedPhoto:ya.photo_comment||null,attachedSticker:za.type=='sticker'?za:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing};},_onKeyDown:function(event){if(this.props.isEditing&&o.getKeyCode(event.nativeEvent)===q.ESC)this.context.dispatch(ca.cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){y.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var ya=n();if(o.getKeyCode(event.nativeEvent)===q.ESC)ya.blur();},_onContentChange:function(ya){if(ya){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();},_handleUnsavedChanges:function(){var ya=b.PageTransitions;if(ya){var za=ja.getNextURI(),ab=ya.getMostRecentURI();if(za.getQueryData().hasOwnProperty('theater')||ab.getQueryData().hasOwnProperty('theater')||za.getQueryData().hasOwnProperty('sdialog')||z.isPermalinkURI(za)||z.isPermalinkURI(ab))return;var bb=b.DialogNavigationStack;if(bb&&bb.isActiveURI(za))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return na._("\u0412\u044b \u043d\u0435 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438 \u0441\u0432\u043e\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439. \u0425\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438, \u043d\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0432?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout((function(){if(this.isMounted())this.setState({isFocused:false});}).bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var ya=new m(ua,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[ya.subscribe('upload_start',this._prepareForAttachedPhotoPreview),ya.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),ya.subscribe('upload_success',(function(za,ab){this._onPhotoUploadComplete(ab);}).bind(this))];ya.handlePaste(event);},_onEnterSubmit:function(ya,event){var za=this.state.attachedPhoto||this.state.attachedSticker,ab=this.props.isEditing||za;if(this.state.isLoadingPhoto){return false;}else if(!ya.encodedValue.trim()&&!ab)return false;ya.encodedValue=ya.encodedValue.trim();if(za){ya.attachedPhoto=this.state.attachedPhoto;ya.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{ya.attachedPhoto=null;ya.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(ca.submitEdit(this.props.editingComment,ya,event.target));}else this.context.dispatch(ca.submitNew(ya,event.target,this.props.replyCommentID));this._attemptPublishStopEvent();return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(ya){ya.unsubscribe();});},_getFeedbackTarget:function(ya){return ya.contextArgs.ftentidentifier;},_initTypingEventController:function(){if(!this._typingEventController&&wa())this._typingEventController=new da(this._getFeedbackTarget(this.props),this.props.replyCommentID,this.props.viewerActorID);},_attemptPublishStartEvent:function(){if(!wa())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function(){if(!wa())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=s.registerBlocker((function(){return this.state.isCommenting;}).bind(this));},_destroyLiveTypingController:function(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function(ya){var za=this._getFeedbackTarget(this.props),ab=this._getFeedbackTarget(ya);if(ab!==za||this.props.replyCommentID!==ya.replyCommentID||this.props.viewerActorID!==ya.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)i.unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)i.unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function(){var ya={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&fa.shouldShowStickerNUX){var za=ka.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new j(za).send();if(this.state.renderStickerNUX===null)k.loadModules(["XUIAmbientNUX.react"],(function(bb){ya.renderStickerNUX=(function(){return {ambientNUX:v.createElement(bb,{contextRef:(function(){return this.refs.sticker_button;}).bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},na._("\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u043a\u043b\u0435\u0439\u043a\u0430\u043c\u0438!"))};}).bind(this);}).bind(this));fa.shouldShowStickerNUX=false;ya.stickerNUXVisible=true;}var ab=this.props.contextArgs.pagesAdminSignatureSettings;if(ab)u.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,ab,ab.getShouldAttachToComment());this.setState(ya);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},_setFileInput:function(ya,za){this.setState({fileInput:ya,fileUploader:za});},render:function(){var ya=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,za=null;if(this.props.subtitle){za=v.createElement('span',{className:sa},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){za=v.createElement('span',{className:sa},na._("{cancel}",[na.param('cancel',v.createElement(r,{onClick:(function(){return (this.context.dispatch(ca.cancel()));}).bind(this)},na._("\u041e\u0442\u043c\u0435\u043d\u0430")))]));}else if(this.props.isEditing){za=v.createElement('span',{className:sa},na._("\u041d\u0430\u0436\u043c\u0438\u0442\u0435 Esc \u0434\u043b\u044f {cancel}.",[na.param('cancel',v.createElement(r,{onClick:(function(){return (this.context.dispatch(ca.cancel()));}).bind(this)},na._("\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))]));}else if(this.props.showSendOnEnterTip)za=v.createElement('span',{className:sa},na._("\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u0443\u0439\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439, \u043d\u0430\u0436\u0430\u0432 \u043a\u043b\u0430\u0432\u0438\u0448\u0443 \"Enter\"."));var ab=null,bb=null,cb=this.state.attachedPhoto||this.state.attachedSticker,db=null;if(this.props.allowStickerAttachments&&!cb)bb=v.createElement(ia,{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){db=this._onPaste;ab=v.createElement(ea,{getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,onPhotoUploadComplete:this._onPhotoUploadComplete,setFileInput:this._setFileInput,attachment:cb});}var eb=aa.getTrackingInfo(aa.types.ADD_COMMENT_BOX),fb=v.createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},v.createElement(ba,{actorID:this.props.viewerActorID,className:!ya?"hidden_elem":''})),gb=oa("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),hb;if(!!this.props.replyCommentID){hb=ra;}else if(this.props.isQAndA){hb=na._("\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441 ...");}else hb=qa;var ib=this.props.contextArgs.viewoptionstypeobjects,jb=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)za=null;var kb;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedSticker)kb=v.createElement(l,{bootloadLoader:p('UFIAttachedPhotoPreview.react'),bootloadPlaceholder:v.createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedPhotoPreview:this._onRemoveAttachedPhotoPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto});var lb=this.props.allowStickerAttachments?oa("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",mb=this.props.contextArgs.mentionsinput,nb=mb.inputComponent,ob=mb.viewComponent,pb=mb.viewProps,qb=this.props.editingComment.body,rb=qb?t.generateDataFromTextWithEntities(qb):null;return (v.createElement('div',{className:gb,onKeyDown:this._onKeyDown,'data-ft':eb},v.createElement(ha,{className:lb},fb,v.createElement('div',{className:'UFICommentContainer'},v.createElement('div',{className:'UFIInputContainer'},v.createElement(nb,{replyCommentID:this.props.replyCommentID,initialData:rb,placeholder:hb,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:ob,viewProps:pb,viewOptionsTypeObjects:ib,viewOptionsTypeObjectsOrder:jb,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:fa.showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:wa()?this._onContentChange:null,onPaste:db,showBusinessTypeahead:this.props.contextArgs.showBusinessTypeahead,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),v.createElement('div',{className:"UFICommentAttachmentButtons clearfix"},ab,bb)),kb,za))));},componentDidUpdate:function(ya,za,ab){if(!za.attachedPhoto&&this.state.attachedPhoto||!za.attachedSticker&&this.state.attachedSticker||!za.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(ya.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=i.subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,(function(ya){this.refs.mentionsinput.focus();}).bind(this));if(this.props.contextArgs.issnowlift)this._remixedImageToken=i.subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,(function(ya,za){var event={clipboardData:{items:[za]}};this._onPaste(event);}).bind(this));}},insertMention:function(ya){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(ya);},_getPhotoUploadData:function(){var ya=this.props.viewerActorID,za={profile_id:ya,target_id:this.props.targetID,source:ta};za[h.PARAMETER_ACTOR]=ya;return za;},_onPhotoUploadComplete:function(ya){if(!this.state.isLoadingPhoto)return;var za=ya.getPayload();if(za&&za.fbid){this.setState({attachedPhoto:za,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(ya){if(!this.state.isLoadingPhoto)return;var za=ya.getPayload();if(za&&za.fbid){this.setState({attachedSticker:za,isLoadingPhoto:false});}else{k.loadModules(["Dialog"],function(ab){var bb=na._("\u041d\u0430\u043a\u043b\u0435\u0439\u043a\u0430 \u043d\u0435 \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u0430"),cb=na._("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043d\u0430\u043a\u043b\u0435\u0439\u043a\u0443.");new ab().setTitle(bb).setBody(cb).setButtons(ab.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(ya,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(ya);return;}this.sendSticker(ya,event);},_prepareForAttachedStickerPreview:function(ya){this.setState({attachedSticker:null,isLoadingPhoto:true});new j(va).setData({sticker_id:ya}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(ya,event){var za={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:ya}};this.context.dispatch(ca.submitNew(za,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function(ya){k.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],(function(za,ab,bb,cb){var db=za.symbols[ya];if(!db)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(db);return;}if(!this._selectionPosition)this._selectionPosition=new cb(w.findDOMNode(this.refs.mentionsinput.refs.textarea));var eb=this.refs.mentionsinput.refs.getTextFieldDOM(),fb=bb.getInstance(eb),gb=fb.getValue(),hb=ab.insertEmoticon(db,gb,this._selectionPosition.getPos());fb.setValue(hb.result);this._selectionPosition.setPos(hb.start,hb.end);}).bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});f.exports=xa;},null);
__d('UFICommentLikeCount.react',['NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=function(r,s){var t=new m('/ajax/like/tooltip.php').setQueryData({comment_fbid:r.fbid,comment_from:r.author,comment_likecount:r.likecount||0,comment_id:r.id,cache_buster:r.likeconfirmhash||0});if(s)t.addQueryData({viewas:s});return t;},q=k.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:o.object.isRequired,contextArgs:o.object.isRequired},render:function(){var r=this.props.comment,s=h.formatIntegerWithDelimiter(r.likecount||0,l.numberDelimiter),t=j.LIKES,u={id:r.fbid},v=p(this.props.comment,this.props.contextArgs.viewas),w=k.createElement('i',{className:"UFICommentLikeIcon"}),x=k.createElement('span',null,s),y="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":'');return (k.createElement('a',{ajaxify:i.constructDialogURI(t,u).toString(),className:y,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),rel:'dialog',role:'button'},w,x));}});f.exports=q;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['React','ReactFragment','TrackingNodes','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentMetadata.react','UFIConfig','UFIConstants','UFIMiddot.react','UFIPrivateReplyLink.react','UFISpamCount','UFIStoryAction','cx','fbt','PagesPrivateReplyConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';if(c.__markCompiled)c.__markCompiled();var x=c('PagesPrivateReplyConstants').Status,y=h.PropTypes,z=q.UFIStatus,aa="fsm fwn fcg UFICommentActions",ba="UFIDeletedMessageIcon",ca="UFIDeletedMessage",da='ufi_comment_like_link',ea='ufi_reply_like_link',fa=h.createClass({displayName:'UFICommentActions',propTypes:{comment:y.object.isRequired,contextArgs:y.object.isRequired,feedback:y.object.isRequired,hideAsSpamForPageAdmin:y.bool,markedAsSpamHere:y.bool,permalink:y.string,shareLink:y.string,showPermalink:y.bool,isStreaming:y.bool,showReplyLink:y.bool,viewerCanMarkNotSpam:y.bool},contextTypes:{dispatch:y.func},render:function(){var ga=this.props,ha=ga.comment,ia=ga.permalink,ja=ga.feedback,ka=ga.parentCanComment,la=ga.markedAsSpamHere,ma=ha.status===z.SPAM_DISPLAY,na=ga.showReplyLink,oa=ga.hideAsSpamForPageAdmin,pa,qa,ra,sa,ta,ua,va,wa,xa,ya=!ha.islocal&&ha.status!==z.LIVE_DELETED;if(ya){if(ma&&!la){if(ga.viewerCanMarkNotSpam)pa=h.createElement('a',{onClick:(function(event){return this.context.dispatch(m.markAsNotSpam(ha,event));}).bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},w._("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"));if(oa&&ja.isthreaded&&ha.cancomment&&na)va=this.renderCommentReply(ha);}else{if(ha.viewercanlike){var za=j.getTrackingInfo(ha.hasviewerliked?j.types.UNLIKE_LINK:j.types.LIKE_LINK),ab=ha.hasviewerliked?w._("\u041d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"):w._("\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u00ab\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044e"),bb=ha.parentcommentid?ea:da;qa=h.createElement('a',{className:'UFILikeLink','data-ft':za,'data-testid':bb,href:'#',onClick:(function(event){return this.context.dispatch(m.toggleLike(ha,event.target));}).bind(this),role:'button',title:ab},ha.hasviewerliked?w._("\u041d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"):w._("\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"));}if(ja.isthreaded&&ha.cancomment&&na||!!ha.parentcommentid&&ja.cancomment&&ka)va=this.renderCommentReply(ha);if(ha.likecount>0)ta=h.createElement(n,{comment:ha,contextArgs:ga.contextArgs});if(ha.spamcount&&t.enabled)ua=h.createElement(t,{count:ha.spamcount});if(ha.messagereply&&(ha.messagereply.hasReplyPermission&&ja.actorforpost===ha.messagereply.pageID||ha.messagereply.status===x.ALREADY_REPLIED)){wa=h.createElement(s,{actorID:ja.actorforpost,activityID:ha.id,context:ha.messagereply});}else if(ha.chattobuy)wa=h.createElement('a',{href:ha.chattobuy,role:'button',rel:'async-dialog'},w._("Message"));}if(ha.attachment&&ha.attachment.type==='share'&&ha.canremove)xa=h.createElement('a',{href:'#',onClick:(function(event){return this.context.dispatch(m.removePreview(ha,event.target));}).bind(this),role:'button'},w._("\u0423\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"));if(this.props.contextArgs.shareablecomments)ra=h.createElement('a',{className:'share_action_link',href:ga.comment.commentshareuri,role:'button',rel:'dialog',title:w._("Share this comment")},w._("\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"));if(ja.canviewerpin&&!ha.parentcommentid){var cb=ha.id===ja.pinnedcommenttoken,db=cb?w._("Unpin this comment"):w._("Pin this comment"),eb=cb?w._("Unpin Comment"):w._("Pin Comment");sa=h.createElement('a',{className:'share_action_link',href:'#',role:'button',title:db,onClick:(function(event){return this.context.dispatch(m.togglePin(ha,event.target));}).bind(this)},eb);}}var fb=h.createElement(o,{comment:ha,onRetrySubmit:(function(){return this.context.dispatch(k.retrySubmit(ha));}).bind(this),permalink:ia,shortenTimestamp:ga.contextArgs.shortenTimestamp,showPermalink:ga.showPermalink}),gb={};if(ja.customcommentactionlinks)for(var hb in ja.customcommentactionlinks){var ib=ja.customcommentactionlinks[hb];if(ib.showInMenu)continue;var jb=function(event){return l.inform(ib.type,{comment:ha,feedback:ja});};gb[ib.type]=h.createElement('a',{href:'#',onClick:jb,role:'button'},ib.title);}var kb;if(ga.contextArgs.isstreaming){kb={likeToggle:qa,spamToggle:pa,likeCount:ta,spamCount:ua};kb=Object.assign(kb,gb);}else if(ja.isqanda){kb={likeCount:ta,spamCount:ua,likeToggle:qa,pinToggle:sa,commentReply:va,shareComment:ra,messageReply:wa,spamToggle:pa};kb=Object.assign(kb,gb);kb=Object.assign(kb,{metadata:fb,removePreview:xa});}else if(ga.contextArgs.entstream){kb={metadata:fb,likeToggle:qa,likeCount:ta,pinToggle:sa,commentReply:va,messageReply:wa,shareComment:ra,spamCount:ua,spamToggle:pa,removePreview:xa};kb=Object.assign(kb,gb);}else if(ja.isthreaded){kb={likeToggle:qa,pinToggle:sa,commentReply:va,messageReply:wa,spamToggle:pa,removePreview:xa,shareComment:ra,likeCount:ta,spamCount:ua};kb=Object.assign(kb,gb);kb=Object.assign(kb,{metadata:fb});}else{kb={metadata:fb,likeToggle:qa,pinToggle:sa,shareComment:ra,likeCount:ta,spamCount:ua,commentReply:va,messageReply:wa,spamToggle:pa,removePreview:xa};kb=Object.assign(kb,gb);}if(ha.status===z.LIVE_DELETED){var lb=h.createElement('span',{className:ca},h.createElement('i',{className:ba,'data-hover':'tooltip','aria-label':w._("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0434\u0430\u043b\u0435\u043d")}));kb.deletionWarning=lb;}var mb=true,nb={};for(var ob in kb){var jb=kb[ob];if(jb){var pb=h.createElement(r,{key:'middot-'+ob});nb[ob]=mb?jb:i.create({middot:pb,action:jb});mb=false;}}return (h.createElement('div',{className:aa},i.create(nb)));},renderCommentReply:function(ga){return (h.createElement('a',{className:"UFIReplyLink",href:'#',onClick:(function(){var ha=this.props.feedback;if(ha.isthreaded&&ga.cancomment){this.context.dispatch(u.showReplies(ga.id,ga));}else if(ga.parentcommentid)this.context.dispatch(u.showReplies(ga.parentcommentid,ga));}).bind(this),role:'button'},w._("\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c")));}});f.exports=fa;},null);
__d('UFISocialContext.react',['HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=27,p=k.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=h.constructEndpoint(q).toString(),u=k.createElement('a',{href:q.uri,'data-hovercard':t,key:'top'},q.name),v=s.name.length+q.name.length,w;if(r===0){w=m._("\u041e\u0431\u0449\u0438\u0439 \u0434\u0440\u0443\u0433 \u2013 {name}",[m.param('name',u)]);}else if(v<o){var x;if(r==1){x=m._("\u0435\u0449\u0435 1");}else x=m._({"*":"\u0435\u0449\u0435 {count}"},[m.param('count',r,[0])]);w=m._("\u0414\u0440\u0443\u0436\u0438\u0442 \u0441 {name} \u0438 {others}",[m.param('name',u),m.param('others',this.getOthersLink(x,s,q))]);}else{var y=m._({"*":"{count} \u043e\u0431\u0449\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439","268435456":"{count} \u043e\u0431\u0449\u0438\u0439 \u0434\u0440\u0443\u0433","536870912":"{count} \u043e\u0431\u0449\u0438\u0445 \u0434\u0440\u0443\u0433\u0430"},[m.param('count',r+1,[0])]);w=this.getOthersLink(y,s);}return (k.createElement('span',{className:'UFICommentSocialContext'},w));},getOthersLink:function(q,r,s){var t=j.MUTUAL_FRIENDS,u={uid:r.id},v=new l('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=i.constructDialogURI(t,u).toString();return (k.createElement('a',{ajaxify:w,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),key:'others',rel:'dialog'},q));}});f.exports=p;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'UFICommentAuthorName',propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAdminViewer:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool,isPublic:m.bool},render:function(){var o=this.props,p=o.author,q=j.getTrackingInfo(j.types.USER_NAME);return (i.createElement(k,{author:p,showHovercard:o.showHovercard,isAdminViewer:o.isAdminViewer,key:'author',focusOnMount:o.focusOnMount,'data-ft':q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName,isPublic:this.props.isPublic},o.isFeatured?i.createElement(h,{key:'badge',size:'xsmall',type:'verified'}):null,o.socialContext?i.createElement(l,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});f.exports=n;},null);
__d('IntlLang',['UnicodeBidi'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},j=new RegExp('['+i.HE+']');function k(m){var n=h.firstStrongChar(m);if(n===null)return null;if(j.exec(n))return 'he';return null;}var l={getLang:k};f.exports=l;},null);
__d('UFICommentBody.react',['Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils.react','UFIConfig','UFIConstants','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=i.PropTypes,s=i.createClass({displayName:'UFICommentBody',propTypes:{commentText:r.string.isRequired,commentRanges:r.array,groupOrEventID:r.number,maxLength:r.number,maxLines:r.number,socialContext:r.object,markViewerHasInteracted:r.func},render:function(){var t=this.props,u=t.commentText,v=j.getTrackingInfo(j.types.USER_MESSAGE),w=l.isDirectionLTR(u),x=!w,y=w&&h.isRTL()?'ltr':x&&!h.isRTL()?'rtl':null,z=m.getLang(u),aa=n.getCommentBodyInterpolator(t.groupOrEventID),ba=i.createElement(k,{key:'comment-body',className:"UFICommentBody",interpolator:aa,ranges:t.commentRanges,text:u,truncationPercent:p.commentTruncationPercent,maxLength:t.maxLength,maxLines:t.maxLines,renderEmoticons:o.renderEmoticons,renderEmoji:o.renderEmoji,'data-ft':v,dir:y,lang:z,markViewerHasInteracted:this.props.markViewerHasInteracted});if(t.socialContext){ba=i.createElement('div',{key:'body'},ba);}else{var ca=(w&&h.isRTL()?"_5wjy":'')+(w&&h.isRTL()?' '+"_5wjz":'')+(x&&!h.isRTL()?' '+"_5wj-":'')+(x&&!h.isRTL()?' '+"_5wj_":'');ba=ca?i.createElement('div',{key:'body',className:ca},ba):[' ',ba];}return i.createElement('span',null,ba);}});f.exports=s;},null);
__d('XUIEditButton.react',['XUIAbstractGlyphButton.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'XUIEditButton',render:function(){var n=this.props.label,o=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!n)n=k._("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c");o=n;}return (i.createElement(h,babelHelpers._extends({},this.props,{label:n,title:o,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:l(this.props.className,"_5upq _5upr")})));}});f.exports=m;},null);
__d('UFICommentMenu.react',['Bootloader','React','XUICloseButton.react','XUIEditButton.react','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n,o,p,q,r=l({EDIT:true,CLOSE:true}),s=i.createClass({displayName:'UFICommentMenu',propTypes:{menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});h.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],(function(t,u,v){n=t,o=u;p=v;q=p.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}).bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(t,u,v){if(this.state.needsExpand&&!u.needsExpand)return false;return true;},render:function(){var t=null;if(this.props.menuType===r.EDIT){t=k;}else t=j;if(this.props.menuData&&this.state.bootloaded){var u=this.props.menuData.map(function(w){return (i.createElement(q,{'data-testid':w.testid,key:w.value,value:w.value},w.label));}),v=i.createElement(p,{onItemClick:this.props.onAction},u);return (i.createElement(o,babelHelpers._extends({},this.props,{alignh:'right',layerBehaviors:[n],menu:v,ref:'menu'}),i.createElement(t,{href:'#',onClick:this.onClickGuard})));}return i.createElement(t,babelHelpers._extends({},this.props,{href:'#',onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});s.MenuType=r;f.exports=s;},null);
__d('UFIComment.react',['ix','Bootloader','ContentTranslationStrings','HovercardLink','Image.react','LiveWWWFeedbackTypedLogger','React','ReactDOM','Tooltip.react','TrackingNodes','TextWithEntities.react','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils.react','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UserHovercardLocation','XUICloseButton.react','cx','emptyFunction','fbglyph','fbt','joinClasses','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){'use strict';if(c.__markCompiled)c.__markCompiled();var na=n.PropTypes,oa=da.UFIStatus,pa=ma({edit:true,hide:true,remove:true}),qa='ufi_comment_close_button',ra='ufi_highlighted_comment',sa='ufi_comment_menu_delete',ta='ufi_comment_menu_edit',ua='ufi_comment_menu_hide',va="fcg",wa={testid:sa,value:pa.remove,label:ka._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 ...")},xa={testid:ua,value:pa.hide,label:ka._("\u0421\u043a\u0440\u044b\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")},ya=null,za=function(cb){var db=cb.status;return db===oa.FAILED_ADD||db===oa.FAILED_EDIT;};function ab(cb){return cb.commenterIsFOF!==undefined&&cb.userIsMinor!==undefined&&cb.reportLink!==undefined;}var bb=n.createClass({displayName:'UFIComment',propTypes:{authorProfiles:na.object.isRequired,comment:na.object.isRequired,contextArgs:na.object.isRequired,feedback:na.object.isRequired,'data-ft':na.string,focusOnMount:na.bool,hasPartialBorder:na.bool,hideAsSpamForPageAdmin:na.bool,isFeatured:na.bool,isFirst:na.bool,isFirstCommentComponent:na.bool,isFirstComponent:na.bool,isLast:na.bool,isLastCommentComponent:na.bool,isLastComponent:na.bool,isLocallyComposed:na.bool,isReply:na.bool,parentCanComment:na.bool,permalink:na.string,showPermalink:na.bool,showRemoveReportMenu:na.bool,showReplyLink:na.bool,viewerIsAuthor:na.bool,orderingMode:na.string,markViewerHasInteracted:na.func},contextTypes:{dispatch:na.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false};},_onHideAsSpam:function(event){this.context.dispatch(u.markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(u.markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(u.remove(this.props.comment,event.target,(function(){return this.setState({isInlinePageDeleted:true});}).bind(this)));},_onRemove:function(event){this.context.dispatch(u.remove(this.props.comment,event.target,ia));},_onInlineBan:function(event){this.context.dispatch(u.inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(u.undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,cb){var db=cb.item,eb=db.getValue();setTimeout((function(){if(eb===pa.remove){this._onRemove(event);}else if(eb===pa.edit){this.context.dispatch(u.edit(this.props.comment));}else if(eb===pa.hide){this._onHideAsSpam(event);}else t.inform(eb,{comment:this.props.comment,feedback:this.props.feedback});}).bind(this),0);},_createRemoveReportMenuData:function(){return [wa,xa];},_createEditDeleteMenuData:function(){return [{testid:ta,value:pa.edit,label:ka._("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c ...")},{testid:sa,value:pa.remove,label:ka._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c ...")}];},_renderCloseButton:function(){var cb=this.props.comment,db=null,eb=null,fb=null,gb=false;if(cb.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&cb.canedit){fb=ka._("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0438\u0442\u044c");eb=this._createEditDeleteMenuData();gb=true;}else if(this.props.showRemoveReportMenu){fb=ka._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f");eb=this._createRemoveReportMenuData();}else if(this.props.feedback.customcommentactionlinks){fb=ka._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c");gb=true;eb=[wa];}else{fb=ka._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c");db=this._onRemove;}}else if(this.props.feedback.customcommentactionlinks){fb=ka._("\u0421\u043a\u0440\u044b\u0442\u044c");gb=true;eb=[xa];}else if(cb.canreport){fb=ka._("\u0421\u043a\u0440\u044b\u0442\u044c");db=this._onHideAsSpam;}if(this.props.feedback.customcommentactionlinks)for(var hb in this.props.feedback.customcommentactionlinks){var ib=this.props.feedback.customcommentactionlinks[hb];if(!ib.showInMenu)continue;eb.push({testid:ib.type,value:ib.type,label:ib.title});}var jb="UFICommentCloseButton"+(db===null&&eb===null?' '+"hdn":''),kb=null,lb=null;if(this.props.contextArgs.viewas){kb='/ajax/profile/link_disabled_in_viewas.php';lb='dialog';db=null;}var mb=gb?z.MenuType.EDIT:z.MenuType.CLOSE;return (n.createElement(z,{ajaxify:kb,className:jb,'data-testid':qa,onClick:db,rel:lb,tooltip:fb,menuData:eb,menuType:mb,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (n.createElement(ga,{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));},componentDidMount:function(){if(this.state.isHighlighting){var cb=o.findDOMNode(this),db=parseInt(this.props.comment.scrolltopoffset||0,10);i.loadModules(["UFIScrollHighlight"],function(eb){setTimeout(eb.actOn.bind(null,cb,db),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(cb,db){var eb=this.props,fb=this.state;return (cb.comment!==eb.comment||cb.showReplyLink!==eb.showReplyLink||cb.isFirst!==eb.isFirst||cb.isLast!==eb.isLast||cb.isFirstCommentComponent!==eb.isFirstCommentComponent||cb.isLastCommentComponent!==eb.isLastCommentComponent||cb.isFirstComponent!==eb.isFirstComponent||cb.isLastComponent!==eb.isLastComponent||cb.isFeatured!==eb.isFeatured||cb.hasPartialBorder!==eb.hasPartialBorder||db.wasHighlighted!==fb.wasHighlighted||db.isHighlighting!==fb.isHighlighting||db.markedAsSpamHere!==fb.markedAsSpamHere||db.isInlinePageDeleted!==fb.isInlinePageDeleted||db.isInlineBanned!==fb.isInlineBanned);},render:function(){var cb=this.props.comment,db=this.props.feedback,eb=cb.status===oa.DELETED,fb=cb.status===oa.LIVE_DELETED,gb=cb.status===oa.SPAM_DISPLAY;if(eb)return null;var hb=this.state.markedAsSpamHere,ib=this.state.isInlinePageDeleted,jb=this.props.hideAsSpamForPageAdmin,kb=this.state.isInlineBanned;if(cb.islive&&!this.state.loggedLiveUpdate){new m().setEvent('update_view').setUpdateType('comment').setCommentID(cb.id).log();this.setState({loggedLiveUpdate:true});}var lb=ab(cb),mb=!cb.status&&(cb.isunseen||cb.islocal);if(!cb.status&&db.lastseentime){var nb=cb.originalTimestamp||cb.timestamp.time;mb=mb||nb>db.lastseentime;}var ob=this.props.contextArgs.markedcomments;if(ob&&ob[cb.legacyid])mb=true;var pb=(this.props.isFirst?"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),qb=ka._("Comment"),rb=ka._("Comment reply"),sb=this.props.isReply?rb:qb;if(lb)if(ya){var tb=null,ub=null,vb=null,wb=null;if(jb){vb=kb?this._onUndoInlineBan:this._onInlineBan;if(ib){tb=ka._("You've deleted this comment so no one can see it.");}else if(hb){tb=ka._("\u0422\u0435\u043f\u0435\u0440\u044c \u044d\u0442\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0430 \u0438 \u0435\u0433\u043e \u0434\u0440\u0443\u0437\u0435\u0439.");wb=this._onDeleteSpam;ub=this._onMarkAsNotSpam;}}else if(hb){tb=ka._("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0441\u043a\u0440\u044b\u0442.");wb=this._onDeleteSpam;ub=this._onMarkAsNotSpam;}if(tb)return (n.createElement('div',{className:la(pb,"UFIRow UFIHide"),role:'article','aria-label':sb},n.createElement(ya,{notice:tb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:ub,onBanAction:vb,onDeleteAction:wb,isInlineBanned:kb,isInlinePageDeleted:ib,hideAsSpamForPageAdmin:jb,pageID:this.props.feedback.ownerid})));}else i.loadModules(["UFICommentRemovalControls.react"],(function(zb){ya=zb;setTimeout((function(){this.forceUpdate();}).bind(this));}).bind(this));var xb=la(pb,"UFIRow"+(' '+"UFIComment")+(za(cb)?' '+"UFICommentFailed":'')+(fb||gb?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(mb?' '+"UFIUnseenItem":'')),yb=this.renderComment();if(this.props.shouldLogVPVs&&!cb.islocal)yb=n.createElement(ba,{comment:cb,contextArgs:this.props.contextArgs},yb);return (n.createElement('div',{className:xb,role:'article','aria-label':sb,'data-testid':this.state.wasHighlighted?ra:null,'data-ft':this.props['data-ft']},yb));},renderComment:function(){var cb=this.props,db=cb.comment,eb=cb.permalink,fb=cb.feedback,gb=db.body?db.body.text:'',hb=aa.shallowCopyRanges(db.body&&db.body.ranges),ib=cb.authorProfiles[db.author],jb=db.status===oa.SPAM_DISPLAY,kb=db.status===oa.LIVE_DELETED,lb=!(jb||kb),mb=fb.canremoveall||db.hiddenbyviewer;gb=aa.getCommentTextWithTruncatedURIs(hb,gb);var nb=null,ob=null;if(!cb.isLocallyComposed&&!this.state.wasHighlighted){ob=da.commentTruncationLength;nb=da.commentTruncationMaxLines;}var pb=q.getTrackingInfo(q.types.SMALL_ACTOR_PHOTO),qb=q.getTrackingInfo(q.types.USER_MESSAGE),rb=null,sb=null,tb=null,ub=null;if(db.istranslatable&&db.translatedbody===undefined)rb=n.createElement('a',{href:'#',role:'button',title:j.SEE_TRANSLATION_TIP,className:"UFITranslateLink",onClick:(function(event){return this.context.dispatch(u.translate(db,event));}).bind(this)},j.SEE_TRANSLATION);if(db.translatedbody!==undefined)if(db.translatedbody!==null&&db.translatedbody.text!==''){ub=n.createElement('span',{className:"UFITranslateAttribution"},j.AUTOMATICALLY_TRANSLATED);var vb=aa.shallowCopyRanges(db.translatedbody.ranges),wb=db.translatedbody.text,xb=db.translatedbody.dir,yb=n.createElement('span',{key:'comment-body','data-ft':qb,dir:xb},n.createElement(r,{className:"UFICommentBody",interpolator:aa.getCommentBodyInterpolator(cb.feedback.grouporeventid),ranges:vb,text:wb,renderEmoticons:ca.renderEmoticons,renderEmoji:ca.renderEmoji}));sb=yb;}else tb=n.createElement('span',{className:"UFITranslationErrorText"},j.NO_TRANSLATION_AVAILABLE);var zb=n.createElement(y,{socialContext:db.socialcontext,commentText:gb,commentRanges:hb,groupOrEventID:fb.grouporeventid,maxLength:ob,maxLines:nb,markViewerHasInteracted:this.props.markViewerHasInteracted}),ac=cb.contextArgs.viewas?null:k.constructEndpointWithGroupLocationAndExtraParams(ib,fb.grouporeventid,fa.UFI,db.isauthorweakreference,{on_public_ufi:fb.ispublic}).toString(),bc=n.createElement(x,{author:ib,authorProfiles:cb.authorProfiles,showHovercard:!!ac,isAuthorWeakReference:db.isauthorweakreference,isAdminViewer:cb.feedback.isadminviewer,focusOnMount:cb.focusOnMount,groupOrEventID:fb.grouporeventid,isFeatured:cb.isFeatured,socialContext:db.socialcontext,isPublic:fb.ispublic}),cc=null;if(db.photo_comment_status)cc=n.createElement('div',{className:"_50f8"},db.photo_comment_status);var dc=null;if(db.sticker_attachment_status)dc=n.createElement('div',{className:"_50f8"},db.sticker_attachment_status);var ec=n.createElement(w,{comment:cb.comment}),fc=n.createElement(s,{actorID:db.author});if(ib.uri||ib.isBusinessPersona)fc=n.createElement('a',{'data-ft':pb,'data-hovercard':ac,href:aa.annotateProfileURIIfPublic(fb.ispublic,ib.uri)},fc);var gc=false;switch(cb.orderingMode){case da.UFICommentOrderingMode.RANKED_THREADED:case da.UFICommentOrderingMode.FILTERED:gc=true;}var hc=null,ic=cb.contextArgs.ownerName;if(gc&&this.props.comment.id===fb.pinnedcommenttoken){var jc=ic?ka._("{post owner name} \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u043b(-\u0430) \u044d\u0442\u043e\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0441\u0432\u0435\u0440\u0445\u0443",[ka.param('post owner name',ic)]):ka._("The person who posted pinned this comment to the top");hc=n.createElement(p,{position:'above',tooltip:jc},n.createElement(l,{className:'UFIPinnedCommentGlyph',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pushpin_16_bluegray-10.png")}));}return (n.createElement(ea,{spacing:'medium'},fc,n.createElement('div',{className:'UFICommentContentBlock'},n.createElement('div',{className:'UFICommentContent'},bc,hc,zb,rb,n.createElement('div',{className:"UFITranslatedText"},sb,ub),tb,ec),cc,dc,n.createElement(v,{comment:db,feedback:fb,parentCanComment:cb.parentCanComment,permalink:eb,viewerCanMarkNotSpam:mb,showPermalink:cb.showPermalink,showReplyLink:cb.showReplyLink,contextArgs:cb.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:cb.hideAsSpamForPageAdmin}),lb?this._renderCloseButton():null),lb?this._renderFakeCloseButton():null));}});f.exports=bb;},null);
__d('UFICommentDisabledNotice.react',['React','TextWithEntities.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes;function k(m,n){return (h.createElement('a',{href:n.entity.url,target:'_blank'},m));}var l=h.createClass({displayName:'UFICommentDisabledNotice',propTypes:{feedback:j.object.isRequired},render:function(){var m=this.props.feedback,n=m.commentdisablednotice,o=h.createElement('div',{className:'UFINotice'},h.createElement(i,{interpolator:k,ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return (h.createElement('div',{className:'UFIRow'},o));}});f.exports=l;},null);
__d('UFICommentHeader.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'UFICommentHeader',render:function(){return (h.createElement('h6',babelHelpers._extends({},this.props,{className:"accessible_elem"}),j._("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438")));}});f.exports=k;},null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFICommentScrollableArea',propTypes:{contextArgs:j.object},render:function(){var l=this.props,m=l.children,n=l.contextArgs;if(n.scrollcomments&&n.scrollwidth)return (h.createElement(i,{width:n.scrollwidth},h.createElement('div',null,m)));return m;}});f.exports=k;},null);
__d('CommentsTimeSpentTracker.react',['Banzai','BanzaiLogger','Event','OnVisible.react','React','SubscriptionsHandler','UserActivity','invariant','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes,r=l.createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new m(),propTypes:{orderingMode:q.string.isRequired,targetFBID:q.string.isRequired,viewerHasInteracted:q.bool.isRequired,timeToConsiderViewerInactiveMillis:q.number,pollViewerActivityIntervalMillis:q.number},getDefaultProps:function(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function(){return (l.createElement(k,{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function(){if(this.firstVisibleTime&&this.isMounted()){var s=this._getTimeInSeconds();if(s>this.firstVisibleTime)i.log('CommentsTimeSpentLoggerConfig',{viewer_has_interacted:this.props.viewerHasInteracted,ordering_mode:this.props.orderingMode,post_fbid:this.props.targetFBID,start_time:this.firstVisibleTime,end_time:s,time_spent_id:p});this.firstVisibleTime=0;}},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){this.listeners.addSubscriptions(h.subscribe(h.SHUTDOWN,this.finishInterval),j.listen(window,'blur',this.finishInterval),j.listen(window,'focus',this._checkVisibility));},componentWillUnmount:function(){this.finishInterval();this.listeners.release();},componentDidUpdate:function(){this._checkVisibility();},_getTimeInSeconds:function(){return Math.floor(Date.now()/1000);},_checkVisibility:function(){if(this.isMounted()){!(this.refs.onVisibleElement!==null)?o(0):undefined;this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function(){if(this.firstVisibleTime===0)return;if(n.isActive(this.props.timeToConsiderViewerInactiveMillis)){setTimeout((function(){this._checkForIdleViewer();}).bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();n.subscribeOnce((function(){if(this.isMounted())this._checkVisibility();}).bind(this));}}});f.exports=r;},null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','throttle'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'UFISeenTracker',getInitialState:function(){return {seen:false};},render:function(){return this.state.seen?this.props.children:j.createElement(i,{onVisible:k(this.logSeen,100,this)},this.props.children);},logSeen:function(){this.setState({seen:true});h.bumpEntityKey('unsampled_feedback','rendered_ufi_client');}});f.exports=l;},null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'UFIComponentLogger',propTypes:{feedback:l.object.isRequired,hasComments:l.bool.isRequired,isPermalink:l.bool.isRequired,orderingMode:l.string.isRequired,viewerHasInteractedWithComments:l.bool.isRequired},render:function(){var n=this.props,o=n.children,p=n.feedback,q=n.hasComments,r=n.isPermalink,s=n.orderingMode,t=n.viewerHasInteractedWithComments;if(!o)return null;var u=i.createElement('div',null,o);if(q&&k.logCommentsTimespent){var v=t||r;u=i.createElement(h,{orderingMode:s,viewerHasInteracted:v,targetFBID:p.commentstargetfbid},u);}if(k.logWhetherUFISeen)u=i.createElement(j,null,u);return u;}});f.exports=m;},null);
__d('UFIComponents',['React','UFICommentFilters'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=function(m){if(!m)return false;if(m.props.comment&&i.isDeleted(m.props.comment))return false;return true;},k=function(m,n,o){var p,q=o?m.length-1:0,r=o?-1:m.length,s=o?-1:1;for(p=q;p!=r;p+=s)if(j(m[p])){n(m,p);return m;}return m;},l={applyToUFIComponents:function(m,n,o){m=k(m,function(p,q){p[q]=h.cloneElement(p[q],n);},false);m=k(m,function(p,q){p[q]=h.cloneElement(p[q],o);},true);return m;}};f.exports=l;},null);
__d('UFIContainer.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createElement('div',{className:'UFIArrow',role:'presentation'},h.createElement('i',null)),l=h.createClass({displayName:'UFIContainer',propTypes:{hasNub:j.bool,isParentLiveDeleted:j.bool,isReplyList:j.bool},render:function(){var m=(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),n=h.createElement('div',{className:m},this.props.hasNub?k:null,this.props.children);return n;}});f.exports=l;},null);
__d('UFIInlineShareConfirmation.react',['React','UFIImageBlock.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=[l.object,l.string],n=h.createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:l.bool.isRequired,isFirstComponent:l.bool,isLastComponent:l.bool,message:l.oneOfType(m).isRequired},render:function(){var o=k("UFIRow"+(' '+"UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''));return (h.createElement('div',{className:o},h.createElement(i,null,h.createElement('i',{className:'UFIConfirmationIcon',role:'presentation'}),this._getText())));},_getText:function(){if(this.props.message.__html)return h.createElement('span',{dangerouslySetInnerHTML:this.props.message});return h.createElement('span',null,this.props.message);}});f.exports=n;},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes;function r(t,u,v,w){if(w.count!=null){var x=k.LIKES,y={id:t.targetfbid,actorid:t.actorid},z=[],aa;for(var ba=0;ba<u.length;ba++)if(!u[ba].count){aa=u[ba];var ca=aa.entity;z.push(ca.id);}var da=new n('/ajax/like/tooltip.php').setQueryData({comment_fbid:t.targetfbid,comment_from:t.actorforpost,seen_user_fbids:z.length?z:true});da=h.create(da,t.actorforpost);var ea,fa;if(t.displayreactions){ea=p.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();ea=h.create(ea,t.actorforpost);fa=o.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();fa=h.create(fa,t.actorforpost);}else{ea=j.constructDialogURI(x,y).toString();fa=j.constructPageURI(x,y).toString();}return (l.createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:ea,href:fa,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':da.toString(),role:'button'},v));}else{var ga={source_feedback_owner_id:t.ownerid,source_feedback_identifier:t.entidentifier};return i(v,w,null,null,'ufi',ga);}}var s=l.createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:q.object.isRequired,feedback:q.object.isRequired,likeSentenceData:q.object.isRequired},render:function(){var t=this.props.feedback,u=this.props.likeSentenceData,v,w=u.aggregatedranges||u.aggregated_ranges;v=r;v=v.bind(null,t,u.ranges);return (l.createElement(m,{interpolator:v,ranges:u.ranges,aggregatedRanges:w,text:u.text}));}});f.exports=s;},null);
__d('UFILikeSentence.react',['Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIImageBlock.react','UFILikeSentenceText.react','UFIStoryAction','UFIReactionsSocialSentence.react','URI','cx','invariant','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=l.PropTypes,w=l.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:v.object.isRequired,feedback:v.object.isRequired,isFirstComponent:v.bool,isLastComponent:v.bool,onOrderingModeChange:v.func,showOrderingModeSelector:v.bool},contextTypes:{dispatch:v.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(x){this._bootloadSelectorModule(x);},_bootloadSelectorModule:function(x){if(x.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var y=(function(z){this.setState({selectorModule:z});}).bind(this);!!x.contextArgs.entstream?s(0):undefined;h.loadModules(["UFIOrderingModeSelector.react"],y);this.setState({bootloadedSelectorModule:true});}},render:function(){var x=this.props.feedback,y=x.likesentences.current||{},z=this.props.contextArgs.entstream,aa=t("UFIRow"+(x.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":'')),ba=null,ca=null;if(this.props.contextArgs.hasReactions){ca=l.createElement(p,{feedback:x});}else if(y.text)ca=l.createElement('div',{className:"UFILikeSentenceText"},l.createElement(n,{contextArgs:this.props.contextArgs,feedback:x,likeSentenceData:y}));var da=ca,ea=null;if(x.seencount>0&&!z){var fa=k.GROUP_MESSAGE_VIEWERS,ga={id:x.targetfbid},ha=j.constructDialogURI(fa,ga),ia=j.constructPageURI(fa,ga),ja=new q('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:x.entidentifier,displayed_count:x.seencount}),ka;if(x.seenbyall){ka=u._("\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u0432\u0441\u0435\u043c\u0438");}else ka=x.seencount==1?u._("\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e 1 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c"):u._("\u0412\u0438\u0434\u0435\u043b\u0438: {count}",[u.param('count',x.seencount)]);ea=l.createElement('a',{rel:'dialog',ajaxify:ha.toString(),href:ia.toString(),'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-uri':ja.toString(),className:"UFISeenCount"+(!!y.text?' '+"UFISeenCountRight":'')},l.createElement('span',{className:'UFISeenCountIcon'}),ka);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var la=this.state.selectorModule;ea=l.createElement(la,{entstream:z,feedback:x,onOrderChanged:(function(na){return this.context.dispatch(o.changeOrderingMode(na));}).bind(this)});if(!da)da=l.createElement('div',null);}var ma=null;if(ba&&ca){ma=l.createElement(m,null,ba,ca,ea);}else if(da){ma=l.createElement(i,{direction:i.DIRECTION.right},da,ea);}else ma=ea;return (l.createElement('div',{className:aa},ma));}});f.exports=w;},null);
__d('UFIPager.react',['LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFIPager',propTypes:{contextArgs:n.object.isRequired,pagerLabel:n.string.isRequired,'data-ft':n.string,countSentence:n.string,isFirstCommentComponent:n.bool,isFirstComponent:n.bool,isLastCommentComponent:n.bool,isLastComponent:n.bool,isLoading:n.bool,isReply:n.bool,isUnseen:n.bool,onPagerClick:n.func},onPagerClick:function(p){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();p.nativeEvent.prevent();},render:function(){var p=this.onPagerClick,q=m("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),r=null;if(this.props.isLoading)r=i.createElement(k,{className:'mls',background:'light',size:'small'});var s=i.createElement('a',{className:'UFIPagerLink',onClick:p,href:'#',role:'button'},this.props.pagerLabel,r),t="fcg"+(' '+"UFIPagerCount"),u=i.createElement('span',{className:t},this.props.countSentence),v,w=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||!this.props.isReply){v=i.createElement(h,{direction:h.DIRECTION.right},s,u);}else v=i.createElement(j,null,i.createElement('a',{className:'UFIPagerIcon',onClick:p,href:'#',role:'button'}),s,u);return (i.createElement('div',{className:q,'data-ft':this.props['data-ft']},v));}});f.exports=o;},null);
__d('UFIPagerGenerator',['NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.UFIPaging,s={isBottomPager:function(t,u){return k.inverted(u)&&!t;},needsStartOfRangePager:function(t){return t>0;},renderPagers:function(t,u,v,w,x){var y=t.deletedCounts[u],z=t.commentCounts[u],aa=z-y,ba=w-y,ca=l.numberDelimiter,da=u!==t.contextArgs.ftentidentifier,ea,fa=this.isBottomPager(da,t.orderingMode),ga={topPager:null,bottomPager:null};!!isNaN(aa)?q(0):undefined;!!isNaN(ba)?q(0):undefined;var ha=t.ranges[u],ia=ha.isLoadingPrev(),ja=ha.isLoadingNext(),ka={delimiter:ca,count:0},la=t.feedback.commentsentenceinfo;if(la){ka.commenters=la.explicit_commenter_names;ka.othersCount=la.other_commenter_count;}var ma=v+w==z;if(z<t.contextArgs.pagesize&&ma||ba===0){ea=Math.min(z,t.contextArgs.pagesize);var na=function(){return x(fa?r.BOTTOM:r.TOP,{offset:z-ea,length:ea});},oa;if(ba===0){if(aa==1){oa=o.VIEW_ONE;}else{ka.count=aa;oa=o.VIEW_ALL;}}else if(aa-ba==1){oa=o.VIEW_ONE_MORE;}else{oa=o.VIEW_MORE_EXPLICIT;ka.count=aa-ba;}var pa=j.getTrackingInfo(j.types.VIEW_ALL_COMMENTS),qa=o.getLabel(oa,da,t.feedback.isqanda,ka),ra=i.createElement(n,{key:'allPager'+u,ref:fa?'topLevelBottomPager':null,contextArgs:t.contextArgs,isUnseen:t.feedback.hasunseencollapsed,isLoading:ia,isReply:da,pagerLabel:qa,onPagerClick:na,'data-ft':pa});if(fa){ga.bottomPager=ra;}else ga.topPager=ra;return ga;}var sa=o.getLabel(o.VIEW_MORE,da,t.feedback.isqanda,ka),ta=o.getLabel(o.VIEW_PREVIOUS,da,t.feedback.isqanda,ka);if(this.needsStartOfRangePager(v)){var ua=Math.max(v-t.contextArgs.pagesize,0);ea=v+w-ua;var va;if(!da||ba>1){var wa=h.formatIntegerWithDelimiter(ba,ca),xa=h.formatIntegerWithDelimiter(aa,ca);va=p._("{countshown} \u0438\u0437 {totalcount}",[p.param('countshown',wa),p.param('totalcount',xa)]);}var ya=function(){return x(fa?r.BOTTOM:r.TOP,{offset:ua,length:ea});};if(fa){ga.bottomPager=i.createElement(n,{key:'bottomPager'+u,ref:!da?'topLevelBottomPager':null,contextArgs:t.contextArgs,isLoading:ia,isReply:da,pagerLabel:sa,onPagerClick:ya,countSentence:va});}else ga.topPager=i.createElement(n,{key:'topPager'+u,contextArgs:t.contextArgs,isLoading:ia,isReply:da,pagerLabel:ta,onPagerClick:ya,countSentence:va});}if(v+w<z){ea=Math.min(t.contextArgs.pagesize,z-v);var za=function(){return x(fa?r.TOP:r.BOTTOM,{offset:v,length:ea});};if(fa){ga.topPager=i.createElement(n,{key:'topPager'+u,contextArgs:t.contextArgs,isLoading:ja,isReply:da,pagerLabel:ta,onPagerClick:za});}else ga.bottomPager=i.createElement(n,{key:'bottomPager',ref:!da?'topLevelBottomPager':null,contextArgs:t.contextArgs,isLoading:ja,isReply:da,pagerLabel:sa,onPagerClick:za});}return ga;}};f.exports=s;},null);
__d('UFIReplySocialSentence.react',['Badge.react','Image.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','UFIMiddot.react','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=k.PropTypes,t=43200,u=k.createClass({displayName:'UFIReplySocialSentence',propTypes:{author:s.object,contextArgs:s.object.isRequired,'data-ft':s.string,isExpanded:s.bool,isFirstComponent:s.bool,isLastComponent:s.bool,isLoading:s.bool,onClick:s.func,orderingMode:s.string,replies:s.number,showVerified:s.bool,timestamp:s.object},render:function(){var v=this.props.isLoading?"UFIReplySocialSentenceLoading":'',w=q("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),x,y;if(this.props.isExpanded){x=this.props.replies>1?r._({"*":"\u0421\u043a\u0440\u044b\u0442\u044c {count} \u043e\u0442\u0432\u0435\u0442\u043e\u0432","268435456":"\u0421\u043a\u0440\u044b\u0442\u044c {count} \u043e\u0442\u0432\u0435\u0442","536870912":"\u0421\u043a\u0440\u044b\u0442\u044c {count} \u043e\u0442\u0432\u0435\u0442\u0430"},[r.param('count',this.props.replies,[0])]):r._("\u0421\u043a\u0440\u044b\u0442\u044c 1 \u043e\u0442\u0432\u0435\u0442");}else{x=this.props.replies>1?r._({"*":"{count} \u043e\u0442\u0432\u0435\u0442\u043e\u0432","268435456":"{count} \u043e\u0442\u0432\u0435\u0442","536870912":"{count} \u043e\u0442\u0432\u0435\u0442\u0430"},[r.param('count',this.props.replies,[0])]):r._("1 \u043e\u0442\u0432\u0435\u0442");if(this.props.timestamp){var z=j.getApproximateServerTime()/1000-this.props.timestamp.time;if(z<t||this.props.orderingMode==m.UFICommentOrderingMode.RECENT_ACTIVITY)y=k.createElement('span',{className:"fcg"},k.createElement(o,{key:'middot-timestamp'}),k.createElement(l,{shorten:this.props.contextArgs.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var aa=this.props.author,ba=aa&&!this.props.isExpanded,ca=null,da;if(ba){ca=k.createElement(i,{alt:'',src:aa.thumbSrc,className:"img UFIActorImage _54ru"});var ea=null;if(this.props.showVerified)ea=k.createElement(h,{size:'xsmall',type:'verified'});da=[r._("{author}{verified_badge} \u043e\u0442\u0432\u0435\u0442\u0438\u043b(-\u0430)",[r.param('author',aa.name),r.param('verified_badge',ea)]),k.createElement(o,{key:'middot-author'}),x];}else da=x;return (k.createElement('div',{className:w,'data-ft':this.props['data-ft']},k.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},k.createElement(n,null,k.createElement('div',{className:(ba?"UFIReplyActorPhotoWrapper":'')+(ba?' '+"UFIReplyActor":'')},k.createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(ba?' '+"UFIIconWithActor":'')}),ca),k.createElement('span',{className:v},k.createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},da),y)))));}});f.exports=u;},null);
__d('UFIShareRowCommentCount.react',['ActorURI','NumberFormat','React','XUFICommentTooltipController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=j.PropTypes;n=babelHelpers.inherits(q,j.Component);o=n&&n.prototype;q.prototype.$UFIShareRowCommentCount1=function(){var r=this.props.commentCount,s=r==1;if(typeof r==='number')r=i.formatInteger(r);return m._({"comment":"{count (could be abbreviated, such as '3.2k')} \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439","comments":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: {count (could be abbreviated, such as '3.2k')}"},[m.param('count (could be abbreviated, such as \'3.2k\')',r),m['enum'](s?'comment':'comments',{comment:'comment',comments:'comments'})]);};q.prototype.render=function(){var r=this.$UFIShareRowCommentCount1(),s="_2w0q";if(this.props.useTooltip){var t=h.create(k.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (j.createElement('span',{'aria-live':'polite',className:s,'data-hover':'tooltip','data-tooltip-uri':t},r));}else return j.createElement('span',{className:s},r);};function q(){n.apply(this,arguments);}q.propTypes={feedback:p.object.isRequired,commentCount:p.oneOfType([p.number,p.string]).isRequired,useTooltip:p.bool};f.exports=q;},null);
__d('UFIShareRow.react',['Layout.react','NumberFormat','React','UFIConfig','UFIImageBlock.react','UFIShareRowCommentCount.react','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=h.Column,s=h.FillColumn,t=j.PropTypes,u=j.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:t.object.isRequired,feedback:t.object.isRequired,isFirstComponent:t.bool,isLastComponent:t.bool,shownCommentCount:t.oneOfType([t.number,t.string]),includeCommentCountTooltip:t.bool},_renderCommentCount:function(){var v=this.props,w=v.feedback,x=v.includeCommentCountTooltip,y=v.shownCommentCount;if(y&&y!=0)return (j.createElement(m,{feedback:w,commentCount:y,useTooltip:x}));return null;},render:function(){var v=new n('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid}),w=new n('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid}),x;if(this.props.feedback.sharecount>1){var y=i.formatIntegerWithDelimiter(this.props.feedback.sharecount,k.numberDelimiter);x=q._({"*":"{count} \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0439","268435456":"{count} \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f","536870912":"{count} \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"},[q.param('count',y,[0,this.props.feedback.sharecount])]);}else x=q._("1 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f");var z=p("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),aa=j.createElement('a',{className:'UFIShareLink',rel:'dialog',ajaxify:v.toString(),href:w.toString()},x),ba=this._renderCommentCount();if(ba)aa=j.createElement(h,null,j.createElement(s,null,aa),j.createElement(r,null,ba));return (j.createElement('div',{className:z},aa));}});f.exports=u;},null);
__d('UFISpamPlaceholder.react',['React','XUISpinner.react','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func},render:function(){if(this.props.isLoading)return (h.createElement('div',{className:'UFIRow'},h.createElement('span',{className:'UFISpamCommentWrapper'},h.createElement(i,{className:'mls',background:'light',size:'small'}))));return (h.createElement('div',{className:'UFIRow'},h.createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':j._("\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u043a \u0441\u043f\u0430\u043c")},h.createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','aria-label':j._({"*":"{count} \u0441\u043a\u0440\u044b\u0442\u043e"},[j.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},h.createElement('i',{className:'placeholderIcon'})))));}});f.exports=l;},null);
__d('UFISpamStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.getInitialState=function(){return {};};n.prototype.areEqual=function(o,p){return Object.keys(o).length===Object.keys(p).length;};n.prototype.reduce=function(o,p){switch(p.type){case i.STORY.SPAM_FETCHED:o=babelHelpers._extends({},o);p.commentIDs.forEach(function(q){return (o[q]=true);});k.fetchSpamComments(p.ftentidentifier,p.commentIDs,p.parentCommentID,p.viewas);break;}return o;};function n(){l.apply(this,arguments);}f.exports=new n(j);},null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';n=babelHelpers.inherits(p,i.Component);o=n&&n.prototype;p.getStores=function(){return [l];};p.calculateState=function(q,r){var s=r.ftentidentifier,t=r.viewas,u=r.comment,v=r.parentCommentID;return {isLoading:!!l.getState()[u.id],numHidden:u.spamCommentIDs.length,onClick:function(){return j.dispatch(m.spamFetched(s,t,u.spamCommentIDs,v));}};};p.prototype.shouldComponentUpdate=function(q,r){return q.ftentidentifier!=this.props.ftentidentifier||q.viewas!=this.props.viewas||q.parentCommentID!=this.props.parentCommentID||r.isLoading!=this.state.isLoading||r.numHidden!=this.state.numHidden;};p.prototype.render=function(){return i.createElement(k,this.state);};function p(){n.apply(this,arguments);}f.exports=h.create(p,{pure:true,withProps:true});},null);
__d('StaticUFI.react',['Arbiter','BlueBar','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMScroll','Event','FbFeedCommentUFIScroller','FBFeedLocations','JSResource','LogHistory','Parent','React','ReactDOM','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentFilters','UFICommentHeader.react','UFICommentOrdering','UFICommentDisabledNotice.react','UFICommentScrollableArea.react','UFIComponentLogger.react','UFIComponents','UFIConfig','UFIConstants','UFIContainer.react','UFIInlineShareConfirmation.react','UFIInstanceState','UFILikeSentence.react','UFIPagerGenerator','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','URI','XUISpinner.react','cx','dotAccess','focusWithinLayer','getElementPosition','getUnboundedScrollPosition','isEmpty','shallowEqual','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db){'use strict';if(c.__markCompiled)c.__markCompiled();var eb=ka.UFIFeedbackSourceType,fb=ka.UFIStatus,gb=u.PropTypes,hb=u.createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},u.createElement(va,{size:'large'})),ib=u.createClass({displayName:'StaticUFI',contextTypes:{dispatch:gb.func},getInitialState:function(){var jb=this.props.focusReply;return {focusReply:jb,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},inlineShare:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,viewerHasInteractedWithComments:false,loadingSpamIDs:{}};},componentDidMount:function(){if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var jb=db(this.loadMoreComments,20);this._scrollEventListener=o.listen(window,'scroll',jb);this._resizeEventListener=o.listen(window,'resize',jb);}this._resolveFocus();},componentWillReceiveProps:function(jb){if(this.props.focusReply!==jb.focusReply)this.setState({focusReply:jb.focusReply});this.setState({oldBoundingClientRect:v.findDOMNode(this).getBoundingClientRect()});},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},shouldComponentUpdate:function(jb,kb){var lb=this.props,mb=this.state;return (!cb(mb,kb)||!cb(mb.loadingSpamIDs,kb.loadingSpamIDs)||!cb(lb,jb)||!cb(lb.feedback,jb.feedback)||!cb(lb.repliesMap,jb.repliesMap)||!cb(lb.commentCounts,jb.commentCounts)||!cb(lb.deletedCounts,jb.deletedCounts)||!cb(lb.availableComments,jb.availableComments)||!cb(lb.ranges,jb.ranges)||!cb(lb.authorProfiles,jb.authorProfiles)||!cb(lb.commentPermalinks,jb.commentPermalinks)||!cb(lb.canAddCommentMap,jb.canAddCommentMap)||!cb(lb.canReplyMap,jb.canReplyMap)||!cb(lb.inlineShare,jb.inlineShare)||!cb(lb.isActiveLoading,jb.isActiveLoading)||!cb(lb.repliesExpandedMap,jb.repliesExpandedMap));},componentDidUpdate:function(jb,kb){var lb=jb.source===eb.NEWS_FEED,mb=lb?this._getOffsetOfRender():null;this._resolveFocus(jb);h.inform('ufi/didUpdate',{offsetY:mb});},_getOffsetOfRender:function(jb,kb){var lb=this.state.oldBoundingClientRect,mb=za(i.getMaybeFixedRoot()).height;if(i.hasFixedBlueBar()&&lb.bottom<mb)return v.findDOMNode(this).offsetHeight-lb.height;return null;},_resolveFocus:function(jb){if(this.props.inlineShare.toggling){var kb=jb&&jb.inlineShare||{};l.expand(v.findDOMNode(this),false,'ufi.react');if(!kb.active&&!this.props.inlineShare.active)this.onComment();var lb=this.props.inlineShare.active;if(lb){var mb=!kb.loaded;setTimeout((function(){return this._focusInlineShare({shouldHighlight:mb});}).bind(this),10);}na.updateStateField(this.props.contextArgs.instanceid,'inlineShare','toggling',false);}if(this.state.focusReply){var nb=this.state.focusReply,ob=nb.replyID,pb=nb.initiatorComment;if(!(ob in this.refs))return;var qb=this.refs[ob]&&this.refs[ob].refs&&this.refs[ob].refs.mentionsinput;if(!qb)return;qb.focus();this.setState({focusReply:null});if(!pb)return;var rb=qb.hasEnteredText(),sb=pb.author===this.props.feedback.actorforpost,tb=!!pb.parentcommentid;if(!rb&&!sb&&tb)qb.insertMention(this._createMentionEntry(pb.author));}},_createMentionEntry:function(jb){var kb=this.props.authorProfiles[jb],lb=kb.type;return new w({uniqueID:kb.id,title:kb.name,type:lb==='friend'?'user':lb});},_isAds:function(){return this.props.source===eb.ADS;},_showLikeSentenceOrderingModeSelector:function(){var jb=this.props,kb=jb.hideOrderingModeSelector,lb=jb.feedback,mb=jb.commentCounts,nb=jb.contextArgs;return (!kb&&lb.orderingmodes&&mb[nb.ftentidentifier]>=ka.minCommentsForOrderingModeSelector);},_hasLikeSentenceRow:function(){var jb=this.props,kb=jb.contextArgs,lb=jb.feedback;if(this._isAds()||kb.search||this.hasReactions(lb,kb))return false;var mb=lb.likesentences,nb=lb.reactionsentences;return (mb&&!bb(mb.current)||xa(lb,'reactionsentences.current.text',null)||lb.seencount>0&&!kb.entstream||this._showLikeSentenceOrderingModeSelector());},_hasShares:function(){var jb=this.props,kb=jb.contextArgs,lb=jb.feedback;if(this._isAds())return false;return (kb.showshares&&lb.sharecount&&!this.hasReactions(lb,kb));},_hasShareRow:function(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var jb=this.props.availableComments;return !!(jb&&jb.length);},_hasAddCommentView:function(){var jb=this.props,kb=jb.canAddCommentMap,lb=jb.contextArgs,mb=jb.feedback;return (mb.cancomment&&lb.showaddcomment&&mb.actorforpost&&kb[lb.ftentidentifier]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.props.hasPagedToplevel);},_hasAddCommentDisabledNotice:function(){var jb=this.props.feedback;return jb.arecommentsdisabled===true&&jb.cancomment===false;},_renderShareRow:function(){if(!this._hasShareRow())return null;var jb=this.props,kb=jb.commentCounts,lb=jb.contextArgs,mb=jb.deletedCounts,nb=jb.feedback,ob=lb.isPermalink,pb=lb.hasReactions,qb=lb.ftentidentifier,rb=nb.commentcountreduced,sb=null,tb=false;if(this._hasComments()&&ob&&!pb&&ja.permalinkShareRowShowCommentCount){if(rb&&isNaN(rb)){sb=rb;}else if(kb&&mb&&qb&&qb in kb&&qb in mb)sb=kb[qb]-mb[qb];tb=!!(sb&&ja.permalinkShareRowCommentCountTooltip);}return (u.createElement(ra,{contextArgs:lb,feedback:nb,shownCommentCount:sb,includeCommentCountTooltip:tb}));},render:function(){var jb=this.props,kb=jb.feedback,lb=jb.contextArgs,mb=this._hasLikeSentenceRow(),nb=this._hasAddCommentDisabledNotice(),ob=this._hasShares(),pb=jb.inlineShare.message?u.createElement(ma,jb.inlineShare):null,qb=null;if(mb)qb=u.createElement(oa,{contextArgs:jb.contextArgs,feedback:jb.feedback,showOrderingModeSelector:this._showLikeSentenceOrderingModeSelector()});var rb=nb?u.createElement(fa,{feedback:jb.feedback}):null,sb=this._renderShareRow();if(jb.loadingComments)return (u.createElement(la,{hasNub:false},pb,qb,sb,hb));var tb=this._hasComments(),ub=jb.ranges[lb.ftentidentifier],vb=jb.loggingOffset-ub.getOffset(),wb=tb?this.renderCommentArray(jb.availableComments,vb,false,null):null,xb=null,yb=kb.cancomment,zb=mb||ob||tb||yb,ac=zb?u.createElement(da,null):null;if(this._hasAddCommentView()){lb.orderingmodes=kb.orderingmodes;var bc=!this._shouldShowCommentInput(lb,tb);if(!bc)xb=u.createElement(z,{viewerActorID:kb.actorforpost,replyCommentID:null,targetID:kb.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:kb.mentionsdatasource,showSendOnEnterTip:kb.showsendonentertip,allowPhotoAttachments:kb.allowphotoattachments&&!lb.isstreaming,allowStickerAttachments:kb.allowstickerattachments&&!lb.isstreaming,contextArgs:lb,subtitle:kb.subtitle,isQAndA:kb.isqanda,markViewerHasInteracted:(function(){if(!this.state.viewerHasClickedCommentComposer)this.setState({viewerHasClickedCommentComposer:true});}).bind(this)});}var cc=this.renderPagers(lb.ftentidentifier,false,jb.ranges[lb.ftentidentifier].getOffset(),jb.ranges[lb.ftentidentifier].getLength()),dc=cc.topPager,ec=cc.bottomPager,fc=ia.applyToUFIComponents([dc].concat(wb,[ec]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),gc=fc.slice(0,1);dc=gc[0];var hc=fc.slice(-1);ec=hc[0];wb=fc.slice(1,-1);var ic=this._hasCommentOrderInverted()?xb:null,jc=this._hasCommentOrderInverted()?null:xb,kc=this._hasAddCommentLink()?u.createElement(aa,{onClick:this.onComment,isQAndA:kb.isqanda}):null;fc=ia.applyToUFIComponents([pb,qb,sb,ic,dc].concat(wb,[ec,jc,kc]),{isFirstComponent:true},{isLastComponent:true});var lc=fc.slice(0,5);pb=lc[0];qb=lc[1];sb=lc[2];ic=lc[3];dc=lc[4];var mc=fc.slice(-3);ec=mc[0];jc=mc[1];kc=mc[2];wb=fc.slice(5,-3);if(jb.inlineShare.active){return (u.createElement(la,{hasNub:false},u.createElement(j,babelHelpers._extends({bootloadPlaceholder:u.createElement('span',null),bootloadLoader:r('ShareDialog.react')},jb.inlineShare.props,{onCancel:(function(){return this._resetInlineShare();}).bind(this),onPost:(function(nc){k.loadModules(["ShareDialogOsricController"],(function(oc){oc.onPost(nc,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}).bind(this));}).bind(this),ref:'inlineShare',renderInline:true,status:jb.inlineShare.status}))));}else return (u.createElement(la,{hasNub:!!(lb.shownub&&zb)},pb,qb,sb,ac,ic,u.createElement(ga,{contextArgs:lb},u.createElement(ha,{feedback:kb,hasComments:tb,isPermalink:lb.isPermalink,orderingMode:jb.orderingMode,viewerHasInteractedWithComments:this.props.viewerHasInteractedWithComments||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},dc,wb,ec)),jc,kc,rb));},_shouldShowCommentInput:function(jb){var kb=na.getKeyForInstance(jb.instanceid,'isediting');if(kb)return false;if(this._hasComments())return true;var lb=na.getKeyForInstance(jb.instanceid,'addCommentInput'),mb=lb?lb.expanded:false;if(mb)return true;if(jb.feedcontext)var nb=JSON.parse(jb.feedcontext).location_type;return nb!==q.REVIEWS_FEED;},_focusInlineShare:function(jb){jb=jb||{};var kb=v.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)ya(kb);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;n.ensureVisible(kb);if(jb.shouldHighlight)k.loadModules(["highlight","CSS","cx"],function(lb,mb,nb){mb.addClass(kb,"_5p5");var ob=function(){mb.removeClass(kb,"_5p5");};lb(kb,ob,'#f6f7f8');});},renderCommentArray:function(jb,kb,lb,mb){var nb=this.props,ob=nb.contextArgs;if(!jb.length)return [];var pb=na.getKeyForInstance(ob.instanceid,'editcommentid'),qb=ca.collectSpamBuckets(jb,nb.authorProfiles);return qb.reduce((function(rb,sb,tb){if(!sb)return rb;if(ca.isSpam(sb)){rb.push(u.createElement(sa,{key:'spam'+sb.id,ftentidentifier:ob.ftentidentifier,viewas:ob.viewas,comment:sb,parentCommentID:mb}));}else{if(sb.id==pb){rb.push(this.renderEditCommentBox(sb));}else{var ub=Math.max(kb-tb,0),vb=tb===0,wb=tb===qb.length,xb=!lb,yb=lb&&!vb;rb.push(this.renderComment(sb,ub,vb,wb,xb,yb));}if(!lb&&!ca.isDeleted(sb)){var zb=this.renderReplyContainer(sb);if(zb)rb.push(zb);}}return rb;}).bind(this),[]);},renderReplyContainer:function(jb){var kb=this.props,lb=kb.commentCounts[jb.id],mb=kb.repliesExpandedMap[jb.id],nb=!mb&&jb.interestingReplyId,ob=kb.ranges[jb.id],pb,qb;if(mb||jb.interestingReplyId){pb=kb.repliesMap[jb.id];qb=ob.getOffset();if(nb){var rb=pb.filter(function(mc){return mc.id===jb.interestingReplyId;});if(rb.length!==1){s.getInstance('ufi').error('comment '+jb.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');pb=null;}else{pb=rb;qb=jb.interestingReplyOffset;}}}var sb;if(pb){var tb=ob.getOffset(),ub=ob.getLength();if(nb){tb=qb;ub=1;}var vb=this.renderPagers(jb.id,true,tb,ub),wb=vb.topPager,xb=vb.bottomPager,yb=kb.loggingOffset-qb;sb=this.renderCommentArray(pb,yb,true,jb.id);}var zb=Math.max(lb-jb.spamreplycount,0),ac;if(zb&&(mb&&pb&&pb.length>kb.replySocialSentenceMaxReplies||!mb&&!pb)){var bc=ob.isLoadingPrev()||ob.isLoadingNext(),cc=mb&&!wb&&bc,dc=null;if(jb.replyauthors&&jb.replyauthors.length)dc=kb.authorProfiles[jb.replyauthors[0]];ac=u.createElement(qa,{contextArgs:kb.contextArgs,author:dc,replies:mb?pb.length:zb,timestamp:jb.recentreplytimestamp,onClick:(function(){return this.context.dispatch(ta.toggleReplies(jb.id));}).bind(this),isLoading:cc,isExpanded:mb,showVerified:kb.feedback.showfeaturedreplies,orderingMode:kb.orderingMode});}var ec;if(mb)if(jb.cancomment&&kb.canAddCommentMap[jb.id]){var fc=false;if(sb)for(var gc=sb.length-1;gc>=0;gc--)if(sb[gc]){fc=sb[gc].props.isAuthorReply;break;}ec=this.renderReplyComposer(jb,!fc);}var hc;if(ac||wb||sb||xb||ec){var ic=ia.applyToUFIComponents([ac,wb].concat(sb,[xb,ec]),{isFirstComponent:true},{isLastComponent:true}),jc=ic.slice(0,2);ac=jc[0];wb=jc[1];var kc=ic.slice(-2);xb=kc[0];ec=kc[1];sb=ic.slice(2,-2);var lc=jb.status===fb.LIVE_DELETED;hc=u.createElement(la,{key:'replies'+jb.id,isParentLiveDeleted:lc,isReplyList:true},ac,wb,sb,xb,ec);}return hc;},renderReplyComposer:function(jb,kb){var lb=this.props,mb=lb.contextArgs,nb=lb.feedback,ob=na.getKeyForInstance(mb.instanceid,'isediting')&&!jb.id;if(ob)return null;return (u.createElement(z,{viewerActorID:nb.actorforpost,replyCommentID:jb.id,targetID:nb.ownerid,initialData:null,ref:'replycomposer-'+jb.id,withoutSeparator:kb,editingComment:{},isEditing:false,mentionsDataSource:nb.mentionsdatasource,showSendOnEnterTip:false,allowPhotoAttachments:nb.allowphotoattachments&&!mb.isstreaming,allowStickerAttachments:nb.allowstickerattachments&&!mb.isstreaming,contextArgs:mb,subtitle:nb.subtitle,isQAndA:nb.isqanda}));},renderEditCommentBox:function(jb){var kb=this.props,lb=kb.contextArgs,mb=kb.feedback,nb={mentionsinput:lb.mentionsinput};return (u.createElement(z,{key:'comment'+jb.id,viewerActorID:mb.actorforpost,targetID:mb.ownerid,mentionsDataSource:mb.mentionsdatasource,contextArgs:nb,isEditing:true,editingComment:jb,allowPhotoAttachments:mb.allowphotoattachments,allowStickerAttachments:mb.allowstickerattachments,isQAndA:mb.isqanda}));},renderComment:function(jb,kb,lb,mb,nb,ob){var pb=this.props,qb=pb.feedback,rb=qb.actorforpost===jb.author,sb=na.getKeyForInstance(pb.contextArgs.instanceid,'locallycomposed'),tb=jb.islocal||sb&&sb[jb.id],ub=qb.showremovemenu||qb.viewerid===jb.author,vb=qb.canremoveall&&qb.isownerpage&&!rb,wb=pb.source!=eb.INTERN,xb=!!jb.parentcommentid,yb=true;if(xb&&jb.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[jb.parentcommentid]!==null)yb=this.props.canReplyMap[jb.parentcommentid];var zb=!!jb.isfeatured,ac=y.getTrackingInfo(y.types.COMMENT,kb),bc=new ua(pb.commentPermalinks[jb.id]).addQueryData({comment_tracking:ac}).toString();return (u.createElement(ba,{key:'comment'+jb.id,isFirst:lb,isLast:mb,showReplyLink:nb,hasPartialBorder:ob,comment:jb,authorProfiles:pb.authorProfiles,viewerIsAuthor:rb,feedback:qb,'data-ft':ac,contextArgs:pb.contextArgs,hideAsSpamForPageAdmin:vb,isLocallyComposed:tb,isReply:xb,isFeatured:zb,parentCanComment:yb,permalink:bc,showPermalink:wb,showRemoveReportMenu:ub,focusOnMount:jb.id===pb.commentIDToFocusOnMount,shouldLogVPVs:pb.shouldLogVPVs,orderingMode:pb.orderingMode,markViewerHasInteracted:(function(){if(!this.state.viewerHasClickedSeeMore)this.setState({viewerHasClickedSeeMore:true});}).bind(this)}));},renderPagers:function(jb,kb,lb,mb){var nb=this.props.commentCounts[jb],ob=mb==nb;if(ob||this._isAds()||!kb&&this.props.hideToplevelPager)return {topPager:null,bottomPager:null};return pa.renderPagers(this.props,jb,lb,mb,(function(pb,qb){return this.context.dispatch(ta.pageInComments(jb,pb,qb));}).bind(this));},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var jb=v.findDOMNode(this.refs.topLevelBottomPager),kb=ab(window).y,lb=kb+document.documentElement.clientHeight+ka.infiniteScrollRangeForQANDAPermalinks;if(jb.offsetHeight&&jb.offsetTop<lb)this.refs.topLevelBottomPager.props.onPagerClick();}},onComment:function(){var jb=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();jb=v.findDOMNode(this.refs.toplevelcomposer);}else{var kb=v.findDOMNode(this),lb=t.byTag(kb,'form');jb=this._findComposerNode(lb);if(!jb){var mb=t.byClass(kb,"_3g6d");jb=this._findComposerNode(mb);}jb&&jb.focus();}p.reveal(jb);},_findComposerNode:function(jb){return m.scry(jb,'[name="add_comment_text_text"]').concat(m.scry(jb,'[name="add_comment_text"]')).find(function(kb){return !t.byClass(kb,'UFIReplyList');});},_beforePostInlineShare:function(){na.updateStateField(this.props.contextArgs.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(jb){var kb=jb.payload.message||x.success;this._resetInlineShare({message:kb,isError:false});},_onInlineShareError:function(jb){var kb=jb.errorDescription||x.error;this._resetInlineShare({message:kb,isError:true});},_resetInlineShare:function(jb){na.updateState(this.props.contextArgs.instanceid,'inlineShare',jb||{});},_hasCommentOrderInverted:function(){return ea.inverted(this.props.orderingMode);},hasReactions:function(jb,kb){return (jb.displayreactions&&kb.hasReactions&&kb.feedbackMode==='none');}});f.exports=ib;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.__onDispatch=function(l){var m=l.type,n=babelHelpers.objectWithoutProperties(l,['type']);this.__emitter.emit(m,n);};k.prototype.on=function(l,m){return this.__emitter.addListener(l,m);};k.prototype.remove=function(){this.__emitter.removeAllListeners();};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('BaseGraphQLSubscription',['BanzaiLogger','CurrentUser','CurrentLocale','RTISubscriptionManager'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={subscribe:function(m,n){var o={transformContext:JSON.stringify(this._getTransformContext(m))};this._logEvent('subscribe');return k.subscribe(this._getTopic(m),function(p){n(JSON.parse(p.payload));},o);},_getTransformContext:function(m){var n=155160167952447;return {viewerID:i.getID(),appID:n,locale:j.get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(m))};},_logEvent:function(m){h.log('GraphQLSubscriptionsLoggerConfig',{mechanism:'skywalker',subscription_call:this._getSubscriptionCallName(),event:m});}};f.exports=l;},null);
__d("XWebGraphQLQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"String"},variables:{type:"String"}});},null);
__d("CommentLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1670967286459767";}};f.exports=i;},null);
__d('UFICommentLikeSubscription',['CommentLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),top_level_feedback_id:l})};},_getSubscriptionCallName:function(){return 'comment_like_subscribe';}});f.exports=k;},null);
__d("CommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1660573210832508";}};f.exports=i;},null);
__d('UFICommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'comment_create_subscribe';}});f.exports=k;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:j.instanceOf(i).isRequired,stores:j.object.isRequired},childContextTypes:{dispatch:j.func,stores:j.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=k;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelCommentList'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,i);k=j&&j.prototype;l.getCommentList=function(m,n){};l.getCommentListsForFeedbackTargetID=function(m){};l.getCommentListForFeedbackTargetID_UNSAFE=function(m){};l.resetCommentListsForFeedbackTargetID=function(m){};function l(m,n,o){k.constructor.call(this,m,h.UFICommentOrderingMode.FEATURED);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}l.prototype.fetchComments=function(m,n,o){};f.exports=l;},null);
__d('UFIFeedbackFilters',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRequestedIDs:function(i){var j=[];if(i.reactorids)j=j.concat(i.reactorids);if(i.actorforpost)j=j.concat(i.actorforpost);return j;}};f.exports=h;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1678388869050942";}};f.exports=i;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});},null);
__d('UFILiveStreamingComments',['AsyncRequest','BanzaiODS','Map','Set','UFICentralUpdates','UFIConfig','UFIConstants','UFIToplevelCommentList','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=new j();function t(v,w,x){this.eftID=v;this.totalCommentCount=w;this.tailCommentFBID=x;this.queue=[];this.localCommentBodies=new k();this.errorCount=0;this.interval=r((function(){if(this.queue.length>m.facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new h().setURI(this.getNextURI()).setHandler((function(y){switch(y.payload.status){case 'streaming':this.enqueueMoreComments(y.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':q(this.interval);return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)i.bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){i.bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');q(this.interval);return;}break;}}).bind(this)).send();}).bind(this),2000);l.subscribe('update-comments',(function(y,z){if(z.comments&&z.comments.length)z.comments.forEach((function(aa){if(aa.parentcommentid)return;if(aa.islocal)this.trackLocalComment(aa);}).bind(this));}).bind(this));}t.prototype.enqueueMoreComments=function(v){if(!v.ufipayloads||isNaN(v.commentcount))return;var w=v.ufipayloads.filter((function(z){return !this.resemblesLocalComment(z.comments[0]);}).bind(this)),x=-1;if(this.tailCommentFBID!==null)x=w.findIndex((function(z){return z.comments[0].fbid===this.tailCommentFBID;}).bind(this),this);if(x===-1){this.queue=w;}else this.queue=this.queue.concat(w.slice(x+1));if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;var y=v.commentcount-this.queue.length;if(y>this.totalCommentCount)this.totalCommentCount=y;if(m.showAccurateStreamingCommentCount)o.getCommentList(this.eftID,n.UFICommentOrderingMode.LIVE_STREAMING).updateOverriddenDisplayCount(this.totalCommentCount);};t.prototype.renderNextComment=function(){if(this.queue.length===0)return;l.handleUpdate(n.UFIPayloadSourceType.LIVE_SEND,this.queue.shift());};t.prototype.getNextURI=function(){return p.getURIBuilder().setString('eft_id',this.eftID).getURI();};t.prototype.trackLocalComment=function(v){var w=t.hashCommentData(v);this.localCommentBodies.add(w);};t.prototype.resemblesLocalComment=function(v){var w=t.hashCommentData(v);return this.localCommentBodies.has(w);};t.hashCommentData=function(v){var w=v.author+v.body.text;if(v.attachment)w+=':'+v.attachment.fbid;return w;};var u={start:function(v,w,x){if(s.get(v))return;s.set(v,new t(v,w,x));}};f.exports=u;},null);
__d('UFILiveVideoCommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'live_video_comment_create_subscribe';}});f.exports=k;},null);
__d('UFISubscriptionUpdates',['BanzaiODS','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();h.setEntitySample('feedback',.0001);function m(o,p,q){new i().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(o).setTimeSinceSub(p).updateData(q?q:{}).log();}var n={handleLiveLike:function(o,p,q){h.bumpEntityKey('feedback','gql_like_received');m('like',q);if(!p||!p.feedback_like_subscribe)return;var r=p.feedback_like_subscribe.feedback,s=p.feedback_like_subscribe.liker;if(!r||!s)return;var t=[babelHelpers._extends({actiontype:k.UFIActionType.LIKE_ACTION,actorid:s.id,clientid:p.feedback_like_subscribe.client_mutation_id,entidentifier:o,likesentences:{current:r.does_viewer_like?r.viewer_likes_sentence:r.viewer_does_not_like_sentence,alternate:r.does_viewer_like?r.viewer_does_not_like_sentence:r.viewer_likes_sentence},hasviewerliked:r.does_viewer_like,likecount:r.likers.count},{})],u=r.reactions_summary;if(u){var v={};for(var w=0;w<u.length;w++){var x=u[w],y=x.feedback_reaction.key;v[y]={'default':x.reactors.count,reduced:x.reactors.display_count};}var z=r.viewer_feedback_reaction_info?r.viewer_feedback_reaction_info.key:0,aa=r.reaction_count_reduced?r.reaction_count_reduced:r.reactors.count;t.push(babelHelpers._extends({actiontype:k.UFIActionType.REACTION,actorid:s.id,clientid:p.feedback_like_subscribe.client_mutation_id,entidentifier:o,viewerreaction:z,reactioncount:r.reactors.count,reactioncountreduced:aa,reactioncountmap:v,reactionsentences:{current:z?r.viewer_likes_reaction_sentence:r.viewer_does_not_like_reaction_sentence,alternate:z?r.viewer_does_not_like_reaction_sentence:r.viewer_likes_reaction_sentence}},{}));}j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{actions:t});},handleLiveComment:function(o,p,q){h.bumpEntityKey('feedback','gql_comment_received');var r=p&&p.comment_create_subscribe&&p.comment_create_subscribe.comment;if(!r)return;m('comment',q,{comment_id:r.legacy_token});var s=babelHelpers._extends({author:r.author.id,body:r.body,cancomment:r.feedback.can_viewer_comment,canedit:r.can_viewer_edit,canremove:r.can_viewer_delete,clientid:p.comment_create_subscribe.client_mutation_id,ftentidentifier:o,id:r.legacy_token,fbid:r.legacy_fbid,legacyid:r.legacy_fbid,timestamp:{time:r.created_time,text:l._("\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434")},hasviewerliked:r.feedback.does_viewer_like,isfeatured:r.is_featured,istranslatable:r.translation_available_for_viewer,likecount:r.feedback.likers.count,viewercanlike:r.feedback.can_viewer_like,parentcommentid:r.comment_parent&&r.comment_parent.legacy_token,spamreplycount:0},{});if(r.attachments.length){var t=r.attachments[0],u=t.style_list;if(u&&u.length&&u[0]=='sticker'){var v=t.target;s.attachment={metadata:{source_uri:v.img.uri,source_uri_2x:v.img_2x.uri,width:v.img.width,height:v.img.height,frameCount:v.frame_count,frameRate:v.frame_rate,framesPerCol:v.frames_per_column,framesPerRow:v.frames_per_row,sprite_uri:v.sprite_img&&v.sprite_img.uri,sprite_uri_2x:v.sprite_img_2x&&v.sprite_img_2x.uri},type:'sticker'};}else if(u&&u.length&&u[0]=='photo'){var w=t.target;s.attachment={metadata:{preview_uri:w.photo_img&&w.photo_img.uri,width:w.photo_img.width,height:w.photo_img.height,url:w.url},type:'photo'};}else if(u&&u.length&&u[0]=='share'){t.type='live_share';s.attachment=t;}}j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{comments:[s]});},handleLiveCommentLike:function(o,p,q){m('comment_like',q);var r=p&&p.comment_like_subscribe&&p.comment_like_subscribe.feedback;if(!r)return;j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:k.UFIActionType.COMMENT_LIKE,clientid:p.comment_like_subscribe.client_mutation_id,commentid:r.legacy_comment_token,likecount:r.likers&&r.likers.count,viewerliked:r.does_viewer_like}]});}};f.exports=n;},null);
__d('UFIController',['Promise','Arbiter','Bootloader','BootloadedComponent.react','CommentPrelude','DOM','DOMQuery','JSResource','LayerRemoveOnHide','LiveTimer','PageAdminSignatureSettings','Parent','React','ReactDOM','Run','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionLinks.react','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFICommentLogger','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFIFeedbackFilters','UFICommentSubscription','UFICommentLikeSubscription','UFICommentTemplates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIFetcher','UFIInstanceState','UFILikeSubscription','UFILiveStreamingComments','UFILiveVideoCommentSubscription','UFINewCommentNotifier','UFIRange','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelCommentList','UFIUIEvents','UFIUserActions','URI','csx','emptyFunction','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb){'use strict';if(c.__markCompiled)c.__markCompiled();var nb=oa.UFIPayloadSourceType,ob=oa.UFIPaging,pb=oa.UFIFeedbackMode,qb=function(tb,ub,vb,wb){var xb=tb.getRequestedOffset(),yb=tb.getRequestedLength(),zb=xb+yb===ub,ac=zb&&rb(wb)?vb-xb:yb;return new wa(xb,ac);},rb=function(tb){return tb==nb.USER_ACTION||tb==nb.LIVE_SEND;};sb.preload=function(){};sb.prototype.$UFIController1=function(tb,ub){if(!this.$UFIController2||ub!==nb.INITIAL_SERVER)return;this.$UFIController2.startRecording(tb);};sb.prototype.$UFIController3=function(tb,ub){if(!this.$UFIController2||ub!==nb.INITIAL_SERVER)return;var vb=this.$UFIController4;this.$UFIController2.log(tb,ub,{num_comments:this.comments&&this.comments.length||0,num_likes:this.feedback&&this.feedback.likecount||0,features:{is_featured:!!this.$UFIController5.featuredCommentLists[vb.ftentidentifier],is_streaming:this.$UFIController6(),is_lazy_fetch:vb.lazyFetch,is_disable_css_hiding:vb.disableCSSHiding}});};sb.factory=function(tb,ub,vb){new sb(tb,ub,vb);};function sb(tb,ub,vb){this.$UFIController2=na.perfLogger?new na.perfLogger(ub.ftentidentifier):null;this.$UFIController1('construct',nb.INITIAL_SERVER);this.$UFIController7();this.root=tb;this.source=ub.source;za.registerController(tb.id,(function(){return this.$UFIController8();}).bind(this));this.$UFIController9=(function(){if(!this.$UFIController10){var hc=za.isSnowliftNode(this.root.id),ic=hc?n.scry(this.root,"^.fbPhotosSnowliftFeedback ._37uu"):n.scry(this.root,"^form ._37uu");this.$UFIController10=ic&&ic[0]||null;}return this.$UFIController10;}).bind(this);var wb=ub.feedbackMode===pb.NEVER||ub.feedbackMode===pb.NONE;this.$UFIController5={feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:wb,viewerHasInteractedWithComments:false,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},toplevelPagerClickCounts:{},replyPagerClickCounts:{}};this.authorProfiles=[];this.commentcounts={};this.comments=[];this.repliesMap={};this.$UFIController4=ub;var xb=this.$UFIController4;this.$UFIController4.rootid=this.root.id;var yb=vb.feedbacktargets[0];this.orderingMode=yb.defaultcommentorderingmode;this.onCommentOrderingModeSelectorChange=this.onCommentOrderingModeSelectorChange.bind(this);xb.livevideographqlcomments=yb.lvc;if(this.canRenderHeader()){this.renderHeader(yb);}else new y(tb,xb,yb,xb.instanceid,this.$UFIController11.bind(this));var zb=Date.now();if(yb.ll)this.liveLikeSubscription=sa.subscribe(yb.targetfbid,function(hc){bb.handleLiveLike(xb.ftentidentifier,hc,Date.now()-zb);});if(yb.lc)this.liveCommentSubscription=ka.subscribe(yb.targetfbid,function(hc){bb.handleLiveComment(xb.ftentidentifier,hc,Date.now()-zb);});if(yb.lvc)this.liveVideoCommentSubscription=ua.subscribe(yb.targetfbid,function(hc){bb.handleLiveComment(xb.ftentidentifier,hc,Date.now()-zb);});if(yb.lcl)this.liveCommentLikeSubscription=la.subscribe(yb.targetfbid,function(hc){bb.handleLiveCommentLike(xb.ftentidentifier,hc,Date.now()-zb);});xb.pagesAdminSignatureSettings=new r(xb.initAdminSignatureContext,yb.actorforpost);var ac=null;if(vb.featuredcommentlists&&vb.featuredcommentlists.comments&&vb.featuredcommentlists.comments[xb.ftentidentifier]){ac=vb.featuredcommentlists.comments[xb.ftentidentifier];this.$UFIController5.featuredCommentLists[xb.ftentidentifier]=new ia(xb.ftentidentifier,ac.values,vb.comments);}else{var bc=vb.commentlists.comments,cc=bc[xb.ftentidentifier];ac=cc[this.orderingMode];}this.ranges={};this.replyRanges={};this.commentcounts={};this.commentcounts[xb.ftentidentifier]=this.getToplevelCommentList().getCommentCount();this.ranges[this.orderingMode]=new wa(ac.range.offset,ac.range.length);this.$UFIController5.oldRange={offset:ac.range.offset,length:this.comments&&this.comments.length||0};var dc,ec,fc;if(vb.commentlists.replies)for(dc=0;dc<ac.values.length;dc++){ec=ac.values[dc];fc=vb.commentlists.replies[ec];if(fc){this.commentcounts[ec]=this.getReplyCommentList(ec).getCommentCount();this.replaceReplyRange(ec,new wa(fc.range.offset,fc.range.length));}}if(vb.featuredcommentlists)if(vb.featuredcommentlists.replies)for(dc=0;dc<ac.values.length;dc++){ec=ac.values[dc];fc=vb.featuredcommentlists.replies[ec];if(fc){this.$UFIController5.featuredCommentLists[ec]=new ha(xb.ftentidentifier,ec,fc.values,vb.comments);this.commentcounts[ec]=this.getReplyCommentList(ec).getCommentCount();this.replaceReplyRange(ec,wa.combine(new wa(fc.range.offset,fc.range.length),this.replyRanges[ec]));}}this.$UFIController12=null;this.$UFIController13=null;this.ufiCentralUpdatesSubscriptions=[ca.subscribe('feedback-updated',(function(hc,ic){var jc=ic.updates,kc=ic.payloadSource;if(xb.ftentidentifier in jc)this.fetchAndUpdate(kc,false);}).bind(this)),ca.subscribe('feedback-id-changed',(function(hc,ic){var jc=xb.ftentidentifier,kc=ic.updates;if(jc in kc){this.$UFIController4=babelHelpers._extends({},xb,{ftentidentifier:kc[jc]});xb=this.$UFIController4;}}).bind(this)),ca.subscribe('instance-updated',(function(hc,ic){var jc=ic.updates;if(xb.instanceid in jc){var kc=jc[xb.instanceid];if(kc.editcommentid||kc.inlineShare){if(this.canRenderHeader())this.renderHeader(this.feedback);this.render(ic.payloadSource);}}}).bind(this)),ca.subscribe('actor-changed',(function(hc,ic){this.$UFIController14();}).bind(this))];this.pageletDestroySubscription=lb(this.root,(function(){u.unmountComponentAtNode(this.root);this.$UFIController8();}).bind(this));this.ufiUIPageClearedSubscription=i.subscribe(db.PageCleared,(function(){u.unmountComponentAtNode(this.root);this.$UFIController8();}).bind(this));this.onUnloadSubscription=v.onUnload((function(){return this.$UFIController15();}).bind(this));ca.handleUpdate(nb.INITIAL_SERVER,vb);if(xb.viewas)this.viewasUFICleanSubscription=i.subscribe('pre_page_transition',function(hc,ic){if(xb.viewas!==new fb(ic.to).getQueryData('viewas'))cb.resetCommentListsForFeedbackTargetID(xb.ftentidentifier);});if(this.$UFIController6()){var gc=null;if(vb.comments&&vb.comments.length>0)gc=vb.comments[vb.comments.length-1].fbid;ta.start(xb.ftentidentifier,yb.commentcount,gc);}if(!xb.lazyFetch&&!this.canRenderHeader())this.$UFIController16(yb);this.$UFIController3('construct',nb.INITIAL_SERVER);}sb.prototype.$UFIController17=function(tb){this.feedback=tb;this.$UFIController5.feedback=tb;};sb.prototype.$UFIController7=function(){if(!this.$UFIController18){this.$UFIController19=new fa();this.$UFIController20={UFICallbackStore:new ba(this.$UFIController19)};this.$UFIController18=new w();this.$UFIController18.addSubscriptions(this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.CANCEL,(function(){return this.$UFIController14();}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_LIKE,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;eb.changeCommentLike(tb.comment.id,tb.like,{source:this.source,target:tb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_PIN,function(tb){return eb.changeCommentPin(tb.comment.id);}),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.REMOVE,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;this.$UFIController21(tb.comment,tb.target,tb.onConfirm);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.EDIT,(function(tb){return this.$UFIController22(tb.comment);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TRANSLATE,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;eb.translateComment(tb.comment,{source:this.source,target:tb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_MARK_AS_SPAM,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;eb.setHideAsSpam(tb.comment.id,tb.is_spam,{source:this.source,target:tb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_INLINE_BAN,(function(tb){return eb.banUser(tb.comment,tb.ownerid,tb.is_banned,{source:this.source,target:tb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.TOGGLE_LIKE,(function(tb){return eb.changeReaction(this.$UFIController4.ftentidentifier,this.feedback.hasviewerliked?0:oa.LikeReaction,{source:this.source,target:tb.target,rootid:this.$UFIController4.rootid});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.TYPING_CHANGE,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;eb.typingChange(this.$UFIController4.ftentidentifier,tb.state);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.SUBMIT_NEW,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;va.onNewComment(this.$UFIController23(),this.$UFIController4,tb.comment,tb.target,tb.replyCommentID,tb.timestamp);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.SUBMIT_EDIT,(function(tb){return this.$UFIController24(tb.comment,tb.commentData,tb.target);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.REMOVE_PREVIEW,(function(tb){return eb.removePreview(tb.comment,{source:this.source,target:tb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.RETRY_SUBMIT,(function(tb){return ya.retrySubmit(tb.comment,{source:this.source});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.CHANGE_ORDER_MODE,(function(tb){this.orderingMode=tb.mode;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.viewerHasInteractedWithComments=true;var ub=nb.USER_ACTION;this.render(ub);this.fetchAndUpdate(ub,false);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.PAGE_IN_COMMENTS,(function(tb){return this.$UFIController25(tb.commentID,tb.direction,new wa(tb.nextRange.offset,tb.nextRange.length));}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.TOGGLE_REPLIES,(function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;var ub=tb.commentID,vb=this.$UFIController5.repliesExpandedMap[ub];if(vb){delete this.$UFIController5.isActiveLoading[ub];this.$UFIController5.repliesExpandedMap[ub]=false;this.render(nb.USER_ACTION);}else this.$UFIController26(ub,null);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.SHOW_REPLIES,(function(tb){return this.$UFIController26(tb.commentID,tb.initiatorComment);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.COMMENTS_ARRIVED,(function(tb){this.$UFIController5.showLoadingUFI=false;this.$UFIController5.isActiveLoading={};this.$UFIController5.commentIDToFocusOnMount=tb.source===nb.USER_ACTION?this.$UFIController27(tb.newOffset,tb.newLength):null;this.$UFIController5.oldRange={offset:tb.newOffset,length:tb.newLength};this.render(tb.source);if(tb.source==nb.ENDPOINT_COMMENT_FETCH){i.inform(db.CommentPager);if(na.logCommentLoad)ea.logCommentFetchReceived(this.$UFIController4.ftentidentifier,Date.now());}}).bind(this)));}};sb.prototype.getStores=function(){return this.$UFIController20;};sb.prototype.$UFIController26=function(tb,ub){this.$UFIController5.viewerHasInteractedWithComments=true;this.$UFIController5.focusedReplyComposer={replyID:'replycomposer-'+tb,initiatorComment:ub};var vb=this.commentcounts[tb],wb=Math.min(vb,this.$UFIController4.pagesize),xb=new wa(vb-wb,wb);this.$UFIController25(tb,ob.BOTTOM,xb);};sb.prototype.$UFIController25=function(tb,ub,vb){this.$UFIController5.viewerHasInteractedWithComments=true;var wb=tb!==this.$UFIController4.ftentidentifier;this.$UFIController5.isActiveLoading[tb]=ub;if(wb){this.$UFIController5.repliesExpandedMap[tb]=true;}else this.$UFIController5.hasPagedToplevel=true;if(tb==this.$UFIController4.ftentidentifier){var xb=this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0;this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]=xb+1;this.getRange().updateRequestedRange(vb.offset,vb.length);}else{var yb=this.$UFIController5.replyPagerClickCounts[tb]||0;this.$UFIController5.replyPagerClickCounts[tb]=yb+1;this.replyRanges[tb].updateRequestedRange(vb.offset,vb.length);}var zb=nb.USER_ACTION;this.fetchAndUpdate(zb,true);this.render(zb);};sb.prototype.$UFIController6=function(){if(this.$UFIController4.livevideographqlcomments)return false;if(!this.$UFIController4.isstreaming)return false;if(this.$UFIController4.feedcarded)return na.enableStreamingCommentsInFeed;return true;};sb.prototype.$UFIController23=function(){if(!this.$UFIController28)this.$UFIController28=s.byTag(this.root,'form');return this.$UFIController28;};sb.prototype.$UFIController11=function(){if(!this.$UFIController4.disableinlinetoggle){this.$UFIController5.isHidden=!this.$UFIController5.isHidden;if(!this.$UFIController5.isHidden)this.$UFIController5.viewerHasInteractedWithComments=true;this.render(nb.COLLAPSE_ACTION);}};sb.prototype.$UFIController22=function(tb){this.$UFIController5.viewerHasInteractedWithComments=true;ra.updateState(this.$UFIController4.instanceid,'isediting',true);ra.updateState(this.$UFIController4.instanceid,'editcommentid',tb.id);};sb.prototype.$UFIController24=function(tb,ub,vb){this.$UFIController5.viewerHasInteractedWithComments=true;if(!ub.visibleValue&&!ub.attachedPhoto&&!ub.attachedSticker){this.$UFIController21(tb,vb,hb);}else eb.editComment(tb.id,ub.visibleValue,ub.encodedValue,{source:this.$UFIController4.source,target:vb,attachedPhoto:ub.attachedPhoto,attachedSticker:ub.attachedSticker});ra.updateStateField(this.$UFIController4.instanceid,'locallycomposed',tb.id,true);this.$UFIController14();};sb.prototype.$UFIController14=function(){ra.updateState(this.$UFIController4.instanceid,'isediting',false);ra.updateState(this.$UFIController4.instanceid,'editcommentid',null);};sb.prototype.$UFIController21=function(tb,ub,vb){var wb=ma[':fb:ufi:hide-dialog-template'].build();m.setContent(wb.getNode('body'),mb._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439?"));m.setContent(wb.getNode('title'),mb._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"));j.loadModules(["DialogX"],(function(xb){var yb=new xb({modal:true,width:465,addedBehaviors:[p]},wb.getRoot());yb.subscribe('confirm',(function(){eb.removeComment(tb.id,{source:this.source,oneclick:false,target:ub});vb();yb.hide();}).bind(this));yb.show();}).bind(this));};sb.prototype.$UFIController29=function(){var tb=this.getToplevelCommentList().count,ub=Math.min(tb,this.$UFIController4.numLazyComments);jb(this.ranges,function(vb){return vb.updateRequestedRange(tb-ub,ub);});this.$UFIController5.showLoadingUFI=true;this.$UFIController5.requestedInitialComments=true;this.fetchAndUpdate(nb.USER_ACTION,false);pa.getFeedbackTarget(this.$UFIController4.ftentidentifier,(function(vb){if(this.canRenderHeader()){this.renderHeader(vb);}else this.$UFIController16(vb);}).bind(this));};sb.prototype.$UFIController16=function(tb){if(this.shouldShowCommentOrderingModeSelector(tb))m.scry(this.root,"^form ._3csb").slice(0,1).forEach((function(ub){u.render(t.createElement(k,{bootloadPlaceholder:t.createElement('div',null),bootloadLoader:o('UFIOrderingModeSelector.react'),onOrderChanged:this.onCommentOrderingModeSelectorChange,feedback:tb}),ub);}).bind(this));};sb.prototype.canRenderHeader=function(){var tb=this.$UFIController9();if(!tb)return false;return na.reactActionLinks||tb.children.length===0;};sb.prototype.renderHeader=function(tb){if(!this.canRenderHeader())return;var ub=this.$UFIController4.hasReactions&&this.$UFIController4.feedbackMode==='none'&&tb.displayreactions&&this.shouldShowCommentOrderingModeSelector(tb)&&(!this.$UFIController4.lazyFetch||this.$UFIController5.requestedInitialComments);u.render(t.createElement(z,{root:this.root,contextArgs:this.$UFIController4,feedbacktarget:tb,onCommentOrderingModeSelectorChange:this.onCommentOrderingModeSelectorChange,showCommentOrderingModeSelector:ub,visibilityTogglerCallback:(function(){return this.$UFIController11();}).bind(this)}),this.$UFIController9());};sb.prototype.render=function(tb){this.$UFIController1('render',tb);if(this.$UFIController5.showLoadingUFI){u.render(this.$UFIController30(),this.root);this.$UFIController3('render',tb);return;}var ub=ra.getKeyForInstance(this.$UFIController4.instanceid,'inlineShare')||{},vb=this.comments.length||!kb((this.feedback.reactionsentences||this.feedback.likesentences).current);if((vb&&rb(tb)||ub.toggling)&&this.$UFIController4.feedbackMode!==pb.NEVER){this.$UFIController5.isHidden=false;l.expand(this.root,false,'ufi_controller');}if(this.$UFIController4.disableCSSHiding&&this.$UFIController5.isHidden){this.$UFIController3('render',tb);u.unmountComponentAtNode(this.root);return;}if(this.$UFIController4.lazyFetch&&!this.$UFIController5.requestedInitialComments&&!ub.active){u.render(this.$UFIController30(),this.root);this.$UFIController3('render',tb);this.$UFIController29();return;}var wb=this.getRange();if(this.$UFIController12===null)this.$UFIController12=wb.getOffset()+wb.getLength()-1;var xb=this.feedback.replysocialsentencemaxreplies||-1,yb={};yb[this.$UFIController4.ftentidentifier]=new wa(wb.offset,wb.length);for(var zb in this.replyRanges)yb[zb]=new wa(this.replyRanges[zb].offset,this.replyRanges[zb].length);var ac=babelHelpers._extends({},this.$UFIController5.defaultRepliesExpandedMap,this.$UFIController5.repliesExpandedMap),bc=!!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier],cc=this.$UFIController4.isstreaming?true:this.getToplevelCommentList().getClientHasAll()&&wb.offset===0&&wb.length===this.getToplevelCommentList().getCommentCount(),dc=this.$UFIController4.mayLogVPVs&&this.orderingMode===oa.UFICommentOrderingMode.FILTERED,ec=this.$UFIController31(tb),fc=this.$UFIController5.viewerHasInteractedWithComments,gc=t.createElement(ga,{dispatcher:this.$UFIController19,stores:this.$UFIController20},t.createElement(x,{feedback:this.feedback,contextArgs:this.$UFIController4,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController5.deletedCounts,availableComments:this.comments,source:this.source,ranges:yb,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController12,replySocialSentenceMaxReplies:xb,orderingMode:this.orderingMode,hideOrderingModeSelector:bc,commentPermalinks:this.$UFIController5.commentPermalinks,canAddCommentMap:this.$UFIController5.canAddCommentMap,canReplyMap:this.$UFIController5.canReplyMap,focusReply:ec,inlineShare:ub,isActiveLoading:this.$UFIController5.isActiveLoading,repliesExpandedMap:ac,hasPagedToplevel:this.$UFIController5.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController5.commentIDToFocusOnMount,hideToplevelPager:cc,shouldLogVPVs:dc,viewerHasInteractedWithComments:fc}));u.render(gc,this.root);q.updateTimeStamps();if(this.$UFIController23())i.inform(db.Changed,{form:this.$UFIController23()});if(tb!=nb.INITIAL_SERVER)i.inform('reflow');this.$UFIController5.focusedReplyComposer=null;this.$UFIController3('render',tb);};sb.prototype.$UFIController31=function(tb){if(tb===nb.INITIAL_SERVER&&this.feedback.permalinkcommentid){var ub='replycomposer-'+this.feedback.permalinkcommentid;return {replyID:ub};}else if(this.$UFIController5.focusedReplyComposer)return this.$UFIController5.focusedReplyComposer;return null;};sb.prototype.$UFIController27=function(tb,ub){var vb=this.$UFIController5.oldRange;if(vb.offset!=tb||vb.length!=ub){var wb=tb<vb.offset?vb.length:0;if(wb<ub)return this.comments[wb].id;}return this.$UFIController5.commentIDToFocusOnMount;};sb.prototype.$UFIController32=function(tb,ub,vb){if(ub.id===tb.permalinkcommentid)return true;if(vb>1)return true;if(vb>0&&ub.interestingReplyOffset===undefined)return true;var wb=ub.author===tb.viewerid;if(wb&&vb==1)return true;return false;};sb.prototype.getNewRange=function(tb,ub,vb){if(ub.isstreaming){var wb=ub.feedcarded?4:50;return new wa(Math.max(0,vb-wb),Math.min(wb,vb));}else return qb(this.getRange(),this.commentcounts[ub.ftentidentifier],vb,tb);};sb.prototype.getNewReplyRange=function(tb,ub,vb,wb){var xb=ub.id;if(this.replyRanges[xb]){return qb(this.getReplyRange(xb),this.commentcounts[xb],wb,tb);}else if(ub.interestingReplyOffset!==undefined){return new wa(ub.interestingReplyOffset,1);}else{var yb=vb.isranked?0:Math.min(wb,2);return new wa(0,yb);}};sb.prototype.fetchAndUpdate=function(tb,ub){this.$UFIController5.source=tb;qa.fetchNewFeedbackTarget(this.$UFIController4.ftentidentifier).done((function(vb){this.$UFIController17(vb);if(rb(this.$UFIController5.source))this.render(this.$UFIController5.source);if(this.canRenderHeader())this.renderHeader(vb);if(!this.$UFIController5.isHidden)this.fetchAllCommentsAndRender(this.$UFIController5.source,ub);}).bind(this));};sb.prototype.fetchAllCommentsAndRender=function(tb,ub){this.fetchAllComments(tb,ub).done((function(){this.$UFIController19.dispatch(ab.commentsArrived(this.getRange().getOffset(),this.comments.length,tb));}).bind(this));};sb.prototype.fetchAllComments=function(tb,ub){return h.resolve().then((function(){return this.fetchCommentsForFeedbackTarget(tb,ub).then((function(vb){var wb=da.getAuthors(vb);if(!this.feedback.isthreaded||!vb.length)return wb;return this.fetchAllReplyIDsForComments(vb,tb,ub).then(function(xb){return wb.concat(xb);});}).bind(this)).then((function(vb){return (ja.getRequestedIDs(this.feedback).concat(vb));}).bind(this));}).bind(this)).then(function(vb){return qa.fetchShortProfiles(vb);}).then((function(vb){this.authorProfiles=vb;}).bind(this));};sb.prototype.fetchCommentsForFeedbackTarget=function(tb,ub){var vb=this.getToplevelCommentList().getCommentCount(),wb=this.getNewRange(tb,this.$UFIController4,vb),xb={numPagerClicks:ub?this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext,feedbackSource:this.source};return qa.fetchComments(this.getToplevelCommentList(),wb,xb).then((function(yb){this.replaceRange(wb);this.comments=yb;this.commentcounts[this.$UFIController4.ftentidentifier]=this.getToplevelCommentList().getCommentCount();this.$UFIController5.deletedCounts[this.$UFIController4.ftentidentifier]=this.getToplevelCommentList().getDeletedCount();this.$UFIController5.canAddCommentMap[this.$UFIController4.ftentidentifier]=!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier];yb.forEach((function(zb){this.$UFIController5.canReplyMap[zb.id]=zb.cancomment;this.$UFIController5.commentPermalinks[zb.id]=this.getToplevelCommentList().getPermalinkForComment(zb.id);}).bind(this));return yb;}).bind(this));};sb.prototype.fetchRepliesForComment=function(tb,ub,vb){var wb=tb.id,xb=this.getReplyCommentList(wb).getCommentCount(),yb=this.getNewReplyRange(ub,tb,this.feedback,xb),zb={numPagerClicks:vb?this.$UFIController5.replyPagerClickCounts[wb]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext};return qa.fetchComments(this.getReplyCommentList(wb),yb,zb).then((function(ac){this.replaceReplyRange(wb,yb);this.repliesMap[wb]=ac;this.commentcounts[wb]=this.getReplyCommentList(wb).getCommentCount();this.$UFIController5.deletedCounts[wb]=this.getReplyCommentList(wb).getDeletedCount();this.$UFIController5.canAddCommentMap[wb]=!this.$UFIController5.featuredCommentLists[wb];this.$UFIController5.defaultRepliesExpandedMap[wb]=this.$UFIController32(this.feedback,tb,ac.length);ac.forEach((function(bc){this.$UFIController5.canReplyMap[bc.id]=bc.cancomment;this.$UFIController5.commentPermalinks[bc.id]=this.getReplyCommentList(wb).getPermalinkForComment(bc.id);}).bind(this));return ac;}).bind(this));};sb.prototype.fetchAllReplyIDsForComments=function(tb,ub,vb){return new h.all(tb.map((function(wb){return this.fetchRepliesForComment(wb,ub,vb).then(function(xb){return da.getAuthors(xb);});}).bind(this))).then(function(wb){return ib(wb);});};sb.prototype.getToplevelCommentList=function(){var tb=this.$UFIController4;if(this.$UFIController5.featuredCommentLists[tb.ftentidentifier])return this.$UFIController5.featuredCommentLists[tb.ftentidentifier];return cb.getCommentList(tb.ftentidentifier,this.orderingMode);};sb.prototype.getReplyCommentList=function(tb){if(tb in this.$UFIController5.featuredCommentLists)return this.$UFIController5.featuredCommentLists[tb];return xa.getCommentList(this.$UFIController4.ftentidentifier,tb,this.orderingMode);};sb.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var tb=this.getToplevelCommentList().getCommentCount(),ub=Math.min(tb,this.$UFIController4.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new wa(tb-ub,ub);}return this.ranges[this.orderingMode];};sb.prototype.replaceRange=function(tb){this.ranges[this.orderingMode]=tb;};sb.prototype.getReplyRange=function(tb){if(!(tb in this.replyRanges))this.replyRanges[tb]=new wa();return this.replyRanges[tb];};sb.prototype.replaceReplyRange=function(tb,ub){this.replyRanges[tb]=ub;};sb.prototype.$UFIController8=function(){this.$UFIController33();this.$UFIController34();this.$UFIController35();this.$UFIController36();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();};sb.prototype.$UFIController15=function(){this.$UFIController35();};sb.prototype.$UFIController33=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(tb){return tb&&ca.unsubscribe(tb);});};sb.prototype.$UFIController34=function(){var tb=[this.pageletDestroySubscription,this.viewasUFICleanSubscription,this.ufiUIPageClearedSubscription];tb.forEach(function(ub){try{ub&&i.unsubscribe(ub);}catch(vb){}});this.pageletDestroySubscription=null;this.viewasUFICleanSubscription=null;this.ufiUIPageClearedSubscription=null;};sb.prototype.$UFIController35=function(){var tb=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveVideoCommentSubscription,this.liveCommentLikeSubscription];tb.forEach(function(ub){return ub&&ub.unsubscribe();});};sb.prototype.$UFIController36=function(){if(this.$UFIController18){this.$UFIController18.release();this.$UFIController18=null;}};sb.prototype.$UFIController30=function(){var tb=ra.getKeyForInstance(this.$UFIController4.instanceid,'inlineShare'),ub=this.$UFIController4;return (t.createElement(ga,{dispatcher:this.$UFIController19,stores:this.$UFIController20},t.createElement(x,{feedback:this.feedback,id:this.$UFIController4.ftentidentifier,contextArgs:ub,commentCounts:this.commentcounts,inlineShare:tb,loadingComments:true})));};sb.prototype.shouldShowCommentOrderingModeSelector=function(tb){var ub=this.getToplevelCommentList().getCommentCount()||tb.commentcount||0;if(tb.orderingmodes&&ub>=oa.minCommentsForOrderingModeSelector&&!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier]){return true;}else return false;};sb.prototype.onCommentOrderingModeSelectorChange=function(tb){this.$UFIController19.dispatch(ab.changeOrderingMode(tb));};f.exports=sb;},null);
__d('UFIMentionsInputProxy.react',['Bootloader','React','cx','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(n){this._fillCmdBuffer({fn:'setSignature',args:[n]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(n){this._fillCmdBuffer({fn:'insertMention',args:[n]});},insertEmoticon:function(n){this._fillCmdBuffer({fn:'insertEmoticon',args:[n]});},_bootload:function(){h.loadModules(["UFIMentionsInput.react"],(function(n){if(this.isMounted())this.setState({component:n});}).bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(n){if(this.refs.mentionsinputchild){return this._execCmd(n);}else this._cmdBuffer=this._cmdBuffer.concat([n]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var n=this._cmdBuffer[0];this._execCmd(n);this._cmdBuffer=this._cmdBuffer.slice(1);l(this._drainFnBuffer);}},_execCmd:function(n){var o=this.refs.mentionsinputchild;return o[n.fn].apply(o,n.args);},_renderProxyInput:function(){var n="_1osa mentionsHidden";return (i.createElement('input',{className:n,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus}));},_renderDummy:function(){var n="UFIAddCommentInput _1osb _1osc";return (i.createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:k,onMouseOver:this._bootload},i.createElement('div',{className:n},this._renderProxyInput(),this.props.placeholder)));},render:function(){var n=this.state.component;if(!n)return this._renderDummy();return (i.createElement(n,babelHelpers._extends({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props),this.props.children));}});f.exports=m;},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);