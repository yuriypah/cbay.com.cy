/*!CK:385624243!*//*1454297684,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["3Hxrv"]); }

__d('KeyboardShortcuts',['KeyEventController','Layer','ModalLayer'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n,o){'use strict';this.key=m;this.handler=n;this.filter=o;this.register();}k.prototype.register=function(){'use strict';this.token=h.registerKey(this.key,this.handler,this.filter);};k.prototype.remove=function(){'use strict';this.token.remove();};var l={_tokens:[[]],register:function(m,n,o){o=o||{};var p=o.allowDefault?n:function(event,t){n.apply(this,arguments);event.prevent();},q=o.baseFilters||[h.defaultFilter],r=function(event,t){for(var u=0,v=q.length;u<v;u++)if(!q[u](event,t))return false;return !o.filter||o.filter(event,t);},s=new k(m,p,r);this._tokens[this._tokens.length-1].push(s);return s;},init:function(){i.subscribe('show',(function(m,n){if(n.hasBehavior(j))this.pushLayer();}).bind(this));i.subscribe('hide',(function(m,n){if(n.hasBehavior(j))this.popLayer();}).bind(this));},pushLayer:function(){var m=this._tokens[this._tokens.length-1];m&&m.forEach(function(n){n.remove();});this._tokens.push([]);},popLayer:function(){var m=this._tokens.length-1;if(m<0)return;var n=this._tokens[m];n.forEach(function(p){p.remove();});this._tokens.pop();var o=this._tokens[m-1];o&&o.forEach(function(p){p.register();});}};l.init();f.exports=l;},null);
__d('LikeConfirmer',['AsyncDialog','AsyncRequest'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=false,k=false,l={likeContent:function(){},like:function(m,n){this.likeContent=m;if(k)return;if(j){this.likeContent();}else{var o=new i().setURI('/like/confirm_like.php').setRelativeTo(n);h.send(o,(function(p){k=true;p.subscribe('hide',this.onCloseLikeConfirmDialog.bind(this));p.setCausalElement(n);}).bind(this));}return false;},isShowingConfirmation:function(){return k;},onCloseLikeConfirmDialog:function(){k=false;},likeSkipConfirmation:function(m){j=m;this.likeContent();}};f.exports=l;},null);
__d('FeedBaseKeyboardController',['AccessibilityLogger','Arbiter','AsyncDialog','AsyncRequest','Banzai','BanzaiODS','BanzaiNectar','CSS','DOM','DOMScroll','Event','Focus','KeyboardShortcuts','LikeConfirmer','NavigationMessage','Parent','ReactComposerEvents','ReactComposerIDGenerator','Run','Scroll','SubscriptionsHandler','UITinyViewportAction','Vector','ViewportBounds','csx','emptyFunction','ge','getActiveElement','isAsyncScrollQuery','isElementNode','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){if(c.__markCompiled)c.__markCompiled();var ma=0;function na(){var pa=ha('pagelet_bluebar');ma=!ca.isTiny()&&pa?pa.offsetTop+pa.offsetHeight:0;}function oa(pa){'use strict';this.root=pa;this.init();}oa.prototype.getStories=function(){'use strict';};oa.prototype.getParentStory=function(pa){'use strict';};oa.prototype.isStory=function(pa){'use strict';};oa.prototype.isHoldoutStory=function(pa){'use strict';};oa.prototype.getHeadline=function(pa){'use strict';};oa.prototype.getPreviousStory=function(pa){'use strict';};oa.prototype.getNextStory=function(pa){'use strict';};oa.prototype.setSelected=function(pa,qa){'use strict';};oa.prototype.clickLike=function(){'use strict';};oa.prototype.clickComment=function(){'use strict';};oa.prototype.clickShare=function(){'use strict';};oa.prototype.clickSeeMore=function(){'use strict';};oa.prototype.clickLeft=function(){'use strict';};oa.prototype.clickRight=function(){'use strict';};oa.prototype.openAttachment=function(){'use strict';};oa.prototype.focusComposer=function(){'use strict';var pa=ha('pagelet_composer');if(!pa)pa=ha('pagelet_group_composer');if(pa){var qa=p.scry(pa,'textarea')[0];if(qa){s.set(qa);q.scrollToTop(true);}else{var ra=p.scry(pa,"div._36bx")[0],sa=ra&&ra.id;if(y.isComposerID(sa)){i.inform(x.ACTIVATE_ATTACHMENT+ra.id);q.scrollToTop(true);}}}};oa.prototype.getScrollOffset=function(){'use strict';return 10;};oa.prototype.getAnimationLength=function(pa){'use strict';return Math.min(Math.abs(da.getElementPosition(pa).y-ea.getTop()-aa.getTop(document.body)),400);};oa.prototype.findTop=function(){'use strict';var pa=this.getStories();for(var qa=0;qa<pa.length;qa++)if(da.getElementPosition(pa[qa]).y>da.getScrollPosition().y)return pa[qa];};oa.prototype.onLeave=function(){'use strict';this.subscriptions&&this.subscriptions.release();};oa.prototype.getHelpDialogRequest=function(){'use strict';if(!this.dialogRequest){this.dialogRequest=new k('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};oa.prototype.init=function(){'use strict';z.onLeave(this.onLeave.bind(this));this.subscriptions=new ba();this.subscriptions.addSubscriptions(i.subscribe(v.NAVIGATION_BEGIN,this.onLeave.bind(this)),t.register('j',this.vert.bind(this,1)),t.register('k',this.vert.bind(this,-1)),t.register('l',(function(){var pa=this.getParentStory(ia());u.like((function(){this.setSelected(pa,false);this.clickLike();}).bind(this),ia());}).bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('p',this.focusComposer.bind(this)),t.register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('SLASH',(function(){var pa=this.getHelpDialogRequest();if(pa){pa.setRelativeTo(ia());j.send(pa);}}).bind(this),{filter:function(event,pa){return event.getModifiers().shift;}}),t.register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),t.register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),r.listen(this.root,'focusin',(function(event){var pa=event.getTarget();if(!this.isStory(pa)){var qa=p.isNodeOfType(pa,['object','embed','iframe']),ra=this.getParentStory(pa),sa=this.selected;if(ra&&!qa&&sa){this.setSelected(ra,true);this.selected=ra;}}}).bind(this)));};oa.prototype.hasActiveStory=function(event,pa){'use strict';var qa=ia();return !(qa&&o.shown(qa))||!!this.getParentStory(qa);};oa.prototype.hasExpandableStoryInFocus=function(event,pa){'use strict';var qa=ia();return !!(qa.getElementsByClassName('text_exposed_root').length&&!qa.getElementsByClassName('text_exposed_root text_exposed').length);};oa.prototype.clickElement=function(pa){'use strict';if(!pa)return;var qa=undefined;for(var ra=arguments.length,sa=Array(ra>1?ra-1:0),ta=1;ta<ra;ta++)sa[ta-1]=arguments[ta];for(var ua=0,va=sa.length;ua<va;ua++){qa=p.scry(pa,sa[ua])[0];if(qa&&o.shown(qa)){qa.click();return;}}};oa.prototype.click=function(){'use strict';for(var pa=arguments.length,qa=Array(pa),ra=0;ra<pa;ra++)qa[ra]=arguments[ra];this.clickElement.apply(this,[this.selected].concat(qa));};oa.prototype.$FeedBaseKeyboardController1=function(){'use strict';if(!this.$FeedBaseKeyboardController2){this.subscriptions.addSubscriptions(r.listen(document,'scroll',(function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}).bind(this)));this.$FeedBaseKeyboardController2=true;}};oa.prototype.$FeedBaseKeyboardController3=function(){'use strict';if(!this.$FeedBaseKeyboardController4){na();this.subscriptions.addSubscriptions(r.listen(window,'resize',la(na)));this.$FeedBaseKeyboardController4=true;}};oa.prototype.vert=function(pa){'use strict';this.$FeedBaseKeyboardController1();var qa,ra;if(this.selected){if(l.isEnabled('kbshortcuts_feed')){ra=pa>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';m.bumpEntityKey('kbshortcuts_feed',ra);n.log('feed_scroll',ra,{});}h.logJKKey();if(this.selected.id=='pagelet_composer'){qa=pa>0?this.getStories()[0]:null;if(this.isHoldoutStory(qa))qa=this.getPreviousStory(qa);}else if(pa===0){qa=this.selected;}else qa=pa>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||ha('pagelet_composer');if(!qa){return;}else if(!ka(qa)){o.removeClass(this.selected,'selectedStorySimple');this.selected=qa;return this.vert(pa);}}if(!qa||w.byClass(qa,'hidden_elem')||!p.contains(document,qa)){qa=this.findTop();if(qa&&pa<0)qa=this.getPreviousStory(qa);if(this.isHoldoutStory(qa))qa=this.getPreviousStory(qa);}if(!qa)return;this.anim&&this.anim.stop();var sa=Date.now()-(this.lastScroll||0)>30,ta=ga;if(pa!==0)ta=this.setFocused.bind(this,qa);if(ja()){sa=false;ta();ta=ga;}this.scrolling=true;this.scrollingTimer&&clearTimeout(this.scrollingTimer);this.$FeedBaseKeyboardController3();this.anim=q.scrollTo(qa,sa?this.getAnimationLength(qa):0,false,da.getViewportDimensions().y-ma-this.getScrollOffset(),0,(function(){this.scrollingTimer=setTimeout((function(){this.scrolling=false;}).bind(this),300);var ua=da.getScrollPosition();ta();if(ua.distanceTo(da.getScrollPosition())!==0)q.scrollTo(ua,0);}).bind(this));this.setSelected(qa,true);this.lastScroll=Date.now();};oa.prototype.setTabindexOnStory=function(pa,qa){'use strict';if(this.isStory(pa))pa.tabIndex=qa;};oa.prototype.setFocused=function(pa){'use strict';if(this.isStory(pa))s.setWithoutOutline(pa);};f.exports=oa;},null);
__d('NewStoriesPillController',['Bootloader','DOMQuery','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={_isAtTop:false,_view:null,show:function(m){h.loadModules(["NewStoriesPillView"],(function(n){this._view=n;n.renderInto(i.scry(k('contentArea'),"._2c44")[0],this._isAtTop);n.hideWhenScrollAbove(m);}).bind(this));},hide:function(){this._isAtTop=false;if(this._view)this._view.unmount();},setAtTop:function(){this._isAtTop=true;if(this._view)this._view.setAtTop();}};f.exports=l;},null);
__d('LitestandStream',['CSS','LitestandStoryInsertionStatus','ViewportBounds','cx','csx','getElementPosition','nullthrows'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p,q={init:function(r,s,t){o=t;p=r;},getStoriesSelector:function(){return "._5jmm";},getStreamRoot:function(){return p;},getSectionID:function(){return o;},isStory:function(r){return h.hasClass(r,"_5jmm");},canInsertNewerStories:function(){if(j.getTop()>m(q.getStreamRoot()).y)return false;return i.canInsert();},getFeedStreamID:function(){return parseInt(n(p).id.split('feed_stream_')[1],16)%1e+08;}};f.exports=q;},null);
__d('FbFeedKeyboardController',['CSS','DOM','DOMQuery','FbFeedHighlight','FeedBaseKeyboardController','Focus','JSXDOM','Parent','csx','cx','ge','getActiveElement','isElementNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;function w(z){if(z.previousElementSibling)return z.previousElementSibling;z=z.previousSibling;while(z&&!t(z))z=z.previousSibling;return z||null;}function x(z){if(z.nextElementSibling)return z.nextElementSibling;z=z.nextSibling;while(z&&!t(z))z=z.nextSibling;return z||null;}u=babelHelpers.inherits(y,l);v=u&&u.prototype;y.prototype.getStories=function(z){'use strict';return j.scry(z||this.root,"._5jmm");};y.prototype.isHoldoutStory=function(z){'use strict';return !!z&&h.hasClass(z,'holdoutAdStory');};y.prototype.isRelevantStory=function(z){'use strict';return t(z)&&!this.isHoldoutStory(z);};y.prototype.isStory=function(z){'use strict';return h.hasClass(z,"_5jmm");};y.prototype.clickLike=function(){'use strict';var z=this.$FbFeedKeyboardController1();this.clickElement(z,'.UFILikeLink');if(z!==this.selected)return null;var aa=this.getParentStory(s());if(aa){var ba=j.scry(aa,'.UFILikeLink');for(var ca=0;ca<ba.length;ca++)if(!h.hasClass(ba[ca],'accessible_elem'))m.setWithoutOutline(ba[ca]);}};y.prototype.clickComment=function(){'use strict';this.clickElement(this.$FbFeedKeyboardController1(),'.comment_link');};y.prototype.clickShare=function(){'use strict';this.click('.share_action_link');};y.prototype.clickSeeMore=function(){'use strict';this.click('.see_more_link');};y.prototype.clickLeft=function(){'use strict';this.click("._1mri");};y.prototype.clickRight=function(){'use strict';this.click("._2fu-");};y.prototype.openAttachment=function(){'use strict';this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};y.prototype.getHeadline=function(z){'use strict';return j.scry(z,"h5._5pbw")[0];};y.prototype.$FbFeedKeyboardController2=function(z){'use strict';var aa=o.bySelector(z,"._5pcb"),ba=r('pagelet_soft_permalink_posts');return !!(aa||ba&&i.contains(ba,z));};y.prototype.getPreviousSibling=function(z){'use strict';var aa=w(z);if(aa&&this.getParentStory(aa))return aa;aa=null;if(this.$FbFeedKeyboardController2(z)){var ba=this.getStories(this.root),ca=ba.indexOf(z);while(ca>-1){if(ca===0){aa=r('pagelet_composer');aa=aa&&o.bySelector(aa,"._5jmm");}else if(ca>0){aa=ba[ca-1];if(aa.offsetHeight>0)break;}ca--;}}return aa||this.selected;};y.prototype.getPreviousStory=function(z){'use strict';var aa=this.getPreviousSibling(z);while(aa&&!this.isStory(aa))aa=this.getPreviousSibling(aa);return aa;};y.prototype.getParentStory=function(z){'use strict';return o.bySelector(z,"._5jmm");};y.prototype.getNextSibling=function(z){'use strict';var aa=x(z);if(aa&&this.getParentStory(aa))return aa;aa=null;if(this.$FbFeedKeyboardController2(z)){var ba=this.getStories(this.root),ca=ba.indexOf(z);if(ca>-1){aa=ba[++ca];while(aa&&aa.offsetHeight===0)aa=ba[++ca];}}else if(r('pagelet_composer',z))aa=j.scry(document,"div._5pcb ._5jmm")[0];return aa||this.selected;};y.prototype.getNextStory=function(z){'use strict';var aa=this.getNextSibling(z);while(aa&&!this.isStory(aa))aa=this.getNextSibling(aa);return aa;};y.prototype.setSelected=function(z,aa){'use strict';if(z){var ba="_5qdu",ca=j.scry(z,"._5qdu");if(!ca.length&&aa)i.prependContent(z,n.div({className:ba}));}if(aa){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&h.removeClass(this.selected,"_5qdv");this.selected=z;z&&this.setTabindexOnStory(z,'0');z&&h.addClass(z,"_5qdv");k.highlightSingle(z);}};y.prototype.$FbFeedKeyboardController1=function(){'use strict';var z=i.scry(this.selected,"._1qch");if(z.length>0)return i.scry(this.selected,"._3el7")[0];return this.selected;};y.init=function(z){'use strict';new y(z);};function y(){'use strict';u.apply(this,arguments);}f.exports=y;},null);